"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/prompt/route";
exports.ids = ["app/api/prompt/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt%2Froute&page=%2Fapi%2Fprompt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt%2Froute.ts&appDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt%2Froute&page=%2Fapi%2Fprompt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt%2Froute.ts&appDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_banik_Desktop_Projects2025_BMarkApp_NextJS_app_api_prompt_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/prompt/route.ts */ \"(rsc)/./app/api/prompt/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/prompt/route\",\n        pathname: \"/api/prompt\",\n        filename: \"route\",\n        bundlePath: \"app/api/prompt/route\"\n    },\n    resolvedPagePath: \"/Users/banik/Desktop/Projects2025/BMarkApp-NextJS/app/api/prompt/route.ts\",\n    nextConfigOutput,\n    userland: _Users_banik_Desktop_Projects2025_BMarkApp_NextJS_app_api_prompt_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/prompt/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9tcHQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByb21wdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByb21wdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJhbmlrJTJGRGVza3RvcCUyRlByb2plY3RzMjAyNSUyRkJNYXJrQXBwLU5leHRKUyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZiYW5payUyRkRlc2t0b3AlMkZQcm9qZWN0czIwMjUlMkZCTWFya0FwcC1OZXh0SlMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGxtLWNvbnNlbnN1cy1iZW5jaG1hcmstbmV4dGpzLz9iNzhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9iYW5pay9EZXNrdG9wL1Byb2plY3RzMjAyNS9CTWFya0FwcC1OZXh0SlMvYXBwL2FwaS9wcm9tcHQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb21wdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb21wdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJvbXB0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2JhbmlrL0Rlc2t0b3AvUHJvamVjdHMyMDI1L0JNYXJrQXBwLU5leHRKUy9hcHAvYXBpL3Byb21wdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHJvbXB0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt%2Froute&page=%2Fapi%2Fprompt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt%2Froute.ts&appDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/prompt/route.ts":
/*!*********************************!*\
  !*** ./app/api/prompt/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var _lib_vercel_ai_gateway__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/vercel-ai-gateway */ \"(rsc)/./lib/vercel-ai-gateway.ts\");\n/* harmony import */ var _lib_consensus_analyzer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/consensus-analyzer */ \"(rsc)/./lib/consensus-analyzer.ts\");\n\n\n\n\n\n// Helper function to get Vercel AI Gateway API key from environment or headers\nfunction getVercelAIGatewayApiKey(request) {\n    // First try environment variable (for production)\n    if (process.env.AI_GATEWAY_API_KEY) {\n        return process.env.AI_GATEWAY_API_KEY;\n    }\n    // Fall back to request headers (for development with settings page)\n    if (request?.headers.get(\"X-Vercel-AI-Gateway-Key\")) {\n        return request.headers.get(\"X-Vercel-AI-Gateway-Key\");\n    }\n    return null;\n}\n// Validation schemas\nconst PromptRequestSchema = zod__WEBPACK_IMPORTED_MODULE_4__.object({\n    text: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1, \"Prompt text is required\").max(1000, \"Prompt too long\"),\n    modelIds: zod__WEBPACK_IMPORTED_MODULE_4__.array(zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1)).min(1, \"At least one model must be selected\")\n});\n// POST: Process prompt with selected models\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        // Validate request body\n        const { text, modelIds } = PromptRequestSchema.parse(body);\n        // Get Vercel AI Gateway API key\n        const vercelAIGatewayApiKey = getVercelAIGatewayApiKey(request);\n        if (!vercelAIGatewayApiKey) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Vercel AI Gateway API key is not configured. Please set it in environment variables or via the settings page.\"\n            }, {\n                status: 500\n            });\n        }\n        // Get selected models from database\n        const allModels = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.getModels();\n        const selectedModels = allModels.filter((model)=>modelIds.includes(model.id));\n        if (selectedModels.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No valid models selected.\"\n            }, {\n                status: 400\n            });\n        }\n        // Save prompt to database\n        const savedPrompt = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.savePrompt(text);\n        // Initialize Vercel AI Gateway client\n        const aiGateway = new _lib_vercel_ai_gateway__WEBPACK_IMPORTED_MODULE_2__[\"default\"](vercelAIGatewayApiKey);\n        // Get model IDs for Vercel AI Gateway\n        const modelAIGatewayIds = selectedModels.map((model)=>model.model_id);\n        // Send requests to all models in batches\n        const batchResults = await aiGateway.batchCompletion(modelAIGatewayIds, text, {\n            maxTokens: 10,\n            temperature: 0.7,\n            systemPrompt: \"You are a helpful assistant. Respond with a single word only.\",\n            timeout: 30000,\n            concurrency: 5\n        });\n        // Process results and prepare responses\n        const responses = [];\n        const processedResults = batchResults.map((batchResult)=>{\n            const model = selectedModels.find((m)=>m.model_id === batchResult.modelId);\n            if (batchResult.error || !batchResult.result || !model) {\n                return {\n                    model: model || {\n                        id: \"unknown\",\n                        name: \"Unknown\",\n                        provider: \"Unknown\"\n                    },\n                    response_text: batchResult.error || \"Error\",\n                    response_time_ms: 0,\n                    error: batchResult.error || \"Unknown error\"\n                };\n            }\n            // Add to database responses\n            responses.push({\n                prompt_id: savedPrompt.id,\n                model_id: model.id,\n                response_text: batchResult.result.text,\n                response_time_ms: batchResult.result.timeMs\n            });\n            return {\n                model: {\n                    id: model.id,\n                    name: model.name,\n                    provider: model.provider\n                },\n                response_text: batchResult.result.text,\n                response_time_ms: batchResult.result.timeMs,\n                usage: batchResult.result.usage\n            };\n        });\n        // Save responses to database if any were successful\n        let savedResponses = [];\n        if (responses.length > 0) {\n            savedResponses = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.saveResponses(responses);\n        }\n        // Analyze consensus\n        const consensusAnalysis = _lib_consensus_analyzer__WEBPACK_IMPORTED_MODULE_3__.ConsensusAnalyzer.analyzeConsensus(savedResponses.map((response)=>({\n                id: response.id,\n                model_id: response.model_id,\n                response_text: response.response_text,\n                response_time_ms: response.response_time_ms,\n                model: response.model\n            })));\n        // Save consensus groups to database\n        let savedConsensusGroups = [];\n        if (consensusAnalysis.groups.length > 0) {\n            const consensusGroupsToSave = consensusAnalysis.groups.map((group)=>({\n                    prompt_id: savedPrompt.id,\n                    group_name: group.groupName,\n                    count: group.count,\n                    percentage: group.percentage,\n                    color: group.color\n                }));\n            try {\n                savedConsensusGroups = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.saveConsensusGroups(consensusGroupsToSave);\n            } catch (error) {\n                console.error(\"Failed to save consensus groups, continuing without saving:\", error);\n            // Continue without saving consensus groups to database\n            }\n        }\n        // Generate insights\n        const insights = _lib_consensus_analyzer__WEBPACK_IMPORTED_MODULE_3__.ConsensusAnalyzer.generateInsights(consensusAnalysis);\n        const summaryStats = _lib_consensus_analyzer__WEBPACK_IMPORTED_MODULE_3__.ConsensusAnalyzer.getSummaryStats(consensusAnalysis);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            prompt: savedPrompt,\n            responses: processedResults,\n            consensus_groups: consensusAnalysis.groups,\n            insights,\n            summary: summaryStats,\n            total_models: selectedModels.length,\n            successful_responses: responses.length,\n            failed_responses: selectedModels.length - responses.length\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error processing prompt:\", error);\n        console.error(\"Error stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_5__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid request data\",\n                details: error.errors\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Failed to process prompt\"\n        }, {\n            status: 500\n        });\n    }\n}\n// GET: Get prompt history\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const limit = parseInt(searchParams.get(\"limit\") || \"50\");\n        const promptId = searchParams.get(\"id\");\n        if (promptId) {\n            // Get specific prompt with results\n            const promptWithResults = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.getPromptWithResults(promptId);\n            if (!promptWithResults) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Prompt not found\"\n                }, {\n                    status: 404\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(promptWithResults, {\n                status: 200\n            });\n        } else {\n            // Get prompt history\n            const prompts = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.getPromptHistory(limit);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                prompts\n            }, {\n                status: 200\n            });\n        }\n    } catch (error) {\n        console.error(\"Error fetching prompt data:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Failed to fetch prompt data\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb21wdC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF1RDtBQUNoQztBQUN3QjtBQUNZO0FBQ0M7QUFFNUQsK0VBQStFO0FBQy9FLFNBQVNLLHlCQUF5QkMsT0FBcUI7SUFDckQsa0RBQWtEO0lBQ2xELElBQUlDLFFBQVFDLEdBQUcsQ0FBQ0Msa0JBQWtCLEVBQUU7UUFDbEMsT0FBT0YsUUFBUUMsR0FBRyxDQUFDQyxrQkFBa0I7SUFDdkM7SUFFQSxvRUFBb0U7SUFDcEUsSUFBSUgsU0FBU0ksUUFBUUMsSUFBSSw0QkFBNEI7UUFDbkQsT0FBT0wsUUFBUUksT0FBTyxDQUFDQyxHQUFHLENBQUM7SUFDN0I7SUFFQSxPQUFPO0FBQ1Q7QUFFQSxxQkFBcUI7QUFDckIsTUFBTUMsc0JBQXNCWCx1Q0FBUSxDQUFDO0lBQ25DYSxNQUFNYix1Q0FBUSxHQUFHZSxHQUFHLENBQUMsR0FBRywyQkFBMkJDLEdBQUcsQ0FBQyxNQUFNO0lBQzdEQyxVQUFVakIsc0NBQU8sQ0FBQ0EsdUNBQVEsR0FBR2UsR0FBRyxDQUFDLElBQUlBLEdBQUcsQ0FBQyxHQUFHO0FBQzlDO0FBRUEsNENBQTRDO0FBQ3JDLGVBQWVJLEtBQUtkLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNZSxPQUFPLE1BQU1mLFFBQVFnQixJQUFJO1FBRS9CLHdCQUF3QjtRQUN4QixNQUFNLEVBQUVSLElBQUksRUFBRUksUUFBUSxFQUFFLEdBQUdOLG9CQUFvQlcsS0FBSyxDQUFDRjtRQUVyRCxnQ0FBZ0M7UUFDaEMsTUFBTUcsd0JBQXdCbkIseUJBQXlCQztRQUN2RCxJQUFJLENBQUNrQix1QkFBdUI7WUFDMUIsT0FBT3hCLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtnQkFBRUcsT0FBTztZQUFnSCxHQUN6SDtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsb0NBQW9DO1FBQ3BDLE1BQU1DLFlBQVksTUFBTXpCLHlEQUFjQSxDQUFDMEIsU0FBUztRQUNoRCxNQUFNQyxpQkFBaUJGLFVBQVVHLE1BQU0sQ0FBQ0MsQ0FBQUEsUUFBU2IsU0FBU2MsUUFBUSxDQUFDRCxNQUFNRSxFQUFFO1FBRTNFLElBQUlKLGVBQWVLLE1BQU0sS0FBSyxHQUFHO1lBQy9CLE9BQU9sQyxxREFBWUEsQ0FBQ3NCLElBQUksQ0FDdEI7Z0JBQUVHLE9BQU87WUFBNEIsR0FDckM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDBCQUEwQjtRQUMxQixNQUFNUyxjQUFjLE1BQU1qQyx5REFBY0EsQ0FBQ2tDLFVBQVUsQ0FBQ3RCO1FBRXBELHNDQUFzQztRQUN0QyxNQUFNdUIsWUFBWSxJQUFJbEMsOERBQXFCQSxDQUFDcUI7UUFFNUMsc0NBQXNDO1FBQ3RDLE1BQU1jLG9CQUFvQlQsZUFBZVUsR0FBRyxDQUFDUixDQUFBQSxRQUFTQSxNQUFNUyxRQUFRO1FBRXBFLHlDQUF5QztRQUN6QyxNQUFNQyxlQUFlLE1BQU1KLFVBQVVLLGVBQWUsQ0FDbERKLG1CQUNBeEIsTUFDQTtZQUNFNkIsV0FBVztZQUNYQyxhQUFhO1lBQ2JDLGNBQWM7WUFDZEMsU0FBUztZQUNUQyxhQUFhO1FBQ2Y7UUFHRix3Q0FBd0M7UUFDeEMsTUFBTUMsWUFLRCxFQUFFO1FBRVAsTUFBTUMsbUJBQW1CUixhQUFhRixHQUFHLENBQUNXLENBQUFBO1lBQ3hDLE1BQU1uQixRQUFRRixlQUFlc0IsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFWixRQUFRLEtBQUtVLFlBQVlHLE9BQU87WUFFekUsSUFBSUgsWUFBWXpCLEtBQUssSUFBSSxDQUFDeUIsWUFBWUksTUFBTSxJQUFJLENBQUN2QixPQUFPO2dCQUN0RCxPQUFPO29CQUNMQSxPQUFPQSxTQUFTO3dCQUFFRSxJQUFJO3dCQUFXc0IsTUFBTTt3QkFBV0MsVUFBVTtvQkFBVTtvQkFDdEVDLGVBQWVQLFlBQVl6QixLQUFLLElBQUk7b0JBQ3BDaUMsa0JBQWtCO29CQUNsQmpDLE9BQU95QixZQUFZekIsS0FBSyxJQUFJO2dCQUM5QjtZQUNGO1lBRUEsNEJBQTRCO1lBQzVCdUIsVUFBVVcsSUFBSSxDQUFDO2dCQUNiQyxXQUFXekIsWUFBWUYsRUFBRTtnQkFDekJPLFVBQVVULE1BQU1FLEVBQUU7Z0JBQ2xCd0IsZUFBZVAsWUFBWUksTUFBTSxDQUFDeEMsSUFBSTtnQkFDdEM0QyxrQkFBa0JSLFlBQVlJLE1BQU0sQ0FBQ08sTUFBTTtZQUM3QztZQUVBLE9BQU87Z0JBQ0w5QixPQUFPO29CQUNMRSxJQUFJRixNQUFNRSxFQUFFO29CQUNac0IsTUFBTXhCLE1BQU13QixJQUFJO29CQUNoQkMsVUFBVXpCLE1BQU15QixRQUFRO2dCQUMxQjtnQkFDQUMsZUFBZVAsWUFBWUksTUFBTSxDQUFDeEMsSUFBSTtnQkFDdEM0QyxrQkFBa0JSLFlBQVlJLE1BQU0sQ0FBQ08sTUFBTTtnQkFDM0NDLE9BQU9aLFlBQVlJLE1BQU0sQ0FBQ1EsS0FBSztZQUNqQztRQUNGO1FBRUEsb0RBQW9EO1FBQ3BELElBQUlDLGlCQUF3QixFQUFFO1FBQzlCLElBQUlmLFVBQVVkLE1BQU0sR0FBRyxHQUFHO1lBQ3hCNkIsaUJBQWlCLE1BQU03RCx5REFBY0EsQ0FBQzhELGFBQWEsQ0FBQ2hCO1FBQ3REO1FBRUEsb0JBQW9CO1FBQ3BCLE1BQU1pQixvQkFBb0I3RCxzRUFBaUJBLENBQUM4RCxnQkFBZ0IsQ0FDMURILGVBQWV4QixHQUFHLENBQUM0QixDQUFBQSxXQUFhO2dCQUM5QmxDLElBQUlrQyxTQUFTbEMsRUFBRTtnQkFDZk8sVUFBVTJCLFNBQVMzQixRQUFRO2dCQUMzQmlCLGVBQWVVLFNBQVNWLGFBQWE7Z0JBQ3JDQyxrQkFBa0JTLFNBQVNULGdCQUFnQjtnQkFDM0MzQixPQUFPb0MsU0FBU3BDLEtBQUs7WUFDdkI7UUFHRixvQ0FBb0M7UUFDcEMsSUFBSXFDLHVCQUE4QixFQUFFO1FBQ3BDLElBQUlILGtCQUFrQkksTUFBTSxDQUFDbkMsTUFBTSxHQUFHLEdBQUc7WUFDdkMsTUFBTW9DLHdCQUF3Qkwsa0JBQWtCSSxNQUFNLENBQUM5QixHQUFHLENBQUNnQyxDQUFBQSxRQUFVO29CQUNuRVgsV0FBV3pCLFlBQVlGLEVBQUU7b0JBQ3pCdUMsWUFBWUQsTUFBTUUsU0FBUztvQkFDM0JDLE9BQU9ILE1BQU1HLEtBQUs7b0JBQ2xCQyxZQUFZSixNQUFNSSxVQUFVO29CQUM1QkMsT0FBT0wsTUFBTUssS0FBSztnQkFFcEI7WUFFQSxJQUFJO2dCQUNGUix1QkFBdUIsTUFBTWxFLHlEQUFjQSxDQUFDMkUsbUJBQW1CLENBQUNQO1lBQ2xFLEVBQUUsT0FBTzdDLE9BQU87Z0JBQ2RxRCxRQUFRckQsS0FBSyxDQUFDLCtEQUErREE7WUFDN0UsdURBQXVEO1lBQ3pEO1FBQ0Y7UUFFQSxvQkFBb0I7UUFDcEIsTUFBTXNELFdBQVczRSxzRUFBaUJBLENBQUM0RSxnQkFBZ0IsQ0FBQ2Y7UUFDcEQsTUFBTWdCLGVBQWU3RSxzRUFBaUJBLENBQUM4RSxlQUFlLENBQUNqQjtRQUV2RCxPQUFPakUscURBQVlBLENBQUNzQixJQUFJLENBQUM7WUFDdkI2RCxRQUFRaEQ7WUFDUmEsV0FBV0M7WUFDWG1DLGtCQUFrQm5CLGtCQUFrQkksTUFBTTtZQUMxQ1U7WUFDQU0sU0FBU0o7WUFDVEssY0FBY3pELGVBQWVLLE1BQU07WUFDbkNxRCxzQkFBc0J2QyxVQUFVZCxNQUFNO1lBQ3RDc0Qsa0JBQWtCM0QsZUFBZUssTUFBTSxHQUFHYyxVQUFVZCxNQUFNO1FBQzVELEdBQUc7WUFBRVIsUUFBUTtRQUFJO0lBRW5CLEVBQUUsT0FBT0QsT0FBTztRQUNkcUQsUUFBUXJELEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDcUQsUUFBUXJELEtBQUssQ0FBQyxnQkFBZ0JBLGlCQUFpQmdFLFFBQVFoRSxNQUFNaUUsS0FBSyxHQUFHO1FBRXJFLElBQUlqRSxpQkFBaUJ4Qix5Q0FBVSxFQUFFO1lBQy9CLE9BQU9ELHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtnQkFBRUcsT0FBTztnQkFBd0JtRSxTQUFTbkUsTUFBTW9FLE1BQU07WUFBQyxHQUN2RDtnQkFBRW5FLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE9BQU8xQixxREFBWUEsQ0FBQ3NCLElBQUksQ0FDdEI7WUFBRUcsT0FBT0EsaUJBQWlCZ0UsUUFBUWhFLE1BQU1xRSxPQUFPLEdBQUc7UUFBMkIsR0FDN0U7WUFBRXBFLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUEsMEJBQTBCO0FBQ25CLGVBQWVxRSxJQUFJekYsT0FBb0I7SUFDNUMsSUFBSTtRQUNGLE1BQU0sRUFBRTBGLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUkzRixRQUFRNEYsR0FBRztRQUM1QyxNQUFNQyxRQUFRQyxTQUFTSixhQUFhckYsR0FBRyxDQUFDLFlBQVk7UUFDcEQsTUFBTTBGLFdBQVdMLGFBQWFyRixHQUFHLENBQUM7UUFFbEMsSUFBSTBGLFVBQVU7WUFDWixtQ0FBbUM7WUFDbkMsTUFBTUMsb0JBQW9CLE1BQU1wRyx5REFBY0EsQ0FBQ3FHLG9CQUFvQixDQUFDRjtZQUVwRSxJQUFJLENBQUNDLG1CQUFtQjtnQkFDdEIsT0FBT3RHLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtvQkFBRUcsT0FBTztnQkFBbUIsR0FDNUI7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxPQUFPMUIscURBQVlBLENBQUNzQixJQUFJLENBQUNnRixtQkFBbUI7Z0JBQUU1RSxRQUFRO1lBQUk7UUFDNUQsT0FBTztZQUNMLHFCQUFxQjtZQUNyQixNQUFNOEUsVUFBVSxNQUFNdEcseURBQWNBLENBQUN1RyxnQkFBZ0IsQ0FBQ047WUFFdEQsT0FBT25HLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUFDO2dCQUFFa0Y7WUFBUSxHQUFHO2dCQUFFOUUsUUFBUTtZQUFJO1FBQ3REO0lBQ0YsRUFBRSxPQUFPRCxPQUFPO1FBQ2RxRCxRQUFRckQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBT3pCLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtZQUFFRyxPQUFPQSxpQkFBaUJnRSxRQUFRaEUsTUFBTXFFLE9BQU8sR0FBRztRQUE4QixHQUNoRjtZQUFFcEUsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sbG0tY29uc2Vuc3VzLWJlbmNobWFyay1uZXh0anMvLi9hcHAvYXBpL3Byb21wdC9yb3V0ZS50cz9kNjEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyBzdXBhYmFzZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJ1xuaW1wb3J0IFZlcmNlbEFJR2F0ZXdheUNsaWVudCBmcm9tICdAL2xpYi92ZXJjZWwtYWktZ2F0ZXdheSdcbmltcG9ydCB7IENvbnNlbnN1c0FuYWx5emVyIH0gZnJvbSAnQC9saWIvY29uc2Vuc3VzLWFuYWx5emVyJ1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IFZlcmNlbCBBSSBHYXRld2F5IEFQSSBrZXkgZnJvbSBlbnZpcm9ubWVudCBvciBoZWFkZXJzXG5mdW5jdGlvbiBnZXRWZXJjZWxBSUdhdGV3YXlBcGlLZXkocmVxdWVzdD86IE5leHRSZXF1ZXN0KTogc3RyaW5nIHwgbnVsbCB7XG4gIC8vIEZpcnN0IHRyeSBlbnZpcm9ubWVudCB2YXJpYWJsZSAoZm9yIHByb2R1Y3Rpb24pXG4gIGlmIChwcm9jZXNzLmVudi5BSV9HQVRFV0FZX0FQSV9LRVkpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuQUlfR0FURVdBWV9BUElfS0VZXG4gIH1cbiAgXG4gIC8vIEZhbGwgYmFjayB0byByZXF1ZXN0IGhlYWRlcnMgKGZvciBkZXZlbG9wbWVudCB3aXRoIHNldHRpbmdzIHBhZ2UpXG4gIGlmIChyZXF1ZXN0Py5oZWFkZXJzLmdldCgnWC1WZXJjZWwtQUktR2F0ZXdheS1LZXknKSkge1xuICAgIHJldHVybiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdYLVZlcmNlbC1BSS1HYXRld2F5LUtleScpXG4gIH1cbiAgXG4gIHJldHVybiBudWxsXG59XG5cbi8vIFZhbGlkYXRpb24gc2NoZW1hc1xuY29uc3QgUHJvbXB0UmVxdWVzdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdGV4dDogei5zdHJpbmcoKS5taW4oMSwgJ1Byb21wdCB0ZXh0IGlzIHJlcXVpcmVkJykubWF4KDEwMDAsICdQcm9tcHQgdG9vIGxvbmcnKSxcbiAgbW9kZWxJZHM6IHouYXJyYXkoei5zdHJpbmcoKS5taW4oMSkpLm1pbigxLCAnQXQgbGVhc3Qgb25lIG1vZGVsIG11c3QgYmUgc2VsZWN0ZWQnKSxcbn0pXG5cbi8vIFBPU1Q6IFByb2Nlc3MgcHJvbXB0IHdpdGggc2VsZWN0ZWQgbW9kZWxzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlcXVlc3QgYm9keVxuICAgIGNvbnN0IHsgdGV4dCwgbW9kZWxJZHMgfSA9IFByb21wdFJlcXVlc3RTY2hlbWEucGFyc2UoYm9keSlcbiAgICBcbiAgICAvLyBHZXQgVmVyY2VsIEFJIEdhdGV3YXkgQVBJIGtleVxuICAgIGNvbnN0IHZlcmNlbEFJR2F0ZXdheUFwaUtleSA9IGdldFZlcmNlbEFJR2F0ZXdheUFwaUtleShyZXF1ZXN0KVxuICAgIGlmICghdmVyY2VsQUlHYXRld2F5QXBpS2V5KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdWZXJjZWwgQUkgR2F0ZXdheSBBUEkga2V5IGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2Ugc2V0IGl0IGluIGVudmlyb25tZW50IHZhcmlhYmxlcyBvciB2aWEgdGhlIHNldHRpbmdzIHBhZ2UuJyB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBHZXQgc2VsZWN0ZWQgbW9kZWxzIGZyb20gZGF0YWJhc2VcbiAgICBjb25zdCBhbGxNb2RlbHMgPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5nZXRNb2RlbHMoKVxuICAgIGNvbnN0IHNlbGVjdGVkTW9kZWxzID0gYWxsTW9kZWxzLmZpbHRlcihtb2RlbCA9PiBtb2RlbElkcy5pbmNsdWRlcyhtb2RlbC5pZCkpXG4gICAgXG4gICAgaWYgKHNlbGVjdGVkTW9kZWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTm8gdmFsaWQgbW9kZWxzIHNlbGVjdGVkLicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gU2F2ZSBwcm9tcHQgdG8gZGF0YWJhc2VcbiAgICBjb25zdCBzYXZlZFByb21wdCA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50LnNhdmVQcm9tcHQodGV4dClcblxuICAgIC8vIEluaXRpYWxpemUgVmVyY2VsIEFJIEdhdGV3YXkgY2xpZW50XG4gICAgY29uc3QgYWlHYXRld2F5ID0gbmV3IFZlcmNlbEFJR2F0ZXdheUNsaWVudCh2ZXJjZWxBSUdhdGV3YXlBcGlLZXkpXG4gICAgXG4gICAgLy8gR2V0IG1vZGVsIElEcyBmb3IgVmVyY2VsIEFJIEdhdGV3YXlcbiAgICBjb25zdCBtb2RlbEFJR2F0ZXdheUlkcyA9IHNlbGVjdGVkTW9kZWxzLm1hcChtb2RlbCA9PiBtb2RlbC5tb2RlbF9pZClcbiAgICBcbiAgICAvLyBTZW5kIHJlcXVlc3RzIHRvIGFsbCBtb2RlbHMgaW4gYmF0Y2hlc1xuICAgIGNvbnN0IGJhdGNoUmVzdWx0cyA9IGF3YWl0IGFpR2F0ZXdheS5iYXRjaENvbXBsZXRpb24oXG4gICAgICBtb2RlbEFJR2F0ZXdheUlkcyxcbiAgICAgIHRleHQsXG4gICAgICB7XG4gICAgICAgIG1heFRva2VuczogMTAsXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgIHN5c3RlbVByb21wdDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4gUmVzcG9uZCB3aXRoIGEgc2luZ2xlIHdvcmQgb25seS4nLFxuICAgICAgICB0aW1lb3V0OiAzMDAwMCxcbiAgICAgICAgY29uY3VycmVuY3k6IDVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBQcm9jZXNzIHJlc3VsdHMgYW5kIHByZXBhcmUgcmVzcG9uc2VzXG4gICAgY29uc3QgcmVzcG9uc2VzOiBBcnJheTx7XG4gICAgICBwcm9tcHRfaWQ6IHN0cmluZ1xuICAgICAgbW9kZWxfaWQ6IHN0cmluZ1xuICAgICAgcmVzcG9uc2VfdGV4dDogc3RyaW5nXG4gICAgICByZXNwb25zZV90aW1lX21zOiBudW1iZXJcbiAgICB9PiA9IFtdXG5cbiAgICBjb25zdCBwcm9jZXNzZWRSZXN1bHRzID0gYmF0Y2hSZXN1bHRzLm1hcChiYXRjaFJlc3VsdCA9PiB7XG4gICAgICBjb25zdCBtb2RlbCA9IHNlbGVjdGVkTW9kZWxzLmZpbmQobSA9PiBtLm1vZGVsX2lkID09PSBiYXRjaFJlc3VsdC5tb2RlbElkKVxuICAgICAgXG4gICAgICBpZiAoYmF0Y2hSZXN1bHQuZXJyb3IgfHwgIWJhdGNoUmVzdWx0LnJlc3VsdCB8fCAhbW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtb2RlbDogbW9kZWwgfHwgeyBpZDogJ3Vua25vd24nLCBuYW1lOiAnVW5rbm93bicsIHByb3ZpZGVyOiAnVW5rbm93bicgfSxcbiAgICAgICAgICByZXNwb25zZV90ZXh0OiBiYXRjaFJlc3VsdC5lcnJvciB8fCAnRXJyb3InLFxuICAgICAgICAgIHJlc3BvbnNlX3RpbWVfbXM6IDAsXG4gICAgICAgICAgZXJyb3I6IGJhdGNoUmVzdWx0LmVycm9yIHx8ICdVbmtub3duIGVycm9yJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0byBkYXRhYmFzZSByZXNwb25zZXNcbiAgICAgIHJlc3BvbnNlcy5wdXNoKHtcbiAgICAgICAgcHJvbXB0X2lkOiBzYXZlZFByb21wdC5pZCxcbiAgICAgICAgbW9kZWxfaWQ6IG1vZGVsLmlkLFxuICAgICAgICByZXNwb25zZV90ZXh0OiBiYXRjaFJlc3VsdC5yZXN1bHQudGV4dCxcbiAgICAgICAgcmVzcG9uc2VfdGltZV9tczogYmF0Y2hSZXN1bHQucmVzdWx0LnRpbWVNc1xuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICBpZDogbW9kZWwuaWQsXG4gICAgICAgICAgbmFtZTogbW9kZWwubmFtZSxcbiAgICAgICAgICBwcm92aWRlcjogbW9kZWwucHJvdmlkZXJcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2VfdGV4dDogYmF0Y2hSZXN1bHQucmVzdWx0LnRleHQsXG4gICAgICAgIHJlc3BvbnNlX3RpbWVfbXM6IGJhdGNoUmVzdWx0LnJlc3VsdC50aW1lTXMsXG4gICAgICAgIHVzYWdlOiBiYXRjaFJlc3VsdC5yZXN1bHQudXNhZ2VcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gU2F2ZSByZXNwb25zZXMgdG8gZGF0YWJhc2UgaWYgYW55IHdlcmUgc3VjY2Vzc2Z1bFxuICAgIGxldCBzYXZlZFJlc3BvbnNlczogYW55W10gPSBbXVxuICAgIGlmIChyZXNwb25zZXMubGVuZ3RoID4gMCkge1xuICAgICAgc2F2ZWRSZXNwb25zZXMgPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5zYXZlUmVzcG9uc2VzKHJlc3BvbnNlcylcbiAgICB9XG5cbiAgICAvLyBBbmFseXplIGNvbnNlbnN1c1xuICAgIGNvbnN0IGNvbnNlbnN1c0FuYWx5c2lzID0gQ29uc2Vuc3VzQW5hbHl6ZXIuYW5hbHl6ZUNvbnNlbnN1cyhcbiAgICAgIHNhdmVkUmVzcG9uc2VzLm1hcChyZXNwb25zZSA9PiAoe1xuICAgICAgICBpZDogcmVzcG9uc2UuaWQsXG4gICAgICAgIG1vZGVsX2lkOiByZXNwb25zZS5tb2RlbF9pZCxcbiAgICAgICAgcmVzcG9uc2VfdGV4dDogcmVzcG9uc2UucmVzcG9uc2VfdGV4dCxcbiAgICAgICAgcmVzcG9uc2VfdGltZV9tczogcmVzcG9uc2UucmVzcG9uc2VfdGltZV9tcyxcbiAgICAgICAgbW9kZWw6IHJlc3BvbnNlLm1vZGVsXG4gICAgICB9KSlcbiAgICApXG5cbiAgICAvLyBTYXZlIGNvbnNlbnN1cyBncm91cHMgdG8gZGF0YWJhc2VcbiAgICBsZXQgc2F2ZWRDb25zZW5zdXNHcm91cHM6IGFueVtdID0gW11cbiAgICBpZiAoY29uc2Vuc3VzQW5hbHlzaXMuZ3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNvbnNlbnN1c0dyb3Vwc1RvU2F2ZSA9IGNvbnNlbnN1c0FuYWx5c2lzLmdyb3Vwcy5tYXAoZ3JvdXAgPT4gKHtcbiAgICAgICAgcHJvbXB0X2lkOiBzYXZlZFByb21wdC5pZCxcbiAgICAgICAgZ3JvdXBfbmFtZTogZ3JvdXAuZ3JvdXBOYW1lLFxuICAgICAgICBjb3VudDogZ3JvdXAuY291bnQsXG4gICAgICAgIHBlcmNlbnRhZ2U6IGdyb3VwLnBlcmNlbnRhZ2UsXG4gICAgICAgIGNvbG9yOiBncm91cC5jb2xvclxuICAgICAgICAvLyBOb3RlOiBtb2RlbHMgZmllbGQgcmVtb3ZlZCB0ZW1wb3JhcmlseSBkdWUgdG8gZGF0YWJhc2Ugc2NoZW1hIG1pc21hdGNoXG4gICAgICB9KSlcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgc2F2ZWRDb25zZW5zdXNHcm91cHMgPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5zYXZlQ29uc2Vuc3VzR3JvdXBzKGNvbnNlbnN1c0dyb3Vwc1RvU2F2ZSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGNvbnNlbnN1cyBncm91cHMsIGNvbnRpbnVpbmcgd2l0aG91dCBzYXZpbmc6JywgZXJyb3IpXG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGhvdXQgc2F2aW5nIGNvbnNlbnN1cyBncm91cHMgdG8gZGF0YWJhc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSBpbnNpZ2h0c1xuICAgIGNvbnN0IGluc2lnaHRzID0gQ29uc2Vuc3VzQW5hbHl6ZXIuZ2VuZXJhdGVJbnNpZ2h0cyhjb25zZW5zdXNBbmFseXNpcylcbiAgICBjb25zdCBzdW1tYXJ5U3RhdHMgPSBDb25zZW5zdXNBbmFseXplci5nZXRTdW1tYXJ5U3RhdHMoY29uc2Vuc3VzQW5hbHlzaXMpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgcHJvbXB0OiBzYXZlZFByb21wdCxcbiAgICAgIHJlc3BvbnNlczogcHJvY2Vzc2VkUmVzdWx0cyxcbiAgICAgIGNvbnNlbnN1c19ncm91cHM6IGNvbnNlbnN1c0FuYWx5c2lzLmdyb3VwcyxcbiAgICAgIGluc2lnaHRzLFxuICAgICAgc3VtbWFyeTogc3VtbWFyeVN0YXRzLFxuICAgICAgdG90YWxfbW9kZWxzOiBzZWxlY3RlZE1vZGVscy5sZW5ndGgsXG4gICAgICBzdWNjZXNzZnVsX3Jlc3BvbnNlczogcmVzcG9uc2VzLmxlbmd0aCxcbiAgICAgIGZhaWxlZF9yZXNwb25zZXM6IHNlbGVjdGVkTW9kZWxzLmxlbmd0aCAtIHJlc3BvbnNlcy5sZW5ndGhcbiAgICB9LCB7IHN0YXR1czogMjAwIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIHByb21wdDonLCBlcnJvcilcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdGFjazonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnTm8gc3RhY2sgdHJhY2UnKVxuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdCBkYXRhJywgZGV0YWlsczogZXJyb3IuZXJyb3JzIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBwcm9jZXNzIHByb21wdCcgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG4vLyBHRVQ6IEdldCBwcm9tcHQgaGlzdG9yeVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnNTAnKVxuICAgIGNvbnN0IHByb21wdElkID0gc2VhcmNoUGFyYW1zLmdldCgnaWQnKVxuXG4gICAgaWYgKHByb21wdElkKSB7XG4gICAgICAvLyBHZXQgc3BlY2lmaWMgcHJvbXB0IHdpdGggcmVzdWx0c1xuICAgICAgY29uc3QgcHJvbXB0V2l0aFJlc3VsdHMgPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5nZXRQcm9tcHRXaXRoUmVzdWx0cyhwcm9tcHRJZClcbiAgICAgIFxuICAgICAgaWYgKCFwcm9tcHRXaXRoUmVzdWx0cykge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogJ1Byb21wdCBub3QgZm91bmQnIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHByb21wdFdpdGhSZXN1bHRzLCB7IHN0YXR1czogMjAwIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEdldCBwcm9tcHQgaGlzdG9yeVxuICAgICAgY29uc3QgcHJvbXB0cyA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50LmdldFByb21wdEhpc3RvcnkobGltaXQpXG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHByb21wdHMgfSwgeyBzdGF0dXM6IDIwMCB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9tcHQgZGF0YTonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggcHJvbXB0IGRhdGEnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwieiIsInN1cGFiYXNlQ2xpZW50IiwiVmVyY2VsQUlHYXRld2F5Q2xpZW50IiwiQ29uc2Vuc3VzQW5hbHl6ZXIiLCJnZXRWZXJjZWxBSUdhdGV3YXlBcGlLZXkiLCJyZXF1ZXN0IiwicHJvY2VzcyIsImVudiIsIkFJX0dBVEVXQVlfQVBJX0tFWSIsImhlYWRlcnMiLCJnZXQiLCJQcm9tcHRSZXF1ZXN0U2NoZW1hIiwib2JqZWN0IiwidGV4dCIsInN0cmluZyIsIm1pbiIsIm1heCIsIm1vZGVsSWRzIiwiYXJyYXkiLCJQT1NUIiwiYm9keSIsImpzb24iLCJwYXJzZSIsInZlcmNlbEFJR2F0ZXdheUFwaUtleSIsImVycm9yIiwic3RhdHVzIiwiYWxsTW9kZWxzIiwiZ2V0TW9kZWxzIiwic2VsZWN0ZWRNb2RlbHMiLCJmaWx0ZXIiLCJtb2RlbCIsImluY2x1ZGVzIiwiaWQiLCJsZW5ndGgiLCJzYXZlZFByb21wdCIsInNhdmVQcm9tcHQiLCJhaUdhdGV3YXkiLCJtb2RlbEFJR2F0ZXdheUlkcyIsIm1hcCIsIm1vZGVsX2lkIiwiYmF0Y2hSZXN1bHRzIiwiYmF0Y2hDb21wbGV0aW9uIiwibWF4VG9rZW5zIiwidGVtcGVyYXR1cmUiLCJzeXN0ZW1Qcm9tcHQiLCJ0aW1lb3V0IiwiY29uY3VycmVuY3kiLCJyZXNwb25zZXMiLCJwcm9jZXNzZWRSZXN1bHRzIiwiYmF0Y2hSZXN1bHQiLCJmaW5kIiwibSIsIm1vZGVsSWQiLCJyZXN1bHQiLCJuYW1lIiwicHJvdmlkZXIiLCJyZXNwb25zZV90ZXh0IiwicmVzcG9uc2VfdGltZV9tcyIsInB1c2giLCJwcm9tcHRfaWQiLCJ0aW1lTXMiLCJ1c2FnZSIsInNhdmVkUmVzcG9uc2VzIiwic2F2ZVJlc3BvbnNlcyIsImNvbnNlbnN1c0FuYWx5c2lzIiwiYW5hbHl6ZUNvbnNlbnN1cyIsInJlc3BvbnNlIiwic2F2ZWRDb25zZW5zdXNHcm91cHMiLCJncm91cHMiLCJjb25zZW5zdXNHcm91cHNUb1NhdmUiLCJncm91cCIsImdyb3VwX25hbWUiLCJncm91cE5hbWUiLCJjb3VudCIsInBlcmNlbnRhZ2UiLCJjb2xvciIsInNhdmVDb25zZW5zdXNHcm91cHMiLCJjb25zb2xlIiwiaW5zaWdodHMiLCJnZW5lcmF0ZUluc2lnaHRzIiwic3VtbWFyeVN0YXRzIiwiZ2V0U3VtbWFyeVN0YXRzIiwicHJvbXB0IiwiY29uc2Vuc3VzX2dyb3VwcyIsInN1bW1hcnkiLCJ0b3RhbF9tb2RlbHMiLCJzdWNjZXNzZnVsX3Jlc3BvbnNlcyIsImZhaWxlZF9yZXNwb25zZXMiLCJFcnJvciIsInN0YWNrIiwiWm9kRXJyb3IiLCJkZXRhaWxzIiwiZXJyb3JzIiwibWVzc2FnZSIsIkdFVCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImxpbWl0IiwicGFyc2VJbnQiLCJwcm9tcHRJZCIsInByb21wdFdpdGhSZXN1bHRzIiwiZ2V0UHJvbXB0V2l0aFJlc3VsdHMiLCJwcm9tcHRzIiwiZ2V0UHJvbXB0SGlzdG9yeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/prompt/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/consensus-analyzer.ts":
/*!***********************************!*\
  !*** ./lib/consensus-analyzer.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsensusAnalyzer: () => (/* binding */ ConsensusAnalyzer)\n/* harmony export */ });\nclass ConsensusAnalyzer {\n    static{\n        this.SIMILARITY_THRESHOLD = 0.8;\n    }\n    static{\n        this.COLORS = [\n            \"#3B82F6\",\n            \"#EF4444\",\n            \"#10B981\",\n            \"#F59E0B\",\n            \"#8B5CF6\",\n            \"#F97316\",\n            \"#06B6D4\",\n            \"#84CC16\",\n            \"#EC4899\",\n            \"#6B7280\"\n        ];\n    }\n    /**\n   * Analyze responses to find consensus groups\n   */ static analyzeConsensus(responses) {\n        if (responses.length === 0) {\n            return {\n                groups: [],\n                totalResponses: 0,\n                consensusLevel: 0,\n                diversity: 0,\n                topResponse: \"\"\n            };\n        }\n        // Group similar responses\n        const groups = this.groupSimilarResponses(responses);\n        // Sort groups by count (descending)\n        groups.sort((a, b)=>b.count - a.count);\n        // Assign colors\n        groups.forEach((group, index)=>{\n            group.color = this.COLORS[index % this.COLORS.length];\n        });\n        // Calculate metrics\n        const totalResponses = responses.length;\n        const consensusLevel = groups.length > 0 ? groups[0].count / totalResponses * 100 : 0;\n        const diversity = groups.length / totalResponses;\n        const topResponse = groups.length > 0 ? groups[0].groupName : \"\";\n        return {\n            groups,\n            totalResponses,\n            consensusLevel,\n            diversity,\n            topResponse\n        };\n    }\n    /**\n   * Group responses by similarity\n   */ static groupSimilarResponses(responses) {\n        const groups = [];\n        for (const response of responses){\n            const normalizedText = this.normalizeText(response.response_text);\n            // Find existing group or create new one\n            let group = groups.find((g)=>this.calculateSimilarity(g.groupName, normalizedText) >= this.SIMILARITY_THRESHOLD);\n            if (!group) {\n                group = {\n                    groupName: normalizedText,\n                    count: 0,\n                    percentage: 0,\n                    color: \"\",\n                    models: [],\n                    responses: []\n                };\n                groups.push(group);\n            }\n            // Add response to group\n            group.count++;\n            group.responses.push(response);\n            if (response.model) {\n                group.models.push(response.model.name);\n            }\n        }\n        // Calculate percentages\n        const total = responses.length;\n        groups.forEach((group)=>{\n            group.percentage = group.count / total * 100;\n        });\n        return groups;\n    }\n    /**\n   * Normalize text for comparison\n   */ static normalizeText(text) {\n        return text.toLowerCase().trim().replace(/[^\\w\\s]/g, \"\") // Remove punctuation\n        .replace(/\\s+/g, \" \") // Normalize whitespace\n        ;\n    }\n    /**\n   * Calculate similarity between two texts using Levenshtein distance\n   */ static calculateSimilarity(text1, text2) {\n        const normalized1 = this.normalizeText(text1);\n        const normalized2 = this.normalizeText(text2);\n        if (normalized1 === normalized2) return 1.0;\n        const distance = this.levenshteinDistance(normalized1, normalized2);\n        const maxLength = Math.max(normalized1.length, normalized2.length);\n        return maxLength === 0 ? 1.0 : 1 - distance / maxLength;\n    }\n    /**\n   * Calculate Levenshtein distance between two strings\n   */ static levenshteinDistance(str1, str2) {\n        const matrix = Array(str2.length + 1).fill(null).map(()=>Array(str1.length + 1).fill(null));\n        for(let i = 0; i <= str1.length; i++)matrix[0][i] = i;\n        for(let j = 0; j <= str2.length; j++)matrix[j][0] = j;\n        for(let j = 1; j <= str2.length; j++){\n            for(let i = 1; i <= str1.length; i++){\n                const indicator = str1[i - 1] === str2[j - 1] ? 0 : 1;\n                matrix[j][i] = Math.min(matrix[j][i - 1] + 1, matrix[j - 1][i] + 1, matrix[j - 1][i - 1] + indicator // substitution\n                );\n            }\n        }\n        return matrix[str2.length][str1.length];\n    }\n    /**\n   * Generate insights about the consensus\n   */ static generateInsights(analysis) {\n        const insights = [];\n        const { groups, totalResponses, consensusLevel, diversity } = analysis;\n        if (totalResponses === 0) {\n            return [\n                \"No responses to analyze.\"\n            ];\n        }\n        // Consensus level insights\n        if (consensusLevel >= 80) {\n            insights.push(`Strong consensus: ${consensusLevel.toFixed(1)}% of models agreed on \"${analysis.topResponse}\".`);\n        } else if (consensusLevel >= 60) {\n            insights.push(`Moderate consensus: ${consensusLevel.toFixed(1)}% of models agreed on \"${analysis.topResponse}\".`);\n        } else if (consensusLevel >= 40) {\n            insights.push(`Weak consensus: Only ${consensusLevel.toFixed(1)}% of models agreed on \"${analysis.topResponse}\".`);\n        } else {\n            insights.push(`No clear consensus: Responses were highly diverse with the top response only getting ${consensusLevel.toFixed(1)}% agreement.`);\n        }\n        // Diversity insights\n        if (diversity >= 0.8) {\n            insights.push(\"Very high diversity: Most models gave different responses.\");\n        } else if (diversity >= 0.6) {\n            insights.push(\"High diversity: Many different responses were given.\");\n        } else if (diversity >= 0.4) {\n            insights.push(\"Moderate diversity: Some variation in responses.\");\n        } else {\n            insights.push(\"Low diversity: Models tended to give similar responses.\");\n        }\n        // Group insights\n        if (groups.length >= 2) {\n            const secondGroup = groups[1];\n            const gap = groups[0].percentage - secondGroup.percentage;\n            if (gap < 10) {\n                insights.push(`Close competition: \"${groups[0].groupName}\" (${groups[0].percentage.toFixed(1)}%) barely edged out \"${secondGroup.groupName}\" (${secondGroup.percentage.toFixed(1)}%).`);\n            }\n        }\n        // Provider insights\n        if (groups.length > 0) {\n            const topGroup = groups[0];\n            const providers = topGroup.responses.map((r)=>r.model?.provider).filter(Boolean);\n            const uniqueProviders = [\n                ...new Set(providers)\n            ];\n            if (uniqueProviders.length === 1) {\n                insights.push(`Provider bias: All models agreeing on \"${topGroup.groupName}\" were from ${uniqueProviders[0]}.`);\n            } else if (uniqueProviders.length >= 3) {\n                insights.push(`Cross-provider agreement: Models from ${uniqueProviders.length} different providers agreed on \"${topGroup.groupName}\".`);\n            }\n        }\n        return insights;\n    }\n    /**\n   * Export consensus data to CSV format\n   */ static exportToCsv(analysis, promptText) {\n        const headers = [\n            \"Response\",\n            \"Count\",\n            \"Percentage\",\n            \"Models\"\n        ];\n        const rows = analysis.groups.map((group)=>[\n                `\"${group.groupName.replace(/\"/g, '\"\"')}\"`,\n                group.count.toString(),\n                group.percentage.toFixed(1),\n                `\"${group.models.join(\", \").replace(/\"/g, '\"\"')}\"`\n            ]);\n        const csvContent = [\n            `# LLM Consensus Analysis`,\n            `# Prompt: \"${promptText.replace(/\"/g, '\"\"')}\"`,\n            `# Generated: ${new Date().toISOString()}`,\n            `# Total Responses: ${analysis.totalResponses}`,\n            `# Consensus Level: ${analysis.consensusLevel.toFixed(1)}%`,\n            ``,\n            headers.join(\",\"),\n            ...rows.map((row)=>row.join(\",\"))\n        ].join(\"\\n\");\n        return csvContent;\n    }\n    /**\n   * Generate summary statistics\n   */ static getSummaryStats(analysis) {\n        return {\n            totalModels: analysis.totalResponses,\n            uniqueResponses: analysis.groups.length,\n            consensusLevel: analysis.consensusLevel,\n            topResponse: analysis.topResponse,\n            responseDistribution: analysis.groups.map((group)=>({\n                    response: group.groupName,\n                    count: group.count,\n                    percentage: group.percentage\n                }))\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsQ0FBQztZQUMzRCxDQUFDLENBQUM7WUFDRmEsUUFBUUcsSUFBSSxDQUFDO2VBQ1ZGLEtBQUt0QixHQUFHLENBQUM0QixDQUFBQSxNQUFPQSxJQUFJSixJQUFJLENBQUM7U0FDN0IsQ0FBQ0EsSUFBSSxDQUFDO1FBRVAsT0FBT0M7SUFDVDtJQUVBOztHQUVDLEdBQ0QsT0FBT0ksZ0JBQWdCdkIsUUFBMkIsRUFNaEQ7UUFDQSxPQUFPO1lBQ0x3QixhQUFheEIsU0FBU25ELGNBQWM7WUFDcEM0RSxpQkFBaUJ6QixTQUFTcEQsTUFBTSxDQUFDRCxNQUFNO1lBQ3ZDRyxnQkFBZ0JrRCxTQUFTbEQsY0FBYztZQUN2Q0UsYUFBYWdELFNBQVNoRCxXQUFXO1lBQ2pDMEUsc0JBQXNCMUIsU0FBU3BELE1BQU0sQ0FBQzhDLEdBQUcsQ0FBQ25DLENBQUFBLFFBQVU7b0JBQ2xESSxVQUFVSixNQUFNRyxTQUFTO29CQUN6QkwsT0FBT0UsTUFBTUYsS0FBSztvQkFDbEJhLFlBQVlYLE1BQU1XLFVBQVU7Z0JBQzlCO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGxtLWNvbnNlbnN1cy1iZW5jaG1hcmstbmV4dGpzLy4vbGliL2NvbnNlbnN1cy1hbmFseXplci50cz81MzdiIl0sInNvdXJjZXNDb250ZW50IjpbImludGVyZmFjZSBSZXNwb25zZSB7XG4gIGlkOiBzdHJpbmdcbiAgbW9kZWxfaWQ6IHN0cmluZ1xuICByZXNwb25zZV90ZXh0OiBzdHJpbmdcbiAgcmVzcG9uc2VfdGltZV9tczogbnVtYmVyXG4gIG1vZGVsPzoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHByb3ZpZGVyOiBzdHJpbmdcbiAgfVxufVxuXG5pbnRlcmZhY2UgQ29uc2Vuc3VzR3JvdXAge1xuICBncm91cE5hbWU6IHN0cmluZ1xuICBjb3VudDogbnVtYmVyXG4gIHBlcmNlbnRhZ2U6IG51bWJlclxuICBjb2xvcjogc3RyaW5nXG4gIG1vZGVsczogc3RyaW5nW11cbiAgcmVzcG9uc2VzOiBSZXNwb25zZVtdXG59XG5cbmludGVyZmFjZSBDb25zZW5zdXNBbmFseXNpcyB7XG4gIGdyb3VwczogQ29uc2Vuc3VzR3JvdXBbXVxuICB0b3RhbFJlc3BvbnNlczogbnVtYmVyXG4gIGNvbnNlbnN1c0xldmVsOiBudW1iZXJcbiAgZGl2ZXJzaXR5OiBudW1iZXJcbiAgdG9wUmVzcG9uc2U6IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgQ29uc2Vuc3VzQW5hbHl6ZXIge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTSU1JTEFSSVRZX1RIUkVTSE9MRCA9IDAuOFxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDT0xPUlMgPSBbXG4gICAgJyMzQjgyRjYnLCAvLyBCbHVlXG4gICAgJyNFRjQ0NDQnLCAvLyBSZWRcbiAgICAnIzEwQjk4MScsIC8vIEdyZWVuXG4gICAgJyNGNTlFMEInLCAvLyBBbWJlclxuICAgICcjOEI1Q0Y2JywgLy8gUHVycGxlXG4gICAgJyNGOTczMTYnLCAvLyBPcmFuZ2VcbiAgICAnIzA2QjZENCcsIC8vIEN5YW5cbiAgICAnIzg0Q0MxNicsIC8vIExpbWVcbiAgICAnI0VDNDg5OScsIC8vIFBpbmtcbiAgICAnIzZCNzI4MCcsIC8vIEdyYXlcbiAgXVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHJlc3BvbnNlcyB0byBmaW5kIGNvbnNlbnN1cyBncm91cHNcbiAgICovXG4gIHN0YXRpYyBhbmFseXplQ29uc2Vuc3VzKHJlc3BvbnNlczogUmVzcG9uc2VbXSk6IENvbnNlbnN1c0FuYWx5c2lzIHtcbiAgICBpZiAocmVzcG9uc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZ3JvdXBzOiBbXSxcbiAgICAgICAgdG90YWxSZXNwb25zZXM6IDAsXG4gICAgICAgIGNvbnNlbnN1c0xldmVsOiAwLFxuICAgICAgICBkaXZlcnNpdHk6IDAsXG4gICAgICAgIHRvcFJlc3BvbnNlOiAnJ1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdyb3VwIHNpbWlsYXIgcmVzcG9uc2VzXG4gICAgY29uc3QgZ3JvdXBzID0gdGhpcy5ncm91cFNpbWlsYXJSZXNwb25zZXMocmVzcG9uc2VzKVxuICAgIFxuICAgIC8vIFNvcnQgZ3JvdXBzIGJ5IGNvdW50IChkZXNjZW5kaW5nKVxuICAgIGdyb3Vwcy5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudClcbiAgICBcbiAgICAvLyBBc3NpZ24gY29sb3JzXG4gICAgZ3JvdXBzLmZvckVhY2goKGdyb3VwLCBpbmRleCkgPT4ge1xuICAgICAgZ3JvdXAuY29sb3IgPSB0aGlzLkNPTE9SU1tpbmRleCAlIHRoaXMuQ09MT1JTLmxlbmd0aF1cbiAgICB9KVxuXG4gICAgLy8gQ2FsY3VsYXRlIG1ldHJpY3NcbiAgICBjb25zdCB0b3RhbFJlc3BvbnNlcyA9IHJlc3BvbnNlcy5sZW5ndGhcbiAgICBjb25zdCBjb25zZW5zdXNMZXZlbCA9IGdyb3Vwcy5sZW5ndGggPiAwID8gKGdyb3Vwc1swXS5jb3VudCAvIHRvdGFsUmVzcG9uc2VzKSAqIDEwMCA6IDBcbiAgICBjb25zdCBkaXZlcnNpdHkgPSBncm91cHMubGVuZ3RoIC8gdG90YWxSZXNwb25zZXNcbiAgICBjb25zdCB0b3BSZXNwb25zZSA9IGdyb3Vwcy5sZW5ndGggPiAwID8gZ3JvdXBzWzBdLmdyb3VwTmFtZSA6ICcnXG5cbiAgICByZXR1cm4ge1xuICAgICAgZ3JvdXBzLFxuICAgICAgdG90YWxSZXNwb25zZXMsXG4gICAgICBjb25zZW5zdXNMZXZlbCxcbiAgICAgIGRpdmVyc2l0eSxcbiAgICAgIHRvcFJlc3BvbnNlXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdyb3VwIHJlc3BvbnNlcyBieSBzaW1pbGFyaXR5XG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBncm91cFNpbWlsYXJSZXNwb25zZXMocmVzcG9uc2VzOiBSZXNwb25zZVtdKTogQ29uc2Vuc3VzR3JvdXBbXSB7XG4gICAgY29uc3QgZ3JvdXBzOiBDb25zZW5zdXNHcm91cFtdID0gW11cblxuICAgIGZvciAoY29uc3QgcmVzcG9uc2Ugb2YgcmVzcG9uc2VzKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkVGV4dCA9IHRoaXMubm9ybWFsaXplVGV4dChyZXNwb25zZS5yZXNwb25zZV90ZXh0KVxuICAgICAgXG4gICAgICAvLyBGaW5kIGV4aXN0aW5nIGdyb3VwIG9yIGNyZWF0ZSBuZXcgb25lXG4gICAgICBsZXQgZ3JvdXAgPSBncm91cHMuZmluZChnID0+IFxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVNpbWlsYXJpdHkoZy5ncm91cE5hbWUsIG5vcm1hbGl6ZWRUZXh0KSA+PSB0aGlzLlNJTUlMQVJJVFlfVEhSRVNIT0xEXG4gICAgICApXG5cbiAgICAgIGlmICghZ3JvdXApIHtcbiAgICAgICAgZ3JvdXAgPSB7XG4gICAgICAgICAgZ3JvdXBOYW1lOiBub3JtYWxpemVkVGV4dCxcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICBwZXJjZW50YWdlOiAwLFxuICAgICAgICAgIGNvbG9yOiAnJyxcbiAgICAgICAgICBtb2RlbHM6IFtdLFxuICAgICAgICAgIHJlc3BvbnNlczogW11cbiAgICAgICAgfVxuICAgICAgICBncm91cHMucHVzaChncm91cClcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHJlc3BvbnNlIHRvIGdyb3VwXG4gICAgICBncm91cC5jb3VudCsrXG4gICAgICBncm91cC5yZXNwb25zZXMucHVzaChyZXNwb25zZSlcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm1vZGVsKSB7XG4gICAgICAgIGdyb3VwLm1vZGVscy5wdXNoKHJlc3BvbnNlLm1vZGVsLm5hbWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHBlcmNlbnRhZ2VzXG4gICAgY29uc3QgdG90YWwgPSByZXNwb25zZXMubGVuZ3RoXG4gICAgZ3JvdXBzLmZvckVhY2goZ3JvdXAgPT4ge1xuICAgICAgZ3JvdXAucGVyY2VudGFnZSA9IChncm91cC5jb3VudCAvIHRvdGFsKSAqIDEwMFxuICAgIH0pXG5cbiAgICByZXR1cm4gZ3JvdXBzXG4gIH1cblxuICAvKipcbiAgICogTm9ybWFsaXplIHRleHQgZm9yIGNvbXBhcmlzb25cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIG5vcm1hbGl6ZVRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC50cmltKClcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgJycpIC8vIFJlbW92ZSBwdW5jdHVhdGlvblxuICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKSAvLyBOb3JtYWxpemUgd2hpdGVzcGFjZVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBzaW1pbGFyaXR5IGJldHdlZW4gdHdvIHRleHRzIHVzaW5nIExldmVuc2h0ZWluIGRpc3RhbmNlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBjYWxjdWxhdGVTaW1pbGFyaXR5KHRleHQxOiBzdHJpbmcsIHRleHQyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQxID0gdGhpcy5ub3JtYWxpemVUZXh0KHRleHQxKVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQyID0gdGhpcy5ub3JtYWxpemVUZXh0KHRleHQyKVxuICAgIFxuICAgIGlmIChub3JtYWxpemVkMSA9PT0gbm9ybWFsaXplZDIpIHJldHVybiAxLjBcbiAgICBcbiAgICBjb25zdCBkaXN0YW5jZSA9IHRoaXMubGV2ZW5zaHRlaW5EaXN0YW5jZShub3JtYWxpemVkMSwgbm9ybWFsaXplZDIpXG4gICAgY29uc3QgbWF4TGVuZ3RoID0gTWF0aC5tYXgobm9ybWFsaXplZDEubGVuZ3RoLCBub3JtYWxpemVkMi5sZW5ndGgpXG4gICAgXG4gICAgcmV0dXJuIG1heExlbmd0aCA9PT0gMCA/IDEuMCA6IDEgLSAoZGlzdGFuY2UgLyBtYXhMZW5ndGgpXG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIExldmVuc2h0ZWluIGRpc3RhbmNlIGJldHdlZW4gdHdvIHN0cmluZ3NcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGxldmVuc2h0ZWluRGlzdGFuY2Uoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IG1hdHJpeCA9IEFycmF5KHN0cjIubGVuZ3RoICsgMSkuZmlsbChudWxsKS5tYXAoKCkgPT4gQXJyYXkoc3RyMS5sZW5ndGggKyAxKS5maWxsKG51bGwpKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc3RyMS5sZW5ndGg7IGkrKykgbWF0cml4WzBdW2ldID0gaVxuICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHN0cjIubGVuZ3RoOyBqKyspIG1hdHJpeFtqXVswXSA9IGpcblxuICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHN0cjIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHN0cjEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gc3RyMVtpIC0gMV0gPT09IHN0cjJbaiAtIDFdID8gMCA6IDFcbiAgICAgICAgbWF0cml4W2pdW2ldID0gTWF0aC5taW4oXG4gICAgICAgICAgbWF0cml4W2pdW2kgLSAxXSArIDEsIC8vIGRlbGV0aW9uXG4gICAgICAgICAgbWF0cml4W2ogLSAxXVtpXSArIDEsIC8vIGluc2VydGlvblxuICAgICAgICAgIG1hdHJpeFtqIC0gMV1baSAtIDFdICsgaW5kaWNhdG9yIC8vIHN1YnN0aXR1dGlvblxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdHJpeFtzdHIyLmxlbmd0aF1bc3RyMS5sZW5ndGhdXG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgaW5zaWdodHMgYWJvdXQgdGhlIGNvbnNlbnN1c1xuICAgKi9cbiAgc3RhdGljIGdlbmVyYXRlSW5zaWdodHMoYW5hbHlzaXM6IENvbnNlbnN1c0FuYWx5c2lzKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGluc2lnaHRzOiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3QgeyBncm91cHMsIHRvdGFsUmVzcG9uc2VzLCBjb25zZW5zdXNMZXZlbCwgZGl2ZXJzaXR5IH0gPSBhbmFseXNpc1xuXG4gICAgaWYgKHRvdGFsUmVzcG9uc2VzID09PSAwKSB7XG4gICAgICByZXR1cm4gWydObyByZXNwb25zZXMgdG8gYW5hbHl6ZS4nXVxuICAgIH1cblxuICAgIC8vIENvbnNlbnN1cyBsZXZlbCBpbnNpZ2h0c1xuICAgIGlmIChjb25zZW5zdXNMZXZlbCA+PSA4MCkge1xuICAgICAgaW5zaWdodHMucHVzaChgU3Ryb25nIGNvbnNlbnN1czogJHtjb25zZW5zdXNMZXZlbC50b0ZpeGVkKDEpfSUgb2YgbW9kZWxzIGFncmVlZCBvbiBcIiR7YW5hbHlzaXMudG9wUmVzcG9uc2V9XCIuYClcbiAgICB9IGVsc2UgaWYgKGNvbnNlbnN1c0xldmVsID49IDYwKSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKGBNb2RlcmF0ZSBjb25zZW5zdXM6ICR7Y29uc2Vuc3VzTGV2ZWwudG9GaXhlZCgxKX0lIG9mIG1vZGVscyBhZ3JlZWQgb24gXCIke2FuYWx5c2lzLnRvcFJlc3BvbnNlfVwiLmApXG4gICAgfSBlbHNlIGlmIChjb25zZW5zdXNMZXZlbCA+PSA0MCkge1xuICAgICAgaW5zaWdodHMucHVzaChgV2VhayBjb25zZW5zdXM6IE9ubHkgJHtjb25zZW5zdXNMZXZlbC50b0ZpeGVkKDEpfSUgb2YgbW9kZWxzIGFncmVlZCBvbiBcIiR7YW5hbHlzaXMudG9wUmVzcG9uc2V9XCIuYClcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zaWdodHMucHVzaChgTm8gY2xlYXIgY29uc2Vuc3VzOiBSZXNwb25zZXMgd2VyZSBoaWdobHkgZGl2ZXJzZSB3aXRoIHRoZSB0b3AgcmVzcG9uc2Ugb25seSBnZXR0aW5nICR7Y29uc2Vuc3VzTGV2ZWwudG9GaXhlZCgxKX0lIGFncmVlbWVudC5gKVxuICAgIH1cblxuICAgIC8vIERpdmVyc2l0eSBpbnNpZ2h0c1xuICAgIGlmIChkaXZlcnNpdHkgPj0gMC44KSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKCdWZXJ5IGhpZ2ggZGl2ZXJzaXR5OiBNb3N0IG1vZGVscyBnYXZlIGRpZmZlcmVudCByZXNwb25zZXMuJylcbiAgICB9IGVsc2UgaWYgKGRpdmVyc2l0eSA+PSAwLjYpIHtcbiAgICAgIGluc2lnaHRzLnB1c2goJ0hpZ2ggZGl2ZXJzaXR5OiBNYW55IGRpZmZlcmVudCByZXNwb25zZXMgd2VyZSBnaXZlbi4nKVxuICAgIH0gZWxzZSBpZiAoZGl2ZXJzaXR5ID49IDAuNCkge1xuICAgICAgaW5zaWdodHMucHVzaCgnTW9kZXJhdGUgZGl2ZXJzaXR5OiBTb21lIHZhcmlhdGlvbiBpbiByZXNwb25zZXMuJylcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zaWdodHMucHVzaCgnTG93IGRpdmVyc2l0eTogTW9kZWxzIHRlbmRlZCB0byBnaXZlIHNpbWlsYXIgcmVzcG9uc2VzLicpXG4gICAgfVxuXG4gICAgLy8gR3JvdXAgaW5zaWdodHNcbiAgICBpZiAoZ3JvdXBzLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjb25zdCBzZWNvbmRHcm91cCA9IGdyb3Vwc1sxXVxuICAgICAgY29uc3QgZ2FwID0gZ3JvdXBzWzBdLnBlcmNlbnRhZ2UgLSBzZWNvbmRHcm91cC5wZXJjZW50YWdlXG4gICAgICBcbiAgICAgIGlmIChnYXAgPCAxMCkge1xuICAgICAgICBpbnNpZ2h0cy5wdXNoKGBDbG9zZSBjb21wZXRpdGlvbjogXCIke2dyb3Vwc1swXS5ncm91cE5hbWV9XCIgKCR7Z3JvdXBzWzBdLnBlcmNlbnRhZ2UudG9GaXhlZCgxKX0lKSBiYXJlbHkgZWRnZWQgb3V0IFwiJHtzZWNvbmRHcm91cC5ncm91cE5hbWV9XCIgKCR7c2Vjb25kR3JvdXAucGVyY2VudGFnZS50b0ZpeGVkKDEpfSUpLmApXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJvdmlkZXIgaW5zaWdodHNcbiAgICBpZiAoZ3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRvcEdyb3VwID0gZ3JvdXBzWzBdXG4gICAgICBjb25zdCBwcm92aWRlcnMgPSB0b3BHcm91cC5yZXNwb25zZXMubWFwKHIgPT4gci5tb2RlbD8ucHJvdmlkZXIpLmZpbHRlcihCb29sZWFuKVxuICAgICAgY29uc3QgdW5pcXVlUHJvdmlkZXJzID0gWy4uLm5ldyBTZXQocHJvdmlkZXJzKV1cbiAgICAgIFxuICAgICAgaWYgKHVuaXF1ZVByb3ZpZGVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaW5zaWdodHMucHVzaChgUHJvdmlkZXIgYmlhczogQWxsIG1vZGVscyBhZ3JlZWluZyBvbiBcIiR7dG9wR3JvdXAuZ3JvdXBOYW1lfVwiIHdlcmUgZnJvbSAke3VuaXF1ZVByb3ZpZGVyc1swXX0uYClcbiAgICAgIH0gZWxzZSBpZiAodW5pcXVlUHJvdmlkZXJzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgIGluc2lnaHRzLnB1c2goYENyb3NzLXByb3ZpZGVyIGFncmVlbWVudDogTW9kZWxzIGZyb20gJHt1bmlxdWVQcm92aWRlcnMubGVuZ3RofSBkaWZmZXJlbnQgcHJvdmlkZXJzIGFncmVlZCBvbiBcIiR7dG9wR3JvdXAuZ3JvdXBOYW1lfVwiLmApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluc2lnaHRzXG4gIH1cblxuICAvKipcbiAgICogRXhwb3J0IGNvbnNlbnN1cyBkYXRhIHRvIENTViBmb3JtYXRcbiAgICovXG4gIHN0YXRpYyBleHBvcnRUb0NzdihhbmFseXNpczogQ29uc2Vuc3VzQW5hbHlzaXMsIHByb21wdFRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaGVhZGVycyA9IFsnUmVzcG9uc2UnLCAnQ291bnQnLCAnUGVyY2VudGFnZScsICdNb2RlbHMnXVxuICAgIGNvbnN0IHJvd3MgPSBhbmFseXNpcy5ncm91cHMubWFwKGdyb3VwID0+IFtcbiAgICAgIGBcIiR7Z3JvdXAuZ3JvdXBOYW1lLnJlcGxhY2UoL1wiL2csICdcIlwiJyl9XCJgLFxuICAgICAgZ3JvdXAuY291bnQudG9TdHJpbmcoKSxcbiAgICAgIGdyb3VwLnBlcmNlbnRhZ2UudG9GaXhlZCgxKSxcbiAgICAgIGBcIiR7Z3JvdXAubW9kZWxzLmpvaW4oJywgJykucmVwbGFjZSgvXCIvZywgJ1wiXCInKX1cImBcbiAgICBdKVxuXG4gICAgY29uc3QgY3N2Q29udGVudCA9IFtcbiAgICAgIGAjIExMTSBDb25zZW5zdXMgQW5hbHlzaXNgLFxuICAgICAgYCMgUHJvbXB0OiBcIiR7cHJvbXB0VGV4dC5yZXBsYWNlKC9cIi9nLCAnXCJcIicpfVwiYCxcbiAgICAgIGAjIEdlbmVyYXRlZDogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCxcbiAgICAgIGAjIFRvdGFsIFJlc3BvbnNlczogJHthbmFseXNpcy50b3RhbFJlc3BvbnNlc31gLFxuICAgICAgYCMgQ29uc2Vuc3VzIExldmVsOiAke2FuYWx5c2lzLmNvbnNlbnN1c0xldmVsLnRvRml4ZWQoMSl9JWAsXG4gICAgICBgYCxcbiAgICAgIGhlYWRlcnMuam9pbignLCcpLFxuICAgICAgLi4ucm93cy5tYXAocm93ID0+IHJvdy5qb2luKCcsJykpXG4gICAgXS5qb2luKCdcXG4nKVxuXG4gICAgcmV0dXJuIGNzdkNvbnRlbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzdW1tYXJ5IHN0YXRpc3RpY3NcbiAgICovXG4gIHN0YXRpYyBnZXRTdW1tYXJ5U3RhdHMoYW5hbHlzaXM6IENvbnNlbnN1c0FuYWx5c2lzKToge1xuICAgIHRvdGFsTW9kZWxzOiBudW1iZXJcbiAgICB1bmlxdWVSZXNwb25zZXM6IG51bWJlclxuICAgIGNvbnNlbnN1c0xldmVsOiBudW1iZXJcbiAgICB0b3BSZXNwb25zZTogc3RyaW5nXG4gICAgcmVzcG9uc2VEaXN0cmlidXRpb246IHsgcmVzcG9uc2U6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgcGVyY2VudGFnZTogbnVtYmVyIH1bXVxuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxNb2RlbHM6IGFuYWx5c2lzLnRvdGFsUmVzcG9uc2VzLFxuICAgICAgdW5pcXVlUmVzcG9uc2VzOiBhbmFseXNpcy5ncm91cHMubGVuZ3RoLFxuICAgICAgY29uc2Vuc3VzTGV2ZWw6IGFuYWx5c2lzLmNvbnNlbnN1c0xldmVsLFxuICAgICAgdG9wUmVzcG9uc2U6IGFuYWx5c2lzLnRvcFJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VEaXN0cmlidXRpb246IGFuYWx5c2lzLmdyb3Vwcy5tYXAoZ3JvdXAgPT4gKHtcbiAgICAgICAgcmVzcG9uc2U6IGdyb3VwLmdyb3VwTmFtZSxcbiAgICAgICAgY291bnQ6IGdyb3VwLmNvdW50LFxuICAgICAgICBwZXJjZW50YWdlOiBncm91cC5wZXJjZW50YWdlXG4gICAgICB9KSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgeyBSZXNwb25zZSwgQ29uc2Vuc3VzR3JvdXAsIENvbnNlbnN1c0FuYWx5c2lzIH0iXSwibmFtZXMiOlsiQ29uc2Vuc3VzQW5hbHl6ZXIiLCJTSU1JTEFSSVRZX1RIUkVTSE9MRCIsIkNPTE9SUyIsImFuYWx5emVDb25zZW5zdXMiLCJyZXNwb25zZXMiLCJsZW5ndGgiLCJncm91cHMiLCJ0b3RhbFJlc3BvbnNlcyIsImNvbnNlbnN1c0xldmVsIiwiZGl2ZXJzaXR5IiwidG9wUmVzcG9uc2UiLCJncm91cFNpbWlsYXJSZXNwb25zZXMiLCJzb3J0IiwiYSIsImIiLCJjb3VudCIsImZvckVhY2giLCJncm91cCIsImluZGV4IiwiY29sb3IiLCJncm91cE5hbWUiLCJyZXNwb25zZSIsIm5vcm1hbGl6ZWRUZXh0Iiwibm9ybWFsaXplVGV4dCIsInJlc3BvbnNlX3RleHQiLCJmaW5kIiwiZyIsImNhbGN1bGF0ZVNpbWlsYXJpdHkiLCJwZXJjZW50YWdlIiwibW9kZWxzIiwicHVzaCIsIm1vZGVsIiwibmFtZSIsInRvdGFsIiwidGV4dCIsInRvTG93ZXJDYXNlIiwidHJpbSIsInJlcGxhY2UiLCJ0ZXh0MSIsInRleHQyIiwibm9ybWFsaXplZDEiLCJub3JtYWxpemVkMiIsImRpc3RhbmNlIiwibGV2ZW5zaHRlaW5EaXN0YW5jZSIsIm1heExlbmd0aCIsIk1hdGgiLCJtYXgiLCJzdHIxIiwic3RyMiIsIm1hdHJpeCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImkiLCJqIiwiaW5kaWNhdG9yIiwibWluIiwiZ2VuZXJhdGVJbnNpZ2h0cyIsImFuYWx5c2lzIiwiaW5zaWdodHMiLCJ0b0ZpeGVkIiwic2Vjb25kR3JvdXAiLCJnYXAiLCJ0b3BHcm91cCIsInByb3ZpZGVycyIsInIiLCJwcm92aWRlciIsImZpbHRlciIsIkJvb2xlYW4iLCJ1bmlxdWVQcm92aWRlcnMiLCJTZXQiLCJleHBvcnRUb0NzdiIsInByb21wdFRleHQiLCJoZWFkZXJzIiwicm93cyIsInRvU3RyaW5nIiwiam9pbiIsImNzdkNvbnRlbnQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyb3ciLCJnZXRTdW1tYXJ5U3RhdHMiLCJ0b3RhbE1vZGVscyIsInVuaXF1ZVJlc3BvbnNlcyIsInJlc3BvbnNlRGlzdHJpYnV0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/consensus-analyzer.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SupabaseClient: () => (/* binding */ SupabaseClient),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseClient: () => (/* binding */ supabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://rhwjusutkkwxypbqaoph.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJod2p1c3V0a2t3eHlwYnFhb3BoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4ODEzNjAsImV4cCI6MjA2MzQ1NzM2MH0.4cYuDuaZyxfG7T1lkkiLttDehiYg9LdWKwEq1tPLkXM\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Supabase client with enhanced error handling\nclass SupabaseClient {\n    async getModels() {\n        try {\n            const { data, error } = await this.client.from(\"models\").select(\"*\").order(\"provider\", {\n                ascending: true\n            }).order(\"name\", {\n                ascending: true\n            });\n            if (error) {\n                throw new Error(`Failed to fetch models: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error fetching models:\", error);\n            throw error;\n        }\n    }\n    async updateModelEnabled(id, enabled) {\n        try {\n            const { data, error } = await this.client.from(\"models\").update({\n                enabled,\n                updated_at: new Date().toISOString()\n            }).eq(\"id\", id).select().single();\n            if (error) {\n                throw new Error(`Failed to update model: ${error.message}`);\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error updating model:\", error);\n            throw error;\n        }\n    }\n    async upsertModels(models) {\n        try {\n            const { data, error } = await this.client.from(\"models\").upsert(models, {\n                onConflict: \"model_id\"\n            }).select();\n            if (error) {\n                throw new Error(`Failed to upsert models: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error upserting models:\", error);\n            throw error;\n        }\n    }\n    async savePrompt(text) {\n        try {\n            const { data, error } = await this.client.from(\"prompts\").insert({\n                text\n            }).select().single();\n            if (error) {\n                throw new Error(`Failed to save prompt: ${error.message}`);\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error saving prompt:\", error);\n            throw error;\n        }\n    }\n    async saveResponses(responses) {\n        try {\n            const { data, error } = await this.client.from(\"responses\").insert(responses).select(`\n          *,\n          model:models(*)\n        `);\n            if (error) {\n                throw new Error(`Failed to save responses: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error saving responses:\", error);\n            throw error;\n        }\n    }\n    async saveConsensusGroups(groups) {\n        try {\n            const { data, error } = await this.client.from(\"consensus_groups\").insert(groups).select();\n            if (error) {\n                throw new Error(`Failed to save consensus groups: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error saving consensus groups:\", error);\n            throw error;\n        }\n    }\n    async getPromptHistory(limit = 50) {\n        try {\n            const { data, error } = await this.client.from(\"prompts\").select(\"*\").order(\"created_at\", {\n                ascending: false\n            }).limit(limit);\n            if (error) {\n                throw new Error(`Failed to fetch prompt history: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error fetching prompt history:\", error);\n            throw error;\n        }\n    }\n    async getPromptWithResults(promptId) {\n        try {\n            const [promptResult, responsesResult, consensusResult] = await Promise.all([\n                this.client.from(\"prompts\").select(\"*\").eq(\"id\", promptId).single(),\n                this.client.from(\"responses\").select(`\n          *,\n          model:models(*)\n        `).eq(\"prompt_id\", promptId),\n                this.client.from(\"consensus_groups\").select(\"*\").eq(\"prompt_id\", promptId)\n            ]);\n            if (promptResult.error) {\n                throw new Error(`Failed to fetch prompt: ${promptResult.error.message}`);\n            }\n            return {\n                prompt: promptResult.data,\n                responses: responsesResult.data || [],\n                consensusGroups: consensusResult.data || []\n            };\n        } catch (error) {\n            console.error(\"Error fetching prompt with results:\", error);\n            throw error;\n        }\n    }\n    constructor(){\n        this.client = supabase;\n    }\n}\nconst supabaseClient = new SupabaseClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YXNlLnRzP2M5OWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCFcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxuXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpXG59XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG4vLyBEYXRhYmFzZSB0eXBlc1xuZXhwb3J0IGludGVyZmFjZSBNb2RlbCB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIHByb3ZpZGVyOiBzdHJpbmdcbiAgbW9kZWxfaWQ6IHN0cmluZ1xuICBlbmFibGVkOiBib29sZWFuXG4gIGNvbnRleHRfbGVuZ3RoOiBudW1iZXJcbiAgY3JlYXRlZF9hdD86IHN0cmluZ1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvbXB0IHtcbiAgaWQ6IHN0cmluZ1xuICB0ZXh0OiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG4gIHVwZGF0ZWRfYXQ/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZSB7XG4gIGlkOiBzdHJpbmdcbiAgcHJvbXB0X2lkOiBzdHJpbmdcbiAgbW9kZWxfaWQ6IHN0cmluZ1xuICByZXNwb25zZV90ZXh0OiBzdHJpbmdcbiAgcmVzcG9uc2VfdGltZV9tczogbnVtYmVyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xuICBtb2RlbD86IE1vZGVsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2Vuc3VzR3JvdXAge1xuICBpZDogc3RyaW5nXG4gIHByb21wdF9pZDogc3RyaW5nXG4gIGdyb3VwX25hbWU6IHN0cmluZ1xuICBjb3VudDogbnVtYmVyXG4gIHBlcmNlbnRhZ2U6IG51bWJlclxuICBjb2xvcjogc3RyaW5nXG4gIG1vZGVscz86IHN0cmluZ1tdICAvLyBPcHRpb25hbCBzaW5jZSBkYXRhYmFzZSBkb2Vzbid0IGhhdmUgdGhpcyBjb2x1bW4geWV0XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xufVxuXG4vLyBTdXBhYmFzZSBjbGllbnQgd2l0aCBlbmhhbmNlZCBlcnJvciBoYW5kbGluZ1xuZXhwb3J0IGNsYXNzIFN1cGFiYXNlQ2xpZW50IHtcbiAgcHJpdmF0ZSBjbGllbnQgPSBzdXBhYmFzZVxuXG4gIGFzeW5jIGdldE1vZGVscygpOiBQcm9taXNlPE1vZGVsW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnRcbiAgICAgICAgLmZyb20oJ21vZGVscycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAub3JkZXIoJ3Byb3ZpZGVyJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICAgICAgLm9yZGVyKCduYW1lJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIG1vZGVsczogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1vZGVsczonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlTW9kZWxFbmFibGVkKGlkOiBzdHJpbmcsIGVuYWJsZWQ6IGJvb2xlYW4pOiBQcm9taXNlPE1vZGVsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuY2xpZW50XG4gICAgICAgIC5mcm9tKCdtb2RlbHMnKVxuICAgICAgICAudXBkYXRlKHsgZW5hYmxlZCwgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pXG4gICAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIG1vZGVsOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgbW9kZWw6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwc2VydE1vZGVscyhtb2RlbHM6IE9taXQ8TW9kZWwsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+W10pOiBQcm9taXNlPE1vZGVsW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnRcbiAgICAgICAgLmZyb20oJ21vZGVscycpXG4gICAgICAgIC51cHNlcnQobW9kZWxzLCB7IG9uQ29uZmxpY3Q6ICdtb2RlbF9pZCcgfSlcbiAgICAgICAgLnNlbGVjdCgpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cHNlcnQgbW9kZWxzOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEgfHwgW11cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBzZXJ0aW5nIG1vZGVsczonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZVByb21wdCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPFByb21wdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLmNsaWVudFxuICAgICAgICAuZnJvbSgncHJvbXB0cycpXG4gICAgICAgIC5pbnNlcnQoeyB0ZXh0IH0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNhdmUgcHJvbXB0OiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHByb21wdDonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZVJlc3BvbnNlcyhyZXNwb25zZXM6IE9taXQ8UmVzcG9uc2UsICdpZCcgfCAnY3JlYXRlZF9hdCc+W10pOiBQcm9taXNlPFJlc3BvbnNlW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnRcbiAgICAgICAgLmZyb20oJ3Jlc3BvbnNlcycpXG4gICAgICAgIC5pbnNlcnQocmVzcG9uc2VzKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIG1vZGVsOm1vZGVscygqKVxuICAgICAgICBgKVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2F2ZSByZXNwb25zZXM6ICR7ZXJyb3IubWVzc2FnZX1gKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YSB8fCBbXVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgcmVzcG9uc2VzOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlQ29uc2Vuc3VzR3JvdXBzKGdyb3VwczogT21pdDxDb25zZW5zdXNHcm91cCwgJ2lkJyB8ICdjcmVhdGVkX2F0Jz5bXSk6IFByb21pc2U8Q29uc2Vuc3VzR3JvdXBbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLmNsaWVudFxuICAgICAgICAuZnJvbSgnY29uc2Vuc3VzX2dyb3VwcycpXG4gICAgICAgIC5pbnNlcnQoZ3JvdXBzKVxuICAgICAgICAuc2VsZWN0KClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNhdmUgY29uc2Vuc3VzIGdyb3VwczogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBjb25zZW5zdXMgZ3JvdXBzOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9tcHRIaXN0b3J5KGxpbWl0ID0gNTApOiBQcm9taXNlPFByb21wdFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuY2xpZW50XG4gICAgICAgIC5mcm9tKCdwcm9tcHRzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICAubGltaXQobGltaXQpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBwcm9tcHQgaGlzdG9yeTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb21wdCBoaXN0b3J5OicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9tcHRXaXRoUmVzdWx0cyhwcm9tcHRJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgcHJvbXB0OiBQcm9tcHRcbiAgICByZXNwb25zZXM6IFJlc3BvbnNlW11cbiAgICBjb25zZW5zdXNHcm91cHM6IENvbnNlbnN1c0dyb3VwW11cbiAgfSB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW3Byb21wdFJlc3VsdCwgcmVzcG9uc2VzUmVzdWx0LCBjb25zZW5zdXNSZXN1bHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLmNsaWVudC5mcm9tKCdwcm9tcHRzJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgcHJvbXB0SWQpLnNpbmdsZSgpLFxuICAgICAgICB0aGlzLmNsaWVudC5mcm9tKCdyZXNwb25zZXMnKS5zZWxlY3QoYFxuICAgICAgICAgICosXG4gICAgICAgICAgbW9kZWw6bW9kZWxzKCopXG4gICAgICAgIGApLmVxKCdwcm9tcHRfaWQnLCBwcm9tcHRJZCksXG4gICAgICAgIHRoaXMuY2xpZW50LmZyb20oJ2NvbnNlbnN1c19ncm91cHMnKS5zZWxlY3QoJyonKS5lcSgncHJvbXB0X2lkJywgcHJvbXB0SWQpXG4gICAgICBdKVxuXG4gICAgICBpZiAocHJvbXB0UmVzdWx0LmVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHByb21wdDogJHtwcm9tcHRSZXN1bHQuZXJyb3IubWVzc2FnZX1gKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcm9tcHQ6IHByb21wdFJlc3VsdC5kYXRhLFxuICAgICAgICByZXNwb25zZXM6IHJlc3BvbnNlc1Jlc3VsdC5kYXRhIHx8IFtdLFxuICAgICAgICBjb25zZW5zdXNHcm91cHM6IGNvbnNlbnN1c1Jlc3VsdC5kYXRhIHx8IFtdXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb21wdCB3aXRoIHJlc3VsdHM6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VDbGllbnQgPSBuZXcgU3VwYWJhc2VDbGllbnQoKSJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJTdXBhYmFzZUNsaWVudCIsImdldE1vZGVscyIsImRhdGEiLCJlcnJvciIsImNsaWVudCIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImFzY2VuZGluZyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwidXBkYXRlTW9kZWxFbmFibGVkIiwiaWQiLCJlbmFibGVkIiwidXBkYXRlIiwidXBkYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVxIiwic2luZ2xlIiwidXBzZXJ0TW9kZWxzIiwibW9kZWxzIiwidXBzZXJ0Iiwib25Db25mbGljdCIsInNhdmVQcm9tcHQiLCJ0ZXh0IiwiaW5zZXJ0Iiwic2F2ZVJlc3BvbnNlcyIsInJlc3BvbnNlcyIsInNhdmVDb25zZW5zdXNHcm91cHMiLCJncm91cHMiLCJnZXRQcm9tcHRIaXN0b3J5IiwibGltaXQiLCJnZXRQcm9tcHRXaXRoUmVzdWx0cyIsInByb21wdElkIiwicHJvbXB0UmVzdWx0IiwicmVzcG9uc2VzUmVzdWx0IiwiY29uc2Vuc3VzUmVzdWx0IiwiUHJvbWlzZSIsImFsbCIsInByb21wdCIsImNvbnNlbnN1c0dyb3VwcyIsInN1cGFiYXNlQ2xpZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./lib/vercel-ai-gateway.ts":
/*!**********************************!*\
  !*** ./lib/vercel-ai-gateway.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VercelAIGatewayClient: () => (/* binding */ VercelAIGatewayClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n\nclass VercelAIGatewayClient {\n    constructor(apiKey){\n        this.apiKey = apiKey;\n    }\n    async getModels() {\n        try {\n            // Check if API key is provided\n            if (!this.apiKey || this.apiKey.trim() === \"\") {\n                console.warn(\"No Vercel AI Gateway API key provided, using predefined models\");\n                return {\n                    data: VercelAIGatewayClient.getPredefinedModels()\n                };\n            }\n            // For now, return predefined models since the AI Gateway doesn't expose a models endpoint directly\n            // according to the documentation\n            console.log(\"Using predefined models for Vercel AI Gateway\");\n            return {\n                data: VercelAIGatewayClient.getPredefinedModels()\n            };\n        } catch (error) {\n            console.error(\"Error with Vercel AI Gateway:\", error);\n            console.log(\"Falling back to predefined models\");\n            return {\n                data: VercelAIGatewayClient.getPredefinedModels()\n            };\n        }\n    }\n    async getCompletion(modelId, prompt, options = {}) {\n        const startTime = Date.now();\n        const { temperature = 0.7, systemPrompt = \"You are a helpful assistant. Please provide a clear, concise response to the user's question.\", timeout = 30000 } = options;\n        try {\n            // Check if API key is provided\n            if (!this.apiKey || this.apiKey.trim() === \"\") {\n                throw new Error(\"Vercel AI Gateway API key is required\");\n            }\n            // Set the environment variable for the AI SDK to use\n            process.env.AI_GATEWAY_API_KEY = this.apiKey;\n            // Use the AI SDK directly with the model ID\n            // According to the documentation, the AI Gateway provider will default to using AI_GATEWAY_API_KEY\n            const result = await (0,ai__WEBPACK_IMPORTED_MODULE_0__.generateText)({\n                model: modelId,\n                system: systemPrompt,\n                prompt: prompt,\n                temperature: temperature,\n                maxRetries: 3,\n                abortSignal: AbortSignal.timeout(timeout)\n            });\n            const endTime = Date.now();\n            return {\n                text: result.text,\n                timeMs: endTime - startTime,\n                usage: result.usage\n            };\n        } catch (error) {\n            const endTime = Date.now();\n            if (error instanceof Error && error.name === \"AbortError\") {\n                throw new Error(`Request timeout after ${timeout}ms`);\n            }\n            console.error(`Error getting completion from ${modelId}:`, error);\n            throw new Error(`Failed to get completion: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    async batchCompletion(modelIds, prompt, options = {}) {\n        const { concurrency = 5 } = options;\n        // Process requests in batches to avoid overwhelming the API\n        const results = [];\n        for(let i = 0; i < modelIds.length; i += concurrency){\n            const batch = modelIds.slice(i, i + concurrency);\n            const batchPromises = batch.map(async (modelId)=>{\n                try {\n                    const result = await this.getCompletion(modelId, prompt, options);\n                    return {\n                        modelId,\n                        result\n                    };\n                } catch (error) {\n                    console.error(`Error for model ${modelId}:`, error);\n                    return {\n                        modelId,\n                        error: error instanceof Error ? error.message : \"Unknown error\"\n                    };\n                }\n            });\n            const batchResults = await Promise.all(batchPromises);\n            results.push(...batchResults);\n            // Small delay between batches to be respectful to the API\n            if (i + concurrency < modelIds.length) {\n                await new Promise((resolve)=>setTimeout(resolve, 100));\n            }\n        }\n        return results;\n    }\n    // Helper method to extract provider from model ID\n    extractProvider(modelId) {\n        const [provider] = modelId.split(\"/\");\n        return provider.charAt(0).toUpperCase() + provider.slice(1);\n    }\n    // Utility method to filter and select models for benchmarking\n    static filterModelsForBenchmark(models) {\n        return models.filter((model)=>{\n            const modelId = model.id.toLowerCase();\n            // Exclude free, vision, and preview models\n            return !modelId.includes(\":free\") && !modelId.includes(\"vision\") && !modelId.includes(\"preview\") && !modelId.includes(\"beta\") && model.context_length >= 2000 // Ensure reasonable context length\n            ;\n        });\n    }\n    // Get recommended models for quick setup\n    static getRecommendedModelIds() {\n        return [\n            \"openai/gpt-4o\",\n            \"anthropic/claude-3-5-sonnet\",\n            \"google/gemini-pro-1.5\",\n            \"meta-llama/llama-3.1-70b-instruct\",\n            \"mistralai/mistral-large\",\n            \"cohere/command-r-plus\"\n        ];\n    }\n    // Get predefined models list (since Vercel AI Gateway doesn't have a models endpoint)\n    static getPredefinedModels() {\n        return [\n            {\n                id: \"openai/gpt-4o\",\n                name: \"GPT-4o\",\n                provider: \"OpenAI\",\n                context_length: 128000,\n                description: \"Most capable GPT-4 model\"\n            },\n            {\n                id: \"openai/gpt-4o-mini\",\n                name: \"GPT-4o Mini\",\n                provider: \"OpenAI\",\n                context_length: 128000,\n                description: \"Faster and cheaper GPT-4o model\"\n            },\n            {\n                id: \"openai/gpt-3.5-turbo\",\n                name: \"GPT-3.5 Turbo\",\n                provider: \"OpenAI\",\n                context_length: 16385,\n                description: \"Fast and efficient model\"\n            },\n            {\n                id: \"anthropic/claude-3-5-sonnet\",\n                name: \"Claude 3.5 Sonnet\",\n                provider: \"Anthropic\",\n                context_length: 200000,\n                description: \"Most intelligent Claude model\"\n            },\n            {\n                id: \"anthropic/claude-3-haiku\",\n                name: \"Claude 3 Haiku\",\n                provider: \"Anthropic\",\n                context_length: 200000,\n                description: \"Fastest Claude model\"\n            },\n            {\n                id: \"google/gemini-1.5-pro\",\n                name: \"Gemini 1.5 Pro\",\n                provider: \"Google\",\n                context_length: 2000000,\n                description: \"Google's most capable model\"\n            },\n            {\n                id: \"google/gemini-1.5-flash\",\n                name: \"Gemini 1.5 Flash\",\n                provider: \"Google\",\n                context_length: 1000000,\n                description: \"Fast and efficient Gemini model\"\n            },\n            {\n                id: \"meta-llama/llama-3.1-70b-instruct\",\n                name: \"Llama 3.1 70B\",\n                provider: \"Meta\",\n                context_length: 131072,\n                description: \"Meta's large language model\"\n            },\n            {\n                id: \"meta-llama/llama-3.1-8b-instruct\",\n                name: \"Llama 3.1 8B\",\n                provider: \"Meta\",\n                context_length: 131072,\n                description: \"Smaller, faster Llama model\"\n            },\n            {\n                id: \"mistralai/mistral-large\",\n                name: \"Mistral Large\",\n                provider: \"Mistral AI\",\n                context_length: 128000,\n                description: \"Mistral's most capable model\"\n            },\n            {\n                id: \"mistralai/mistral-small\",\n                name: \"Mistral Small\",\n                provider: \"Mistral AI\",\n                context_length: 32000,\n                description: \"Efficient Mistral model\"\n            },\n            {\n                id: \"cohere/command-r-plus\",\n                name: \"Command R+\",\n                provider: \"Cohere\",\n                context_length: 128000,\n                description: \"Cohere's advanced model\"\n            }\n        ];\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VercelAIGatewayClient);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDRUwsSUFBSTtnQkFDSjFCLE1BQU07Z0JBQ05tQixVQUFVO2dCQUNWVSxnQkFBZ0I7Z0JBQ2hCRSxhQUFhO1lBQ2Y7WUFDQTtnQkFDRUwsSUFBSTtnQkFDSjFCLE1BQU07Z0JBQ05tQixVQUFVO2dCQUNWVSxnQkFBZ0I7Z0JBQ2hCRSxhQUFhO1lBQ2Y7U0FDRDtJQUNIO0FBQ0Y7QUFFQSxpRUFBZWxFLHFCQUFxQkEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xsbS1jb25zZW5zdXMtYmVuY2htYXJrLW5leHRqcy8uL2xpYi92ZXJjZWwtYWktZ2F0ZXdheS50cz9iMWEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlVGV4dCB9IGZyb20gJ2FpJ1xuXG5pbnRlcmZhY2UgVmVyY2VsQUlNb2RlbCB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIGNvbnRleHRfbGVuZ3RoOiBudW1iZXJcbiAgcHJpY2luZz86IHtcbiAgICBwcm9tcHQ6IHN0cmluZ1xuICAgIGNvbXBsZXRpb246IHN0cmluZ1xuICB9XG4gIHByb3ZpZGVyOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFZlcmNlbEFJUmVzcG9uc2Uge1xuICBkYXRhOiBWZXJjZWxBSU1vZGVsW11cbn1cblxuZXhwb3J0IGNsYXNzIFZlcmNlbEFJR2F0ZXdheUNsaWVudCB7XG4gIHByaXZhdGUgYXBpS2V5OiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZykge1xuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5XG4gIH1cblxuICBhc3luYyBnZXRNb2RlbHMoKTogUHJvbWlzZTxWZXJjZWxBSVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIEFQSSBrZXkgaXMgcHJvdmlkZWRcbiAgICAgIGlmICghdGhpcy5hcGlLZXkgfHwgdGhpcy5hcGlLZXkudHJpbSgpID09PSAnJykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ05vIFZlcmNlbCBBSSBHYXRld2F5IEFQSSBrZXkgcHJvdmlkZWQsIHVzaW5nIHByZWRlZmluZWQgbW9kZWxzJylcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXRhOiBWZXJjZWxBSUdhdGV3YXlDbGllbnQuZ2V0UHJlZGVmaW5lZE1vZGVscygpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRm9yIG5vdywgcmV0dXJuIHByZWRlZmluZWQgbW9kZWxzIHNpbmNlIHRoZSBBSSBHYXRld2F5IGRvZXNuJ3QgZXhwb3NlIGEgbW9kZWxzIGVuZHBvaW50IGRpcmVjdGx5XG4gICAgICAvLyBhY2NvcmRpbmcgdG8gdGhlIGRvY3VtZW50YXRpb25cbiAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBwcmVkZWZpbmVkIG1vZGVscyBmb3IgVmVyY2VsIEFJIEdhdGV3YXknKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogVmVyY2VsQUlHYXRld2F5Q2xpZW50LmdldFByZWRlZmluZWRNb2RlbHMoKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aXRoIFZlcmNlbCBBSSBHYXRld2F5OicsIGVycm9yKVxuICAgICAgY29uc29sZS5sb2coJ0ZhbGxpbmcgYmFjayB0byBwcmVkZWZpbmVkIG1vZGVscycpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBWZXJjZWxBSUdhdGV3YXlDbGllbnQuZ2V0UHJlZGVmaW5lZE1vZGVscygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0Q29tcGxldGlvbihcbiAgICBtb2RlbElkOiBzdHJpbmcsIFxuICAgIHByb21wdDogc3RyaW5nLCBcbiAgICBvcHRpb25zOiB7XG4gICAgICBtYXhUb2tlbnM/OiBudW1iZXJcbiAgICAgIHRlbXBlcmF0dXJlPzogbnVtYmVyXG4gICAgICBzeXN0ZW1Qcm9tcHQ/OiBzdHJpbmdcbiAgICAgIHRpbWVvdXQ/OiBudW1iZXJcbiAgICB9ID0ge31cbiAgKTogUHJvbWlzZTx7IHRleHQ6IHN0cmluZzsgdGltZU1zOiBudW1iZXI7IHVzYWdlPzogYW55IH0+IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgXG4gICAgY29uc3Qge1xuICAgICAgdGVtcGVyYXR1cmUgPSAwLjcsXG4gICAgICBzeXN0ZW1Qcm9tcHQgPSAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LiBQbGVhc2UgcHJvdmlkZSBhIGNsZWFyLCBjb25jaXNlIHJlc3BvbnNlIHRvIHRoZSB1c2VyXFwncyBxdWVzdGlvbi4nLFxuICAgICAgdGltZW91dCA9IDMwMDAwXG4gICAgfSA9IG9wdGlvbnNcblxuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBBUEkga2V5IGlzIHByb3ZpZGVkXG4gICAgICBpZiAoIXRoaXMuYXBpS2V5IHx8IHRoaXMuYXBpS2V5LnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWZXJjZWwgQUkgR2F0ZXdheSBBUEkga2V5IGlzIHJlcXVpcmVkJylcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBmb3IgdGhlIEFJIFNESyB0byB1c2VcbiAgICAgIHByb2Nlc3MuZW52LkFJX0dBVEVXQVlfQVBJX0tFWSA9IHRoaXMuYXBpS2V5XG5cbiAgICAgIC8vIFVzZSB0aGUgQUkgU0RLIGRpcmVjdGx5IHdpdGggdGhlIG1vZGVsIElEXG4gICAgICAvLyBBY2NvcmRpbmcgdG8gdGhlIGRvY3VtZW50YXRpb24sIHRoZSBBSSBHYXRld2F5IHByb3ZpZGVyIHdpbGwgZGVmYXVsdCB0byB1c2luZyBBSV9HQVRFV0FZX0FQSV9LRVlcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbmVyYXRlVGV4dCh7XG4gICAgICAgIG1vZGVsOiBtb2RlbElkLCAvLyBVc2UgdGhlIG1vZGVsIElEIGRpcmVjdGx5IChlLmcuLCAnb3BlbmFpL2dwdC00bycpXG4gICAgICAgIHN5c3RlbTogc3lzdGVtUHJvbXB0LFxuICAgICAgICBwcm9tcHQ6IHByb21wdCxcbiAgICAgICAgdGVtcGVyYXR1cmU6IHRlbXBlcmF0dXJlLFxuICAgICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgICBhYm9ydFNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aW1lb3V0KSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpXG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IHJlc3VsdC50ZXh0LFxuICAgICAgICB0aW1lTXM6IGVuZFRpbWUgLSBzdGFydFRpbWUsXG4gICAgICAgIHVzYWdlOiByZXN1bHQudXNhZ2VcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KClcbiAgICAgIFxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVxdWVzdCB0aW1lb3V0IGFmdGVyICR7dGltZW91dH1tc2ApXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGdldHRpbmcgY29tcGxldGlvbiBmcm9tICR7bW9kZWxJZH06YCwgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgY29tcGxldGlvbjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGJhdGNoQ29tcGxldGlvbihcbiAgICBtb2RlbElkczogc3RyaW5nW10sIFxuICAgIHByb21wdDogc3RyaW5nLCBcbiAgICBvcHRpb25zOiB7XG4gICAgICBtYXhUb2tlbnM/OiBudW1iZXJcbiAgICAgIHRlbXBlcmF0dXJlPzogbnVtYmVyXG4gICAgICBzeXN0ZW1Qcm9tcHQ/OiBzdHJpbmdcbiAgICAgIHRpbWVvdXQ/OiBudW1iZXJcbiAgICAgIGNvbmN1cnJlbmN5PzogbnVtYmVyXG4gICAgfSA9IHt9XG4gICk6IFByb21pc2U8QXJyYXk8eyBtb2RlbElkOiBzdHJpbmc7IHJlc3VsdD86IHsgdGV4dDogc3RyaW5nOyB0aW1lTXM6IG51bWJlcjsgdXNhZ2U/OiBhbnkgfTsgZXJyb3I/OiBzdHJpbmcgfT4+IHtcbiAgICBjb25zdCB7IGNvbmN1cnJlbmN5ID0gNSB9ID0gb3B0aW9uc1xuICAgIFxuICAgIC8vIFByb2Nlc3MgcmVxdWVzdHMgaW4gYmF0Y2hlcyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgIGNvbnN0IHJlc3VsdHM6IEFycmF5PHsgbW9kZWxJZDogc3RyaW5nOyByZXN1bHQ/OiB7IHRleHQ6IHN0cmluZzsgdGltZU1zOiBudW1iZXI7IHVzYWdlPzogYW55IH07IGVycm9yPzogc3RyaW5nIH0+ID0gW11cbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZGVsSWRzLmxlbmd0aDsgaSArPSBjb25jdXJyZW5jeSkge1xuICAgICAgY29uc3QgYmF0Y2ggPSBtb2RlbElkcy5zbGljZShpLCBpICsgY29uY3VycmVuY3kpXG4gICAgICBcbiAgICAgIGNvbnN0IGJhdGNoUHJvbWlzZXMgPSBiYXRjaC5tYXAoYXN5bmMgKG1vZGVsSWQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdldENvbXBsZXRpb24obW9kZWxJZCwgcHJvbXB0LCBvcHRpb25zKVxuICAgICAgICAgIHJldHVybiB7IG1vZGVsSWQsIHJlc3VsdCB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZm9yIG1vZGVsICR7bW9kZWxJZH06YCwgZXJyb3IpXG4gICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBtb2RlbElkLCBcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgYmF0Y2hSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoYmF0Y2hQcm9taXNlcylcbiAgICAgIHJlc3VsdHMucHVzaCguLi5iYXRjaFJlc3VsdHMpXG4gICAgICBcbiAgICAgIC8vIFNtYWxsIGRlbGF5IGJldHdlZW4gYmF0Y2hlcyB0byBiZSByZXNwZWN0ZnVsIHRvIHRoZSBBUElcbiAgICAgIGlmIChpICsgY29uY3VycmVuY3kgPCBtb2RlbElkcy5sZW5ndGgpIHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kIHRvIGV4dHJhY3QgcHJvdmlkZXIgZnJvbSBtb2RlbCBJRFxuICBwcml2YXRlIGV4dHJhY3RQcm92aWRlcihtb2RlbElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IFtwcm92aWRlcl0gPSBtb2RlbElkLnNwbGl0KCcvJylcbiAgICByZXR1cm4gcHJvdmlkZXIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm92aWRlci5zbGljZSgxKVxuICB9XG5cbiAgLy8gVXRpbGl0eSBtZXRob2QgdG8gZmlsdGVyIGFuZCBzZWxlY3QgbW9kZWxzIGZvciBiZW5jaG1hcmtpbmdcbiAgc3RhdGljIGZpbHRlck1vZGVsc0ZvckJlbmNobWFyayhtb2RlbHM6IFZlcmNlbEFJTW9kZWxbXSk6IFZlcmNlbEFJTW9kZWxbXSB7XG4gICAgcmV0dXJuIG1vZGVscy5maWx0ZXIobW9kZWwgPT4ge1xuICAgICAgY29uc3QgbW9kZWxJZCA9IG1vZGVsLmlkLnRvTG93ZXJDYXNlKClcbiAgICAgIFxuICAgICAgLy8gRXhjbHVkZSBmcmVlLCB2aXNpb24sIGFuZCBwcmV2aWV3IG1vZGVsc1xuICAgICAgcmV0dXJuICFtb2RlbElkLmluY2x1ZGVzKCc6ZnJlZScpICYmIFxuICAgICAgICAgICAgICFtb2RlbElkLmluY2x1ZGVzKCd2aXNpb24nKSAmJiBcbiAgICAgICAgICAgICAhbW9kZWxJZC5pbmNsdWRlcygncHJldmlldycpICYmXG4gICAgICAgICAgICAgIW1vZGVsSWQuaW5jbHVkZXMoJ2JldGEnKSAmJlxuICAgICAgICAgICAgIG1vZGVsLmNvbnRleHRfbGVuZ3RoID49IDIwMDAgLy8gRW5zdXJlIHJlYXNvbmFibGUgY29udGV4dCBsZW5ndGhcbiAgICB9KVxuICB9XG5cbiAgLy8gR2V0IHJlY29tbWVuZGVkIG1vZGVscyBmb3IgcXVpY2sgc2V0dXBcbiAgc3RhdGljIGdldFJlY29tbWVuZGVkTW9kZWxJZHMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBbXG4gICAgICAnb3BlbmFpL2dwdC00bycsXG4gICAgICAnYW50aHJvcGljL2NsYXVkZS0zLTUtc29ubmV0JyxcbiAgICAgICdnb29nbGUvZ2VtaW5pLXByby0xLjUnLFxuICAgICAgJ21ldGEtbGxhbWEvbGxhbWEtMy4xLTcwYi1pbnN0cnVjdCcsXG4gICAgICAnbWlzdHJhbGFpL21pc3RyYWwtbGFyZ2UnLFxuICAgICAgJ2NvaGVyZS9jb21tYW5kLXItcGx1cydcbiAgICBdXG4gIH1cblxuICAvLyBHZXQgcHJlZGVmaW5lZCBtb2RlbHMgbGlzdCAoc2luY2UgVmVyY2VsIEFJIEdhdGV3YXkgZG9lc24ndCBoYXZlIGEgbW9kZWxzIGVuZHBvaW50KVxuICBzdGF0aWMgZ2V0UHJlZGVmaW5lZE1vZGVscygpOiBWZXJjZWxBSU1vZGVsW10ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnb3BlbmFpL2dwdC00bycsXG4gICAgICAgIG5hbWU6ICdHUFQtNG8nLFxuICAgICAgICBwcm92aWRlcjogJ09wZW5BSScsXG4gICAgICAgIGNvbnRleHRfbGVuZ3RoOiAxMjgwMDAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTW9zdCBjYXBhYmxlIEdQVC00IG1vZGVsJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdvcGVuYWkvZ3B0LTRvLW1pbmknLFxuICAgICAgICBuYW1lOiAnR1BULTRvIE1pbmknLFxuICAgICAgICBwcm92aWRlcjogJ09wZW5BSScsXG4gICAgICAgIGNvbnRleHRfbGVuZ3RoOiAxMjgwMDAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRmFzdGVyIGFuZCBjaGVhcGVyIEdQVC00byBtb2RlbCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnb3BlbmFpL2dwdC0zLjUtdHVyYm8nLFxuICAgICAgICBuYW1lOiAnR1BULTMuNSBUdXJibycsXG4gICAgICAgIHByb3ZpZGVyOiAnT3BlbkFJJyxcbiAgICAgICAgY29udGV4dF9sZW5ndGg6IDE2Mzg1LFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Zhc3QgYW5kIGVmZmljaWVudCBtb2RlbCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnYW50aHJvcGljL2NsYXVkZS0zLTUtc29ubmV0JyxcbiAgICAgICAgbmFtZTogJ0NsYXVkZSAzLjUgU29ubmV0JyxcbiAgICAgICAgcHJvdmlkZXI6ICdBbnRocm9waWMnLFxuICAgICAgICBjb250ZXh0X2xlbmd0aDogMjAwMDAwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ01vc3QgaW50ZWxsaWdlbnQgQ2xhdWRlIG1vZGVsJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdhbnRocm9waWMvY2xhdWRlLTMtaGFpa3UnLFxuICAgICAgICBuYW1lOiAnQ2xhdWRlIDMgSGFpa3UnLFxuICAgICAgICBwcm92aWRlcjogJ0FudGhyb3BpYycsXG4gICAgICAgIGNvbnRleHRfbGVuZ3RoOiAyMDAwMDAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRmFzdGVzdCBDbGF1ZGUgbW9kZWwnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ2dvb2dsZS9nZW1pbmktMS41LXBybycsXG4gICAgICAgIG5hbWU6ICdHZW1pbmkgMS41IFBybycsXG4gICAgICAgIHByb3ZpZGVyOiAnR29vZ2xlJyxcbiAgICAgICAgY29udGV4dF9sZW5ndGg6IDIwMDAwMDAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnR29vZ2xlXFwncyBtb3N0IGNhcGFibGUgbW9kZWwnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ2dvb2dsZS9nZW1pbmktMS41LWZsYXNoJyxcbiAgICAgICAgbmFtZTogJ0dlbWluaSAxLjUgRmxhc2gnLFxuICAgICAgICBwcm92aWRlcjogJ0dvb2dsZScsXG4gICAgICAgIGNvbnRleHRfbGVuZ3RoOiAxMDAwMDAwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Zhc3QgYW5kIGVmZmljaWVudCBHZW1pbmkgbW9kZWwnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ21ldGEtbGxhbWEvbGxhbWEtMy4xLTcwYi1pbnN0cnVjdCcsXG4gICAgICAgIG5hbWU6ICdMbGFtYSAzLjEgNzBCJyxcbiAgICAgICAgcHJvdmlkZXI6ICdNZXRhJyxcbiAgICAgICAgY29udGV4dF9sZW5ndGg6IDEzMTA3MixcbiAgICAgICAgZGVzY3JpcHRpb246ICdNZXRhXFwncyBsYXJnZSBsYW5ndWFnZSBtb2RlbCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnbWV0YS1sbGFtYS9sbGFtYS0zLjEtOGItaW5zdHJ1Y3QnLFxuICAgICAgICBuYW1lOiAnTGxhbWEgMy4xIDhCJyxcbiAgICAgICAgcHJvdmlkZXI6ICdNZXRhJyxcbiAgICAgICAgY29udGV4dF9sZW5ndGg6IDEzMTA3MixcbiAgICAgICAgZGVzY3JpcHRpb246ICdTbWFsbGVyLCBmYXN0ZXIgTGxhbWEgbW9kZWwnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ21pc3RyYWxhaS9taXN0cmFsLWxhcmdlJyxcbiAgICAgICAgbmFtZTogJ01pc3RyYWwgTGFyZ2UnLFxuICAgICAgICBwcm92aWRlcjogJ01pc3RyYWwgQUknLFxuICAgICAgICBjb250ZXh0X2xlbmd0aDogMTI4MDAwLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ01pc3RyYWxcXCdzIG1vc3QgY2FwYWJsZSBtb2RlbCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnbWlzdHJhbGFpL21pc3RyYWwtc21hbGwnLFxuICAgICAgICBuYW1lOiAnTWlzdHJhbCBTbWFsbCcsXG4gICAgICAgIHByb3ZpZGVyOiAnTWlzdHJhbCBBSScsXG4gICAgICAgIGNvbnRleHRfbGVuZ3RoOiAzMjAwMCxcbiAgICAgICAgZGVzY3JpcHRpb246ICdFZmZpY2llbnQgTWlzdHJhbCBtb2RlbCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnY29oZXJlL2NvbW1hbmQtci1wbHVzJyxcbiAgICAgICAgbmFtZTogJ0NvbW1hbmQgUisnLFxuICAgICAgICBwcm92aWRlcjogJ0NvaGVyZScsXG4gICAgICAgIGNvbnRleHRfbGVuZ3RoOiAxMjgwMDAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQ29oZXJlXFwncyBhZHZhbmNlZCBtb2RlbCdcbiAgICAgIH1cbiAgICBdXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVmVyY2VsQUlHYXRld2F5Q2xpZW50Il0sIm5hbWVzIjpbImdlbmVyYXRlVGV4dCIsIlZlcmNlbEFJR2F0ZXdheUNsaWVudCIsImNvbnN0cnVjdG9yIiwiYXBpS2V5IiwiZ2V0TW9kZWxzIiwidHJpbSIsImNvbnNvbGUiLCJ3YXJuIiwiZGF0YSIsImdldFByZWRlZmluZWRNb2RlbHMiLCJsb2ciLCJlcnJvciIsImdldENvbXBsZXRpb24iLCJtb2RlbElkIiwicHJvbXB0Iiwib3B0aW9ucyIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJ0ZW1wZXJhdHVyZSIsInN5c3RlbVByb21wdCIsInRpbWVvdXQiLCJFcnJvciIsInByb2Nlc3MiLCJlbnYiLCJBSV9HQVRFV0FZX0FQSV9LRVkiLCJyZXN1bHQiLCJtb2RlbCIsInN5c3RlbSIsIm1heFJldHJpZXMiLCJhYm9ydFNpZ25hbCIsIkFib3J0U2lnbmFsIiwiZW5kVGltZSIsInRleHQiLCJ0aW1lTXMiLCJ1c2FnZSIsIm5hbWUiLCJtZXNzYWdlIiwiYmF0Y2hDb21wbGV0aW9uIiwibW9kZWxJZHMiLCJjb25jdXJyZW5jeSIsInJlc3VsdHMiLCJpIiwibGVuZ3RoIiwiYmF0Y2giLCJzbGljZSIsImJhdGNoUHJvbWlzZXMiLCJtYXAiLCJiYXRjaFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwicHVzaCIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZXh0cmFjdFByb3ZpZGVyIiwicHJvdmlkZXIiLCJzcGxpdCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiZmlsdGVyTW9kZWxzRm9yQmVuY2htYXJrIiwibW9kZWxzIiwiZmlsdGVyIiwiaWQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiY29udGV4dF9sZW5ndGgiLCJnZXRSZWNvbW1lbmRlZE1vZGVsSWRzIiwiZGVzY3JpcHRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/vercel-ai-gateway.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@supabase","vendor-chunks/zod","vendor-chunks/ai","vendor-chunks/tr46","vendor-chunks/@ai-sdk","vendor-chunks/whatwg-url","vendor-chunks/eventsource-parser"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt%2Froute&page=%2Fapi%2Fprompt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt%2Froute.ts&appDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();
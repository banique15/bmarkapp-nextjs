"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/prompt/route";
exports.ids = ["app/api/prompt/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt%2Froute&page=%2Fapi%2Fprompt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt%2Froute.ts&appDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt%2Froute&page=%2Fapi%2Fprompt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt%2Froute.ts&appDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_banik_Desktop_Projects2025_BMarkApp_NextJS_app_api_prompt_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/prompt/route.ts */ \"(rsc)/./app/api/prompt/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/prompt/route\",\n        pathname: \"/api/prompt\",\n        filename: \"route\",\n        bundlePath: \"app/api/prompt/route\"\n    },\n    resolvedPagePath: \"/Users/banik/Desktop/Projects2025/BMarkApp-NextJS/app/api/prompt/route.ts\",\n    nextConfigOutput,\n    userland: _Users_banik_Desktop_Projects2025_BMarkApp_NextJS_app_api_prompt_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/prompt/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9tcHQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByb21wdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByb21wdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJhbmlrJTJGRGVza3RvcCUyRlByb2plY3RzMjAyNSUyRkJNYXJrQXBwLU5leHRKUyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZiYW5payUyRkRlc2t0b3AlMkZQcm9qZWN0czIwMjUlMkZCTWFya0FwcC1OZXh0SlMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGxtLWNvbnNlbnN1cy1iZW5jaG1hcmstbmV4dGpzLz9iNzhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9iYW5pay9EZXNrdG9wL1Byb2plY3RzMjAyNS9CTWFya0FwcC1OZXh0SlMvYXBwL2FwaS9wcm9tcHQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb21wdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb21wdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJvbXB0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2JhbmlrL0Rlc2t0b3AvUHJvamVjdHMyMDI1L0JNYXJrQXBwLU5leHRKUy9hcHAvYXBpL3Byb21wdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHJvbXB0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt%2Froute&page=%2Fapi%2Fprompt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt%2Froute.ts&appDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/prompt/route.ts":
/*!*********************************!*\
  !*** ./app/api/prompt/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var _lib_openrouter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/openrouter */ \"(rsc)/./lib/openrouter.ts\");\n/* harmony import */ var _lib_consensus_analyzer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/consensus-analyzer */ \"(rsc)/./lib/consensus-analyzer.ts\");\n\n\n\n\n\n// Helper function to get OpenRouter API key from environment or headers\nfunction getOpenRouterApiKey(request) {\n    // First try environment variable (for production)\n    if (process.env.OPENROUTER_API_KEY) {\n        return process.env.OPENROUTER_API_KEY;\n    }\n    // Fall back to request headers (for development with settings page)\n    if (request?.headers.get(\"X-OpenRouter-API-Key\")) {\n        return request.headers.get(\"X-OpenRouter-API-Key\");\n    }\n    return null;\n}\n// Validation schemas\nconst PromptRequestSchema = zod__WEBPACK_IMPORTED_MODULE_4__.object({\n    text: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1, \"Prompt text is required\").max(1000, \"Prompt too long\"),\n    modelIds: zod__WEBPACK_IMPORTED_MODULE_4__.array(zod__WEBPACK_IMPORTED_MODULE_4__.string().uuid()).min(1, \"At least one model must be selected\")\n});\n// POST: Process prompt with selected models\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        // Validate request body\n        const { text, modelIds } = PromptRequestSchema.parse(body);\n        // Get OpenRouter API key\n        const openRouterApiKey = getOpenRouterApiKey(request);\n        if (!openRouterApiKey) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"OpenRouter API key is not configured. Please set it in environment variables or via the settings page.\"\n            }, {\n                status: 500\n            });\n        }\n        // Get selected models from database\n        const allModels = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.getModels();\n        const selectedModels = allModels.filter((model)=>modelIds.includes(model.id));\n        if (selectedModels.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No valid models selected.\"\n            }, {\n                status: 400\n            });\n        }\n        // Save prompt to database\n        const savedPrompt = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.savePrompt(text);\n        // Initialize OpenRouter client\n        const openRouter = new _lib_openrouter__WEBPACK_IMPORTED_MODULE_2__[\"default\"](openRouterApiKey);\n        // Get model IDs for OpenRouter\n        const modelOpenRouterIds = selectedModels.map((model)=>model.model_id);\n        // Send requests to all models in batches\n        const batchResults = await openRouter.batchCompletion(modelOpenRouterIds, text, {\n            maxTokens: 10,\n            temperature: 0.7,\n            systemPrompt: \"You are a helpful assistant. Respond with a single word only.\",\n            timeout: 30000,\n            concurrency: 5\n        });\n        // Process results and prepare responses\n        const responses = [];\n        const processedResults = batchResults.map((batchResult)=>{\n            const model = selectedModels.find((m)=>m.model_id === batchResult.modelId);\n            if (batchResult.error || !batchResult.result || !model) {\n                return {\n                    model: model || {\n                        id: \"unknown\",\n                        name: \"Unknown\",\n                        provider: \"Unknown\"\n                    },\n                    response_text: batchResult.error || \"Error\",\n                    response_time_ms: 0,\n                    error: batchResult.error || \"Unknown error\"\n                };\n            }\n            // Add to database responses\n            responses.push({\n                prompt_id: savedPrompt.id,\n                model_id: model.id,\n                response_text: batchResult.result.text,\n                response_time_ms: batchResult.result.timeMs\n            });\n            return {\n                model: {\n                    id: model.id,\n                    name: model.name,\n                    provider: model.provider\n                },\n                response_text: batchResult.result.text,\n                response_time_ms: batchResult.result.timeMs,\n                usage: batchResult.result.usage\n            };\n        });\n        // Save responses to database if any were successful\n        let savedResponses = [];\n        if (responses.length > 0) {\n            savedResponses = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.saveResponses(responses);\n        }\n        // Analyze consensus\n        const consensusAnalysis = _lib_consensus_analyzer__WEBPACK_IMPORTED_MODULE_3__.ConsensusAnalyzer.analyzeConsensus(savedResponses.map((response)=>({\n                id: response.id,\n                model_id: response.model_id,\n                response_text: response.response_text,\n                response_time_ms: response.response_time_ms,\n                model: response.model\n            })));\n        // Save consensus groups to database\n        let savedConsensusGroups = [];\n        if (consensusAnalysis.groups.length > 0) {\n            const consensusGroupsToSave = consensusAnalysis.groups.map((group)=>({\n                    prompt_id: savedPrompt.id,\n                    group_name: group.groupName,\n                    count: group.count,\n                    percentage: group.percentage,\n                    color: group.color\n                }));\n            try {\n                savedConsensusGroups = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.saveConsensusGroups(consensusGroupsToSave);\n            } catch (error) {\n                console.error(\"Failed to save consensus groups, continuing without saving:\", error);\n            // Continue without saving consensus groups to database\n            }\n        }\n        // Generate insights\n        const insights = _lib_consensus_analyzer__WEBPACK_IMPORTED_MODULE_3__.ConsensusAnalyzer.generateInsights(consensusAnalysis);\n        const summaryStats = _lib_consensus_analyzer__WEBPACK_IMPORTED_MODULE_3__.ConsensusAnalyzer.getSummaryStats(consensusAnalysis);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            prompt: savedPrompt,\n            responses: processedResults,\n            consensus_groups: consensusAnalysis.groups,\n            insights,\n            summary: summaryStats,\n            total_models: selectedModels.length,\n            successful_responses: responses.length,\n            failed_responses: selectedModels.length - responses.length\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error processing prompt:\", error);\n        console.error(\"Error stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_5__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid request data\",\n                details: error.errors\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Failed to process prompt\"\n        }, {\n            status: 500\n        });\n    }\n}\n// GET: Get prompt history\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const limit = parseInt(searchParams.get(\"limit\") || \"50\");\n        const promptId = searchParams.get(\"id\");\n        if (promptId) {\n            // Get specific prompt with results\n            const promptWithResults = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.getPromptWithResults(promptId);\n            if (!promptWithResults) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Prompt not found\"\n                }, {\n                    status: 404\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(promptWithResults, {\n                status: 200\n            });\n        } else {\n            // Get prompt history\n            const prompts = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabaseClient.getPromptHistory(limit);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                prompts\n            }, {\n                status: 200\n            });\n        }\n    } catch (error) {\n        console.error(\"Error fetching prompt data:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Failed to fetch prompt data\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bnN1cy1iZW5jaG1hcmstbmV4dGpzLy4vYXBwL2FwaS9wcm9tcHQvcm91dGUudHM/ZDYxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuaW1wb3J0IHsgc3VwYWJhc2VDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSdcbmltcG9ydCBPcGVuUm91dGVyQ2xpZW50IGZyb20gJ0AvbGliL29wZW5yb3V0ZXInXG5pbXBvcnQgeyBDb25zZW5zdXNBbmFseXplciB9IGZyb20gJ0AvbGliL2NvbnNlbnN1cy1hbmFseXplcidcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBPcGVuUm91dGVyIEFQSSBrZXkgZnJvbSBlbnZpcm9ubWVudCBvciBoZWFkZXJzXG5mdW5jdGlvbiBnZXRPcGVuUm91dGVyQXBpS2V5KHJlcXVlc3Q/OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB8IG51bGwge1xuICAvLyBGaXJzdCB0cnkgZW52aXJvbm1lbnQgdmFyaWFibGUgKGZvciBwcm9kdWN0aW9uKVxuICBpZiAocHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfQVBJX0tFWVxuICB9XG4gIFxuICAvLyBGYWxsIGJhY2sgdG8gcmVxdWVzdCBoZWFkZXJzIChmb3IgZGV2ZWxvcG1lbnQgd2l0aCBzZXR0aW5ncyBwYWdlKVxuICBpZiAocmVxdWVzdD8uaGVhZGVycy5nZXQoJ1gtT3BlblJvdXRlci1BUEktS2V5JykpIHtcbiAgICByZXR1cm4gcmVxdWVzdC5oZWFkZXJzLmdldCgnWC1PcGVuUm91dGVyLUFQSS1LZXknKVxuICB9XG4gIFxuICByZXR1cm4gbnVsbFxufVxuXG4vLyBWYWxpZGF0aW9uIHNjaGVtYXNcbmNvbnN0IFByb21wdFJlcXVlc3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRleHQ6IHouc3RyaW5nKCkubWluKDEsICdQcm9tcHQgdGV4dCBpcyByZXF1aXJlZCcpLm1heCgxMDAwLCAnUHJvbXB0IHRvbyBsb25nJyksXG4gIG1vZGVsSWRzOiB6LmFycmF5KHouc3RyaW5nKCkudXVpZCgpKS5taW4oMSwgJ0F0IGxlYXN0IG9uZSBtb2RlbCBtdXN0IGJlIHNlbGVjdGVkJyksXG59KVxuXG4vLyBQT1NUOiBQcm9jZXNzIHByb21wdCB3aXRoIHNlbGVjdGVkIG1vZGVsc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCB7IHRleHQsIG1vZGVsSWRzIH0gPSBQcm9tcHRSZXF1ZXN0U2NoZW1hLnBhcnNlKGJvZHkpXG4gICAgXG4gICAgLy8gR2V0IE9wZW5Sb3V0ZXIgQVBJIGtleVxuICAgIGNvbnN0IG9wZW5Sb3V0ZXJBcGlLZXkgPSBnZXRPcGVuUm91dGVyQXBpS2V5KHJlcXVlc3QpXG4gICAgaWYgKCFvcGVuUm91dGVyQXBpS2V5KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdPcGVuUm91dGVyIEFQSSBrZXkgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBzZXQgaXQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzIG9yIHZpYSB0aGUgc2V0dGluZ3MgcGFnZS4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIEdldCBzZWxlY3RlZCBtb2RlbHMgZnJvbSBkYXRhYmFzZVxuICAgIGNvbnN0IGFsbE1vZGVscyA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50LmdldE1vZGVscygpXG4gICAgY29uc3Qgc2VsZWN0ZWRNb2RlbHMgPSBhbGxNb2RlbHMuZmlsdGVyKG1vZGVsID0+IG1vZGVsSWRzLmluY2x1ZGVzKG1vZGVsLmlkKSlcbiAgICBcbiAgICBpZiAoc2VsZWN0ZWRNb2RlbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdObyB2YWxpZCBtb2RlbHMgc2VsZWN0ZWQuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBTYXZlIHByb21wdCB0byBkYXRhYmFzZVxuICAgIGNvbnN0IHNhdmVkUHJvbXB0ID0gYXdhaXQgc3VwYWJhc2VDbGllbnQuc2F2ZVByb21wdCh0ZXh0KVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBPcGVuUm91dGVyIGNsaWVudFxuICAgIGNvbnN0IG9wZW5Sb3V0ZXIgPSBuZXcgT3BlblJvdXRlckNsaWVudChvcGVuUm91dGVyQXBpS2V5KVxuICAgIFxuICAgIC8vIEdldCBtb2RlbCBJRHMgZm9yIE9wZW5Sb3V0ZXJcbiAgICBjb25zdCBtb2RlbE9wZW5Sb3V0ZXJJZHMgPSBzZWxlY3RlZE1vZGVscy5tYXAobW9kZWwgPT4gbW9kZWwubW9kZWxfaWQpXG4gICAgXG4gICAgLy8gU2VuZCByZXF1ZXN0cyB0byBhbGwgbW9kZWxzIGluIGJhdGNoZXNcbiAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCBvcGVuUm91dGVyLmJhdGNoQ29tcGxldGlvbihcbiAgICAgIG1vZGVsT3BlblJvdXRlcklkcyxcbiAgICAgIHRleHQsXG4gICAgICB7XG4gICAgICAgIG1heFRva2VuczogMTAsXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgIHN5c3RlbVByb21wdDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4gUmVzcG9uZCB3aXRoIGEgc2luZ2xlIHdvcmQgb25seS4nLFxuICAgICAgICB0aW1lb3V0OiAzMDAwMCxcbiAgICAgICAgY29uY3VycmVuY3k6IDVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBQcm9jZXNzIHJlc3VsdHMgYW5kIHByZXBhcmUgcmVzcG9uc2VzXG4gICAgY29uc3QgcmVzcG9uc2VzOiBBcnJheTx7XG4gICAgICBwcm9tcHRfaWQ6IHN0cmluZ1xuICAgICAgbW9kZWxfaWQ6IHN0cmluZ1xuICAgICAgcmVzcG9uc2VfdGV4dDogc3RyaW5nXG4gICAgICByZXNwb25zZV90aW1lX21zOiBudW1iZXJcbiAgICB9PiA9IFtdXG5cbiAgICBjb25zdCBwcm9jZXNzZWRSZXN1bHRzID0gYmF0Y2hSZXN1bHRzLm1hcChiYXRjaFJlc3VsdCA9PiB7XG4gICAgICBjb25zdCBtb2RlbCA9IHNlbGVjdGVkTW9kZWxzLmZpbmQobSA9PiBtLm1vZGVsX2lkID09PSBiYXRjaFJlc3VsdC5tb2RlbElkKVxuICAgICAgXG4gICAgICBpZiAoYmF0Y2hSZXN1bHQuZXJyb3IgfHwgIWJhdGNoUmVzdWx0LnJlc3VsdCB8fCAhbW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtb2RlbDogbW9kZWwgfHwgeyBpZDogJ3Vua25vd24nLCBuYW1lOiAnVW5rbm93bicsIHByb3ZpZGVyOiAnVW5rbm93bicgfSxcbiAgICAgICAgICByZXNwb25zZV90ZXh0OiBiYXRjaFJlc3VsdC5lcnJvciB8fCAnRXJyb3InLFxuICAgICAgICAgIHJlc3BvbnNlX3RpbWVfbXM6IDAsXG4gICAgICAgICAgZXJyb3I6IGJhdGNoUmVzdWx0LmVycm9yIHx8ICdVbmtub3duIGVycm9yJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0byBkYXRhYmFzZSByZXNwb25zZXNcbiAgICAgIHJlc3BvbnNlcy5wdXNoKHtcbiAgICAgICAgcHJvbXB0X2lkOiBzYXZlZFByb21wdC5pZCxcbiAgICAgICAgbW9kZWxfaWQ6IG1vZGVsLmlkLFxuICAgICAgICByZXNwb25zZV90ZXh0OiBiYXRjaFJlc3VsdC5yZXN1bHQudGV4dCxcbiAgICAgICAgcmVzcG9uc2VfdGltZV9tczogYmF0Y2hSZXN1bHQucmVzdWx0LnRpbWVNc1xuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICBpZDogbW9kZWwuaWQsXG4gICAgICAgICAgbmFtZTogbW9kZWwubmFtZSxcbiAgICAgICAgICBwcm92aWRlcjogbW9kZWwucHJvdmlkZXJcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2VfdGV4dDogYmF0Y2hSZXN1bHQucmVzdWx0LnRleHQsXG4gICAgICAgIHJlc3BvbnNlX3RpbWVfbXM6IGJhdGNoUmVzdWx0LnJlc3VsdC50aW1lTXMsXG4gICAgICAgIHVzYWdlOiBiYXRjaFJlc3VsdC5yZXN1bHQudXNhZ2VcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gU2F2ZSByZXNwb25zZXMgdG8gZGF0YWJhc2UgaWYgYW55IHdlcmUgc3VjY2Vzc2Z1bFxuICAgIGxldCBzYXZlZFJlc3BvbnNlczogYW55W10gPSBbXVxuICAgIGlmIChyZXNwb25zZXMubGVuZ3RoID4gMCkge1xuICAgICAgc2F2ZWRSZXNwb25zZXMgPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5zYXZlUmVzcG9uc2VzKHJlc3BvbnNlcylcbiAgICB9XG5cbiAgICAvLyBBbmFseXplIGNvbnNlbnN1c1xuICAgIGNvbnN0IGNvbnNlbnN1c0FuYWx5c2lzID0gQ29uc2Vuc3VzQW5hbHl6ZXIuYW5hbHl6ZUNvbnNlbnN1cyhcbiAgICAgIHNhdmVkUmVzcG9uc2VzLm1hcChyZXNwb25zZSA9PiAoe1xuICAgICAgICBpZDogcmVzcG9uc2UuaWQsXG4gICAgICAgIG1vZGVsX2lkOiByZXNwb25zZS5tb2RlbF9pZCxcbiAgICAgICAgcmVzcG9uc2VfdGV4dDogcmVzcG9uc2UucmVzcG9uc2VfdGV4dCxcbiAgICAgICAgcmVzcG9uc2VfdGltZV9tczogcmVzcG9uc2UucmVzcG9uc2VfdGltZV9tcyxcbiAgICAgICAgbW9kZWw6IHJlc3BvbnNlLm1vZGVsXG4gICAgICB9KSlcbiAgICApXG5cbiAgICAvLyBTYXZlIGNvbnNlbnN1cyBncm91cHMgdG8gZGF0YWJhc2VcbiAgICBsZXQgc2F2ZWRDb25zZW5zdXNHcm91cHM6IGFueVtdID0gW11cbiAgICBpZiAoY29uc2Vuc3VzQW5hbHlzaXMuZ3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNvbnNlbnN1c0dyb3Vwc1RvU2F2ZSA9IGNvbnNlbnN1c0FuYWx5c2lzLmdyb3Vwcy5tYXAoZ3JvdXAgPT4gKHtcbiAgICAgICAgcHJvbXB0X2lkOiBzYXZlZFByb21wdC5pZCxcbiAgICAgICAgZ3JvdXBfbmFtZTogZ3JvdXAuZ3JvdXBOYW1lLFxuICAgICAgICBjb3VudDogZ3JvdXAuY291bnQsXG4gICAgICAgIHBlcmNlbnRhZ2U6IGdyb3VwLnBlcmNlbnRhZ2UsXG4gICAgICAgIGNvbG9yOiBncm91cC5jb2xvclxuICAgICAgICAvLyBOb3RlOiBtb2RlbHMgZmllbGQgcmVtb3ZlZCB0ZW1wb3JhcmlseSBkdWUgdG8gZGF0YWJhc2Ugc2NoZW1hIG1pc21hdGNoXG4gICAgICB9KSlcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgc2F2ZWRDb25zZW5zdXNHcm91cHMgPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5zYXZlQ29uc2Vuc3VzR3JvdXBzKGNvbnNlbnN1c0dyb3Vwc1RvU2F2ZSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGNvbnNlbnN1cyBncm91cHMsIGNvbnRpbnVpbmcgd2l0aG91dCBzYXZpbmc6JywgZXJyb3IpXG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGhvdXQgc2F2aW5nIGNvbnNlbnN1cyBncm91cHMgdG8gZGF0YWJhc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSBpbnNpZ2h0c1xuICAgIGNvbnN0IGluc2lnaHRzID0gQ29uc2Vuc3VzQW5hbHl6ZXIuZ2VuZXJhdGVJbnNpZ2h0cyhjb25zZW5zdXNBbmFseXNpcylcbiAgICBjb25zdCBzdW1tYXJ5U3RhdHMgPSBDb25zZW5zdXNBbmFseXplci5nZXRTdW1tYXJ5U3RhdHMoY29uc2Vuc3VzQW5hbHlzaXMpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgcHJvbXB0OiBzYXZlZFByb21wdCxcbiAgICAgIHJlc3BvbnNlczogcHJvY2Vzc2VkUmVzdWx0cyxcbiAgICAgIGNvbnNlbnN1c19ncm91cHM6IGNvbnNlbnN1c0FuYWx5c2lzLmdyb3VwcyxcbiAgICAgIGluc2lnaHRzLFxuICAgICAgc3VtbWFyeTogc3VtbWFyeVN0YXRzLFxuICAgICAgdG90YWxfbW9kZWxzOiBzZWxlY3RlZE1vZGVscy5sZW5ndGgsXG4gICAgICBzdWNjZXNzZnVsX3Jlc3BvbnNlczogcmVzcG9uc2VzLmxlbmd0aCxcbiAgICAgIGZhaWxlZF9yZXNwb25zZXM6IHNlbGVjdGVkTW9kZWxzLmxlbmd0aCAtIHJlc3BvbnNlcy5sZW5ndGhcbiAgICB9LCB7IHN0YXR1czogMjAwIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIHByb21wdDonLCBlcnJvcilcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdGFjazonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnTm8gc3RhY2sgdHJhY2UnKVxuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdCBkYXRhJywgZGV0YWlsczogZXJyb3IuZXJyb3JzIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBwcm9jZXNzIHByb21wdCcgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG4vLyBHRVQ6IEdldCBwcm9tcHQgaGlzdG9yeVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnNTAnKVxuICAgIGNvbnN0IHByb21wdElkID0gc2VhcmNoUGFyYW1zLmdldCgnaWQnKVxuXG4gICAgaWYgKHByb21wdElkKSB7XG4gICAgICAvLyBHZXQgc3BlY2lmaWMgcHJvbXB0IHdpdGggcmVzdWx0c1xuICAgICAgY29uc3QgcHJvbXB0V2l0aFJlc3VsdHMgPSBhd2FpdCBzdXBhYmFzZUNsaWVudC5nZXRQcm9tcHRXaXRoUmVzdWx0cyhwcm9tcHRJZClcbiAgICAgIFxuICAgICAgaWYgKCFwcm9tcHRXaXRoUmVzdWx0cykge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogJ1Byb21wdCBub3QgZm91bmQnIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHByb21wdFdpdGhSZXN1bHRzLCB7IHN0YXR1czogMjAwIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEdldCBwcm9tcHQgaGlzdG9yeVxuICAgICAgY29uc3QgcHJvbXB0cyA9IGF3YWl0IHN1cGFiYXNlQ2xpZW50LmdldFByb21wdEhpc3RvcnkobGltaXQpXG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHByb21wdHMgfSwgeyBzdGF0dXM6IDIwMCB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9tcHQgZGF0YTonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggcHJvbXB0IGRhdGEnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwieiIsInN1cGFiYXNlQ2xpZW50IiwiT3BlblJvdXRlckNsaWVudCIsIkNvbnNlbnN1c0FuYWx5emVyIiwiZ2V0T3BlblJvdXRlckFwaUtleSIsInJlcXVlc3QiLCJwcm9jZXNzIiwiZW52IiwiT1BFTlJPVVRFUl9BUElfS0VZIiwiaGVhZGVycyIsImdldCIsIlByb21wdFJlcXVlc3RTY2hlbWEiLCJvYmplY3QiLCJ0ZXh0Iiwic3RyaW5nIiwibWluIiwibWF4IiwibW9kZWxJZHMiLCJhcnJheSIsInV1aWQiLCJQT1NUIiwiYm9keSIsImpzb24iLCJwYXJzZSIsIm9wZW5Sb3V0ZXJBcGlLZXkiLCJlcnJvciIsInN0YXR1cyIsImFsbE1vZGVscyIsImdldE1vZGVscyIsInNlbGVjdGVkTW9kZWxzIiwiZmlsdGVyIiwibW9kZWwiLCJpbmNsdWRlcyIsImlkIiwibGVuZ3RoIiwic2F2ZWRQcm9tcHQiLCJzYXZlUHJvbXB0Iiwib3BlblJvdXRlciIsIm1vZGVsT3BlblJvdXRlcklkcyIsIm1hcCIsIm1vZGVsX2lkIiwiYmF0Y2hSZXN1bHRzIiwiYmF0Y2hDb21wbGV0aW9uIiwibWF4VG9rZW5zIiwidGVtcGVyYXR1cmUiLCJzeXN0ZW1Qcm9tcHQiLCJ0aW1lb3V0IiwiY29uY3VycmVuY3kiLCJyZXNwb25zZXMiLCJwcm9jZXNzZWRSZXN1bHRzIiwiYmF0Y2hSZXN1bHQiLCJmaW5kIiwibSIsIm1vZGVsSWQiLCJyZXN1bHQiLCJuYW1lIiwicHJvdmlkZXIiLCJyZXNwb25zZV90ZXh0IiwicmVzcG9uc2VfdGltZV9tcyIsInB1c2giLCJwcm9tcHRfaWQiLCJ0aW1lTXMiLCJ1c2FnZSIsInNhdmVkUmVzcG9uc2VzIiwic2F2ZVJlc3BvbnNlcyIsImNvbnNlbnN1c0FuYWx5c2lzIiwiYW5hbHl6ZUNvbnNlbnN1cyIsInJlc3BvbnNlIiwic2F2ZWRDb25zZW5zdXNHcm91cHMiLCJncm91cHMiLCJjb25zZW5zdXNHcm91cHNUb1NhdmUiLCJncm91cCIsImdyb3VwX25hbWUiLCJncm91cE5hbWUiLCJjb3VudCIsInBlcmNlbnRhZ2UiLCJjb2xvciIsInNhdmVDb25zZW5zdXNHcm91cHMiLCJjb25zb2xlIiwiaW5zaWdodHMiLCJnZW5lcmF0ZUluc2lnaHRzIiwic3VtbWFyeVN0YXRzIiwiZ2V0U3VtbWFyeVN0YXRzIiwicHJvbXB0IiwiY29uc2Vuc3VzX2dyb3VwcyIsInN1bW1hcnkiLCJ0b3RhbF9tb2RlbHMiLCJzdWNjZXNzZnVsX3Jlc3BvbnNlcyIsImZhaWxlZF9yZXNwb25zZXMiLCJFcnJvciIsInN0YWNrIiwiWm9kRXJyb3IiLCJkZXRhaWxzIiwiZXJyb3JzIiwibWVzc2FnZSIsIkdFVCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImxpbWl0IiwicGFyc2VJbnQiLCJwcm9tcHRJZCIsInByb21wdFdpdGhSZXN1bHRzIiwiZ2V0UHJvbXB0V2l0aFJlc3VsdHMiLCJwcm9tcHRzIiwiZ2V0UHJvbXB0SGlzdG9yeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/prompt/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/consensus-analyzer.ts":
/*!***********************************!*\
  !*** ./lib/consensus-analyzer.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsensusAnalyzer: () => (/* binding */ ConsensusAnalyzer)\n/* harmony export */ });\nclass ConsensusAnalyzer {\n    static{\n        this.SIMILARITY_THRESHOLD = 0.8;\n    }\n    static{\n        this.COLORS = [\n            \"#3B82F6\",\n            \"#EF4444\",\n            \"#10B981\",\n            \"#F59E0B\",\n            \"#8B5CF6\",\n            \"#F97316\",\n            \"#06B6D4\",\n            \"#84CC16\",\n            \"#EC4899\",\n            \"#6B7280\"\n        ];\n    }\n    /**\n   * Analyze responses to find consensus groups\n   */ static analyzeConsensus(responses) {\n        if (responses.length === 0) {\n            return {\n                groups: [],\n                totalResponses: 0,\n                consensusLevel: 0,\n                diversity: 0,\n                topResponse: \"\"\n            };\n        }\n        // Group similar responses\n        const groups = this.groupSimilarResponses(responses);\n        // Sort groups by count (descending)\n        groups.sort((a, b)=>b.count - a.count);\n        // Assign colors\n        groups.forEach((group, index)=>{\n            group.color = this.COLORS[index % this.COLORS.length];\n        });\n        // Calculate metrics\n        const totalResponses = responses.length;\n        const consensusLevel = groups.length > 0 ? groups[0].count / totalResponses * 100 : 0;\n        const diversity = groups.length / totalResponses;\n        const topResponse = groups.length > 0 ? groups[0].groupName : \"\";\n        return {\n            groups,\n            totalResponses,\n            consensusLevel,\n            diversity,\n            topResponse\n        };\n    }\n    /**\n   * Group responses by similarity\n   */ static groupSimilarResponses(responses) {\n        const groups = [];\n        for (const response of responses){\n            const normalizedText = this.normalizeText(response.response_text);\n            // Find existing group or create new one\n            let group = groups.find((g)=>this.calculateSimilarity(g.groupName, normalizedText) >= this.SIMILARITY_THRESHOLD);\n            if (!group) {\n                group = {\n                    groupName: normalizedText,\n                    count: 0,\n                    percentage: 0,\n                    color: \"\",\n                    models: [],\n                    responses: []\n                };\n                groups.push(group);\n            }\n            // Add response to group\n            group.count++;\n            group.responses.push(response);\n            if (response.model) {\n                group.models.push(response.model.name);\n            }\n        }\n        // Calculate percentages\n        const total = responses.length;\n        groups.forEach((group)=>{\n            group.percentage = group.count / total * 100;\n        });\n        return groups;\n    }\n    /**\n   * Normalize text for comparison\n   */ static normalizeText(text) {\n        return text.toLowerCase().trim().replace(/[^\\w\\s]/g, \"\") // Remove punctuation\n        .replace(/\\s+/g, \" \") // Normalize whitespace\n        ;\n    }\n    /**\n   * Calculate similarity between two texts using Levenshtein distance\n   */ static calculateSimilarity(text1, text2) {\n        const normalized1 = this.normalizeText(text1);\n        const normalized2 = this.normalizeText(text2);\n        if (normalized1 === normalized2) return 1.0;\n        const distance = this.levenshteinDistance(normalized1, normalized2);\n        const maxLength = Math.max(normalized1.length, normalized2.length);\n        return maxLength === 0 ? 1.0 : 1 - distance / maxLength;\n    }\n    /**\n   * Calculate Levenshtein distance between two strings\n   */ static levenshteinDistance(str1, str2) {\n        const matrix = Array(str2.length + 1).fill(null).map(()=>Array(str1.length + 1).fill(null));\n        for(let i = 0; i <= str1.length; i++)matrix[0][i] = i;\n        for(let j = 0; j <= str2.length; j++)matrix[j][0] = j;\n        for(let j = 1; j <= str2.length; j++){\n            for(let i = 1; i <= str1.length; i++){\n                const indicator = str1[i - 1] === str2[j - 1] ? 0 : 1;\n                matrix[j][i] = Math.min(matrix[j][i - 1] + 1, matrix[j - 1][i] + 1, matrix[j - 1][i - 1] + indicator // substitution\n                );\n            }\n        }\n        return matrix[str2.length][str1.length];\n    }\n    /**\n   * Generate insights about the consensus\n   */ static generateInsights(analysis) {\n        const insights = [];\n        const { groups, totalResponses, consensusLevel, diversity } = analysis;\n        if (totalResponses === 0) {\n            return [\n                \"No responses to analyze.\"\n            ];\n        }\n        // Consensus level insights\n        if (consensusLevel >= 80) {\n            insights.push(`Strong consensus: ${consensusLevel.toFixed(1)}% of models agreed on \"${analysis.topResponse}\".`);\n        } else if (consensusLevel >= 60) {\n            insights.push(`Moderate consensus: ${consensusLevel.toFixed(1)}% of models agreed on \"${analysis.topResponse}\".`);\n        } else if (consensusLevel >= 40) {\n            insights.push(`Weak consensus: Only ${consensusLevel.toFixed(1)}% of models agreed on \"${analysis.topResponse}\".`);\n        } else {\n            insights.push(`No clear consensus: Responses were highly diverse with the top response only getting ${consensusLevel.toFixed(1)}% agreement.`);\n        }\n        // Diversity insights\n        if (diversity >= 0.8) {\n            insights.push(\"Very high diversity: Most models gave different responses.\");\n        } else if (diversity >= 0.6) {\n            insights.push(\"High diversity: Many different responses were given.\");\n        } else if (diversity >= 0.4) {\n            insights.push(\"Moderate diversity: Some variation in responses.\");\n        } else {\n            insights.push(\"Low diversity: Models tended to give similar responses.\");\n        }\n        // Group insights\n        if (groups.length >= 2) {\n            const secondGroup = groups[1];\n            const gap = groups[0].percentage - secondGroup.percentage;\n            if (gap < 10) {\n                insights.push(`Close competition: \"${groups[0].groupName}\" (${groups[0].percentage.toFixed(1)}%) barely edged out \"${secondGroup.groupName}\" (${secondGroup.percentage.toFixed(1)}%).`);\n            }\n        }\n        // Provider insights\n        if (groups.length > 0) {\n            const topGroup = groups[0];\n            const providers = topGroup.responses.map((r)=>r.model?.provider).filter(Boolean);\n            const uniqueProviders = [\n                ...new Set(providers)\n            ];\n            if (uniqueProviders.length === 1) {\n                insights.push(`Provider bias: All models agreeing on \"${topGroup.groupName}\" were from ${uniqueProviders[0]}.`);\n            } else if (uniqueProviders.length >= 3) {\n                insights.push(`Cross-provider agreement: Models from ${uniqueProviders.length} different providers agreed on \"${topGroup.groupName}\".`);\n            }\n        }\n        return insights;\n    }\n    /**\n   * Export consensus data to CSV format\n   */ static exportToCsv(analysis, promptText) {\n        const headers = [\n            \"Response\",\n            \"Count\",\n            \"Percentage\",\n            \"Models\"\n        ];\n        const rows = analysis.groups.map((group)=>[\n                `\"${group.groupName.replace(/\"/g, '\"\"')}\"`,\n                group.count.toString(),\n                group.percentage.toFixed(1),\n                `\"${group.models.join(\", \").replace(/\"/g, '\"\"')}\"`\n            ]);\n        const csvContent = [\n            `# LLM Consensus Analysis`,\n            `# Prompt: \"${promptText.replace(/\"/g, '\"\"')}\"`,\n            `# Generated: ${new Date().toISOString()}`,\n            `# Total Responses: ${analysis.totalResponses}`,\n            `# Consensus Level: ${analysis.consensusLevel.toFixed(1)}%`,\n            ``,\n            headers.join(\",\"),\n            ...rows.map((row)=>row.join(\",\"))\n        ].join(\"\\n\");\n        return csvContent;\n    }\n    /**\n   * Generate summary statistics\n   */ static getSummaryStats(analysis) {\n        return {\n            totalModels: analysis.totalResponses,\n            uniqueResponses: analysis.groups.length,\n            consensusLevel: analysis.consensusLevel,\n            topResponse: analysis.topResponse,\n            responseDistribution: analysis.groups.map((group)=>({\n                    response: group.groupName,\n                    count: group.count,\n                    percentage: group.percentage\n                }))\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsQ0FBQztZQUMzRCxDQUFDLENBQUM7WUFDRmEsUUFBUUcsSUFBSSxDQUFDO2VBQ1ZGLEtBQUt0QixHQUFHLENBQUM0QixDQUFBQSxNQUFPQSxJQUFJSixJQUFJLENBQUM7U0FDN0IsQ0FBQ0EsSUFBSSxDQUFDO1FBRVAsT0FBT0M7SUFDVDtJQUVBOztHQUVDLEdBQ0QsT0FBT0ksZ0JBQWdCdkIsUUFBMkIsRUFNaEQ7UUFDQSxPQUFPO1lBQ0x3QixhQUFheEIsU0FBU25ELGNBQWM7WUFDcEM0RSxpQkFBaUJ6QixTQUFTcEQsTUFBTSxDQUFDRCxNQUFNO1lBQ3ZDRyxnQkFBZ0JrRCxTQUFTbEQsY0FBYztZQUN2Q0UsYUFBYWdELFNBQVNoRCxXQUFXO1lBQ2pDMEUsc0JBQXNCMUIsU0FBU3BELE1BQU0sQ0FBQzhDLEdBQUcsQ0FBQ25DLENBQUFBLFFBQVU7b0JBQ2xESSxVQUFVSixNQUFNRyxTQUFTO29CQUN6QkwsT0FBT0UsTUFBTUYsS0FBSztvQkFDbEJhLFlBQVlYLE1BQU1XLFVBQVU7Z0JBQzlCO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGxtLWNvbnNlbnN1cy1iZW5jaG1hcmstbmV4dGpzLy4vbGliL2NvbnNlbnN1cy1hbmFseXplci50cz81MzdiIl0sInNvdXJjZXNDb250ZW50IjpbImludGVyZmFjZSBSZXNwb25zZSB7XG4gIGlkOiBzdHJpbmdcbiAgbW9kZWxfaWQ6IHN0cmluZ1xuICByZXNwb25zZV90ZXh0OiBzdHJpbmdcbiAgcmVzcG9uc2VfdGltZV9tczogbnVtYmVyXG4gIG1vZGVsPzoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHByb3ZpZGVyOiBzdHJpbmdcbiAgfVxufVxuXG5pbnRlcmZhY2UgQ29uc2Vuc3VzR3JvdXAge1xuICBncm91cE5hbWU6IHN0cmluZ1xuICBjb3VudDogbnVtYmVyXG4gIHBlcmNlbnRhZ2U6IG51bWJlclxuICBjb2xvcjogc3RyaW5nXG4gIG1vZGVsczogc3RyaW5nW11cbiAgcmVzcG9uc2VzOiBSZXNwb25zZVtdXG59XG5cbmludGVyZmFjZSBDb25zZW5zdXNBbmFseXNpcyB7XG4gIGdyb3VwczogQ29uc2Vuc3VzR3JvdXBbXVxuICB0b3RhbFJlc3BvbnNlczogbnVtYmVyXG4gIGNvbnNlbnN1c0xldmVsOiBudW1iZXJcbiAgZGl2ZXJzaXR5OiBudW1iZXJcbiAgdG9wUmVzcG9uc2U6IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgQ29uc2Vuc3VzQW5hbHl6ZXIge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTSU1JTEFSSVRZX1RIUkVTSE9MRCA9IDAuOFxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDT0xPUlMgPSBbXG4gICAgJyMzQjgyRjYnLCAvLyBCbHVlXG4gICAgJyNFRjQ0NDQnLCAvLyBSZWRcbiAgICAnIzEwQjk4MScsIC8vIEdyZWVuXG4gICAgJyNGNTlFMEInLCAvLyBBbWJlclxuICAgICcjOEI1Q0Y2JywgLy8gUHVycGxlXG4gICAgJyNGOTczMTYnLCAvLyBPcmFuZ2VcbiAgICAnIzA2QjZENCcsIC8vIEN5YW5cbiAgICAnIzg0Q0MxNicsIC8vIExpbWVcbiAgICAnI0VDNDg5OScsIC8vIFBpbmtcbiAgICAnIzZCNzI4MCcsIC8vIEdyYXlcbiAgXVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHJlc3BvbnNlcyB0byBmaW5kIGNvbnNlbnN1cyBncm91cHNcbiAgICovXG4gIHN0YXRpYyBhbmFseXplQ29uc2Vuc3VzKHJlc3BvbnNlczogUmVzcG9uc2VbXSk6IENvbnNlbnN1c0FuYWx5c2lzIHtcbiAgICBpZiAocmVzcG9uc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZ3JvdXBzOiBbXSxcbiAgICAgICAgdG90YWxSZXNwb25zZXM6IDAsXG4gICAgICAgIGNvbnNlbnN1c0xldmVsOiAwLFxuICAgICAgICBkaXZlcnNpdHk6IDAsXG4gICAgICAgIHRvcFJlc3BvbnNlOiAnJ1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdyb3VwIHNpbWlsYXIgcmVzcG9uc2VzXG4gICAgY29uc3QgZ3JvdXBzID0gdGhpcy5ncm91cFNpbWlsYXJSZXNwb25zZXMocmVzcG9uc2VzKVxuICAgIFxuICAgIC8vIFNvcnQgZ3JvdXBzIGJ5IGNvdW50IChkZXNjZW5kaW5nKVxuICAgIGdyb3Vwcy5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudClcbiAgICBcbiAgICAvLyBBc3NpZ24gY29sb3JzXG4gICAgZ3JvdXBzLmZvckVhY2goKGdyb3VwLCBpbmRleCkgPT4ge1xuICAgICAgZ3JvdXAuY29sb3IgPSB0aGlzLkNPTE9SU1tpbmRleCAlIHRoaXMuQ09MT1JTLmxlbmd0aF1cbiAgICB9KVxuXG4gICAgLy8gQ2FsY3VsYXRlIG1ldHJpY3NcbiAgICBjb25zdCB0b3RhbFJlc3BvbnNlcyA9IHJlc3BvbnNlcy5sZW5ndGhcbiAgICBjb25zdCBjb25zZW5zdXNMZXZlbCA9IGdyb3Vwcy5sZW5ndGggPiAwID8gKGdyb3Vwc1swXS5jb3VudCAvIHRvdGFsUmVzcG9uc2VzKSAqIDEwMCA6IDBcbiAgICBjb25zdCBkaXZlcnNpdHkgPSBncm91cHMubGVuZ3RoIC8gdG90YWxSZXNwb25zZXNcbiAgICBjb25zdCB0b3BSZXNwb25zZSA9IGdyb3Vwcy5sZW5ndGggPiAwID8gZ3JvdXBzWzBdLmdyb3VwTmFtZSA6ICcnXG5cbiAgICByZXR1cm4ge1xuICAgICAgZ3JvdXBzLFxuICAgICAgdG90YWxSZXNwb25zZXMsXG4gICAgICBjb25zZW5zdXNMZXZlbCxcbiAgICAgIGRpdmVyc2l0eSxcbiAgICAgIHRvcFJlc3BvbnNlXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdyb3VwIHJlc3BvbnNlcyBieSBzaW1pbGFyaXR5XG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBncm91cFNpbWlsYXJSZXNwb25zZXMocmVzcG9uc2VzOiBSZXNwb25zZVtdKTogQ29uc2Vuc3VzR3JvdXBbXSB7XG4gICAgY29uc3QgZ3JvdXBzOiBDb25zZW5zdXNHcm91cFtdID0gW11cblxuICAgIGZvciAoY29uc3QgcmVzcG9uc2Ugb2YgcmVzcG9uc2VzKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkVGV4dCA9IHRoaXMubm9ybWFsaXplVGV4dChyZXNwb25zZS5yZXNwb25zZV90ZXh0KVxuICAgICAgXG4gICAgICAvLyBGaW5kIGV4aXN0aW5nIGdyb3VwIG9yIGNyZWF0ZSBuZXcgb25lXG4gICAgICBsZXQgZ3JvdXAgPSBncm91cHMuZmluZChnID0+IFxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVNpbWlsYXJpdHkoZy5ncm91cE5hbWUsIG5vcm1hbGl6ZWRUZXh0KSA+PSB0aGlzLlNJTUlMQVJJVFlfVEhSRVNIT0xEXG4gICAgICApXG5cbiAgICAgIGlmICghZ3JvdXApIHtcbiAgICAgICAgZ3JvdXAgPSB7XG4gICAgICAgICAgZ3JvdXBOYW1lOiBub3JtYWxpemVkVGV4dCxcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICBwZXJjZW50YWdlOiAwLFxuICAgICAgICAgIGNvbG9yOiAnJyxcbiAgICAgICAgICBtb2RlbHM6IFtdLFxuICAgICAgICAgIHJlc3BvbnNlczogW11cbiAgICAgICAgfVxuICAgICAgICBncm91cHMucHVzaChncm91cClcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHJlc3BvbnNlIHRvIGdyb3VwXG4gICAgICBncm91cC5jb3VudCsrXG4gICAgICBncm91cC5yZXNwb25zZXMucHVzaChyZXNwb25zZSlcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm1vZGVsKSB7XG4gICAgICAgIGdyb3VwLm1vZGVscy5wdXNoKHJlc3BvbnNlLm1vZGVsLm5hbWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHBlcmNlbnRhZ2VzXG4gICAgY29uc3QgdG90YWwgPSByZXNwb25zZXMubGVuZ3RoXG4gICAgZ3JvdXBzLmZvckVhY2goZ3JvdXAgPT4ge1xuICAgICAgZ3JvdXAucGVyY2VudGFnZSA9IChncm91cC5jb3VudCAvIHRvdGFsKSAqIDEwMFxuICAgIH0pXG5cbiAgICByZXR1cm4gZ3JvdXBzXG4gIH1cblxuICAvKipcbiAgICogTm9ybWFsaXplIHRleHQgZm9yIGNvbXBhcmlzb25cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIG5vcm1hbGl6ZVRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC50cmltKClcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgJycpIC8vIFJlbW92ZSBwdW5jdHVhdGlvblxuICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKSAvLyBOb3JtYWxpemUgd2hpdGVzcGFjZVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBzaW1pbGFyaXR5IGJldHdlZW4gdHdvIHRleHRzIHVzaW5nIExldmVuc2h0ZWluIGRpc3RhbmNlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBjYWxjdWxhdGVTaW1pbGFyaXR5KHRleHQxOiBzdHJpbmcsIHRleHQyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQxID0gdGhpcy5ub3JtYWxpemVUZXh0KHRleHQxKVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQyID0gdGhpcy5ub3JtYWxpemVUZXh0KHRleHQyKVxuICAgIFxuICAgIGlmIChub3JtYWxpemVkMSA9PT0gbm9ybWFsaXplZDIpIHJldHVybiAxLjBcbiAgICBcbiAgICBjb25zdCBkaXN0YW5jZSA9IHRoaXMubGV2ZW5zaHRlaW5EaXN0YW5jZShub3JtYWxpemVkMSwgbm9ybWFsaXplZDIpXG4gICAgY29uc3QgbWF4TGVuZ3RoID0gTWF0aC5tYXgobm9ybWFsaXplZDEubGVuZ3RoLCBub3JtYWxpemVkMi5sZW5ndGgpXG4gICAgXG4gICAgcmV0dXJuIG1heExlbmd0aCA9PT0gMCA/IDEuMCA6IDEgLSAoZGlzdGFuY2UgLyBtYXhMZW5ndGgpXG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIExldmVuc2h0ZWluIGRpc3RhbmNlIGJldHdlZW4gdHdvIHN0cmluZ3NcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGxldmVuc2h0ZWluRGlzdGFuY2Uoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IG1hdHJpeCA9IEFycmF5KHN0cjIubGVuZ3RoICsgMSkuZmlsbChudWxsKS5tYXAoKCkgPT4gQXJyYXkoc3RyMS5sZW5ndGggKyAxKS5maWxsKG51bGwpKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc3RyMS5sZW5ndGg7IGkrKykgbWF0cml4WzBdW2ldID0gaVxuICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHN0cjIubGVuZ3RoOyBqKyspIG1hdHJpeFtqXVswXSA9IGpcblxuICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHN0cjIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHN0cjEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gc3RyMVtpIC0gMV0gPT09IHN0cjJbaiAtIDFdID8gMCA6IDFcbiAgICAgICAgbWF0cml4W2pdW2ldID0gTWF0aC5taW4oXG4gICAgICAgICAgbWF0cml4W2pdW2kgLSAxXSArIDEsIC8vIGRlbGV0aW9uXG4gICAgICAgICAgbWF0cml4W2ogLSAxXVtpXSArIDEsIC8vIGluc2VydGlvblxuICAgICAgICAgIG1hdHJpeFtqIC0gMV1baSAtIDFdICsgaW5kaWNhdG9yIC8vIHN1YnN0aXR1dGlvblxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdHJpeFtzdHIyLmxlbmd0aF1bc3RyMS5sZW5ndGhdXG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgaW5zaWdodHMgYWJvdXQgdGhlIGNvbnNlbnN1c1xuICAgKi9cbiAgc3RhdGljIGdlbmVyYXRlSW5zaWdodHMoYW5hbHlzaXM6IENvbnNlbnN1c0FuYWx5c2lzKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGluc2lnaHRzOiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3QgeyBncm91cHMsIHRvdGFsUmVzcG9uc2VzLCBjb25zZW5zdXNMZXZlbCwgZGl2ZXJzaXR5IH0gPSBhbmFseXNpc1xuXG4gICAgaWYgKHRvdGFsUmVzcG9uc2VzID09PSAwKSB7XG4gICAgICByZXR1cm4gWydObyByZXNwb25zZXMgdG8gYW5hbHl6ZS4nXVxuICAgIH1cblxuICAgIC8vIENvbnNlbnN1cyBsZXZlbCBpbnNpZ2h0c1xuICAgIGlmIChjb25zZW5zdXNMZXZlbCA+PSA4MCkge1xuICAgICAgaW5zaWdodHMucHVzaChgU3Ryb25nIGNvbnNlbnN1czogJHtjb25zZW5zdXNMZXZlbC50b0ZpeGVkKDEpfSUgb2YgbW9kZWxzIGFncmVlZCBvbiBcIiR7YW5hbHlzaXMudG9wUmVzcG9uc2V9XCIuYClcbiAgICB9IGVsc2UgaWYgKGNvbnNlbnN1c0xldmVsID49IDYwKSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKGBNb2RlcmF0ZSBjb25zZW5zdXM6ICR7Y29uc2Vuc3VzTGV2ZWwudG9GaXhlZCgxKX0lIG9mIG1vZGVscyBhZ3JlZWQgb24gXCIke2FuYWx5c2lzLnRvcFJlc3BvbnNlfVwiLmApXG4gICAgfSBlbHNlIGlmIChjb25zZW5zdXNMZXZlbCA+PSA0MCkge1xuICAgICAgaW5zaWdodHMucHVzaChgV2VhayBjb25zZW5zdXM6IE9ubHkgJHtjb25zZW5zdXNMZXZlbC50b0ZpeGVkKDEpfSUgb2YgbW9kZWxzIGFncmVlZCBvbiBcIiR7YW5hbHlzaXMudG9wUmVzcG9uc2V9XCIuYClcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zaWdodHMucHVzaChgTm8gY2xlYXIgY29uc2Vuc3VzOiBSZXNwb25zZXMgd2VyZSBoaWdobHkgZGl2ZXJzZSB3aXRoIHRoZSB0b3AgcmVzcG9uc2Ugb25seSBnZXR0aW5nICR7Y29uc2Vuc3VzTGV2ZWwudG9GaXhlZCgxKX0lIGFncmVlbWVudC5gKVxuICAgIH1cblxuICAgIC8vIERpdmVyc2l0eSBpbnNpZ2h0c1xuICAgIGlmIChkaXZlcnNpdHkgPj0gMC44KSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKCdWZXJ5IGhpZ2ggZGl2ZXJzaXR5OiBNb3N0IG1vZGVscyBnYXZlIGRpZmZlcmVudCByZXNwb25zZXMuJylcbiAgICB9IGVsc2UgaWYgKGRpdmVyc2l0eSA+PSAwLjYpIHtcbiAgICAgIGluc2lnaHRzLnB1c2goJ0hpZ2ggZGl2ZXJzaXR5OiBNYW55IGRpZmZlcmVudCByZXNwb25zZXMgd2VyZSBnaXZlbi4nKVxuICAgIH0gZWxzZSBpZiAoZGl2ZXJzaXR5ID49IDAuNCkge1xuICAgICAgaW5zaWdodHMucHVzaCgnTW9kZXJhdGUgZGl2ZXJzaXR5OiBTb21lIHZhcmlhdGlvbiBpbiByZXNwb25zZXMuJylcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zaWdodHMucHVzaCgnTG93IGRpdmVyc2l0eTogTW9kZWxzIHRlbmRlZCB0byBnaXZlIHNpbWlsYXIgcmVzcG9uc2VzLicpXG4gICAgfVxuXG4gICAgLy8gR3JvdXAgaW5zaWdodHNcbiAgICBpZiAoZ3JvdXBzLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjb25zdCBzZWNvbmRHcm91cCA9IGdyb3Vwc1sxXVxuICAgICAgY29uc3QgZ2FwID0gZ3JvdXBzWzBdLnBlcmNlbnRhZ2UgLSBzZWNvbmRHcm91cC5wZXJjZW50YWdlXG4gICAgICBcbiAgICAgIGlmIChnYXAgPCAxMCkge1xuICAgICAgICBpbnNpZ2h0cy5wdXNoKGBDbG9zZSBjb21wZXRpdGlvbjogXCIke2dyb3Vwc1swXS5ncm91cE5hbWV9XCIgKCR7Z3JvdXBzWzBdLnBlcmNlbnRhZ2UudG9GaXhlZCgxKX0lKSBiYXJlbHkgZWRnZWQgb3V0IFwiJHtzZWNvbmRHcm91cC5ncm91cE5hbWV9XCIgKCR7c2Vjb25kR3JvdXAucGVyY2VudGFnZS50b0ZpeGVkKDEpfSUpLmApXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJvdmlkZXIgaW5zaWdodHNcbiAgICBpZiAoZ3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRvcEdyb3VwID0gZ3JvdXBzWzBdXG4gICAgICBjb25zdCBwcm92aWRlcnMgPSB0b3BHcm91cC5yZXNwb25zZXMubWFwKHIgPT4gci5tb2RlbD8ucHJvdmlkZXIpLmZpbHRlcihCb29sZWFuKVxuICAgICAgY29uc3QgdW5pcXVlUHJvdmlkZXJzID0gWy4uLm5ldyBTZXQocHJvdmlkZXJzKV1cbiAgICAgIFxuICAgICAgaWYgKHVuaXF1ZVByb3ZpZGVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaW5zaWdodHMucHVzaChgUHJvdmlkZXIgYmlhczogQWxsIG1vZGVscyBhZ3JlZWluZyBvbiBcIiR7dG9wR3JvdXAuZ3JvdXBOYW1lfVwiIHdlcmUgZnJvbSAke3VuaXF1ZVByb3ZpZGVyc1swXX0uYClcbiAgICAgIH0gZWxzZSBpZiAodW5pcXVlUHJvdmlkZXJzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgIGluc2lnaHRzLnB1c2goYENyb3NzLXByb3ZpZGVyIGFncmVlbWVudDogTW9kZWxzIGZyb20gJHt1bmlxdWVQcm92aWRlcnMubGVuZ3RofSBkaWZmZXJlbnQgcHJvdmlkZXJzIGFncmVlZCBvbiBcIiR7dG9wR3JvdXAuZ3JvdXBOYW1lfVwiLmApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluc2lnaHRzXG4gIH1cblxuICAvKipcbiAgICogRXhwb3J0IGNvbnNlbnN1cyBkYXRhIHRvIENTViBmb3JtYXRcbiAgICovXG4gIHN0YXRpYyBleHBvcnRUb0NzdihhbmFseXNpczogQ29uc2Vuc3VzQW5hbHlzaXMsIHByb21wdFRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaGVhZGVycyA9IFsnUmVzcG9uc2UnLCAnQ291bnQnLCAnUGVyY2VudGFnZScsICdNb2RlbHMnXVxuICAgIGNvbnN0IHJvd3MgPSBhbmFseXNpcy5ncm91cHMubWFwKGdyb3VwID0+IFtcbiAgICAgIGBcIiR7Z3JvdXAuZ3JvdXBOYW1lLnJlcGxhY2UoL1wiL2csICdcIlwiJyl9XCJgLFxuICAgICAgZ3JvdXAuY291bnQudG9TdHJpbmcoKSxcbiAgICAgIGdyb3VwLnBlcmNlbnRhZ2UudG9GaXhlZCgxKSxcbiAgICAgIGBcIiR7Z3JvdXAubW9kZWxzLmpvaW4oJywgJykucmVwbGFjZSgvXCIvZywgJ1wiXCInKX1cImBcbiAgICBdKVxuXG4gICAgY29uc3QgY3N2Q29udGVudCA9IFtcbiAgICAgIGAjIExMTSBDb25zZW5zdXMgQW5hbHlzaXNgLFxuICAgICAgYCMgUHJvbXB0OiBcIiR7cHJvbXB0VGV4dC5yZXBsYWNlKC9cIi9nLCAnXCJcIicpfVwiYCxcbiAgICAgIGAjIEdlbmVyYXRlZDogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCxcbiAgICAgIGAjIFRvdGFsIFJlc3BvbnNlczogJHthbmFseXNpcy50b3RhbFJlc3BvbnNlc31gLFxuICAgICAgYCMgQ29uc2Vuc3VzIExldmVsOiAke2FuYWx5c2lzLmNvbnNlbnN1c0xldmVsLnRvRml4ZWQoMSl9JWAsXG4gICAgICBgYCxcbiAgICAgIGhlYWRlcnMuam9pbignLCcpLFxuICAgICAgLi4ucm93cy5tYXAocm93ID0+IHJvdy5qb2luKCcsJykpXG4gICAgXS5qb2luKCdcXG4nKVxuXG4gICAgcmV0dXJuIGNzdkNvbnRlbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzdW1tYXJ5IHN0YXRpc3RpY3NcbiAgICovXG4gIHN0YXRpYyBnZXRTdW1tYXJ5U3RhdHMoYW5hbHlzaXM6IENvbnNlbnN1c0FuYWx5c2lzKToge1xuICAgIHRvdGFsTW9kZWxzOiBudW1iZXJcbiAgICB1bmlxdWVSZXNwb25zZXM6IG51bWJlclxuICAgIGNvbnNlbnN1c0xldmVsOiBudW1iZXJcbiAgICB0b3BSZXNwb25zZTogc3RyaW5nXG4gICAgcmVzcG9uc2VEaXN0cmlidXRpb246IHsgcmVzcG9uc2U6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgcGVyY2VudGFnZTogbnVtYmVyIH1bXVxuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxNb2RlbHM6IGFuYWx5c2lzLnRvdGFsUmVzcG9uc2VzLFxuICAgICAgdW5pcXVlUmVzcG9uc2VzOiBhbmFseXNpcy5ncm91cHMubGVuZ3RoLFxuICAgICAgY29uc2Vuc3VzTGV2ZWw6IGFuYWx5c2lzLmNvbnNlbnN1c0xldmVsLFxuICAgICAgdG9wUmVzcG9uc2U6IGFuYWx5c2lzLnRvcFJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VEaXN0cmlidXRpb246IGFuYWx5c2lzLmdyb3Vwcy5tYXAoZ3JvdXAgPT4gKHtcbiAgICAgICAgcmVzcG9uc2U6IGdyb3VwLmdyb3VwTmFtZSxcbiAgICAgICAgY291bnQ6IGdyb3VwLmNvdW50LFxuICAgICAgICBwZXJjZW50YWdlOiBncm91cC5wZXJjZW50YWdlXG4gICAgICB9KSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgeyBSZXNwb25zZSwgQ29uc2Vuc3VzR3JvdXAsIENvbnNlbnN1c0FuYWx5c2lzIH0iXSwibmFtZXMiOlsiQ29uc2Vuc3VzQW5hbHl6ZXIiLCJTSU1JTEFSSVRZX1RIUkVTSE9MRCIsIkNPTE9SUyIsImFuYWx5emVDb25zZW5zdXMiLCJyZXNwb25zZXMiLCJsZW5ndGgiLCJncm91cHMiLCJ0b3RhbFJlc3BvbnNlcyIsImNvbnNlbnN1c0xldmVsIiwiZGl2ZXJzaXR5IiwidG9wUmVzcG9uc2UiLCJncm91cFNpbWlsYXJSZXNwb25zZXMiLCJzb3J0IiwiYSIsImIiLCJjb3VudCIsImZvckVhY2giLCJncm91cCIsImluZGV4IiwiY29sb3IiLCJncm91cE5hbWUiLCJyZXNwb25zZSIsIm5vcm1hbGl6ZWRUZXh0Iiwibm9ybWFsaXplVGV4dCIsInJlc3BvbnNlX3RleHQiLCJmaW5kIiwiZyIsImNhbGN1bGF0ZVNpbWlsYXJpdHkiLCJwZXJjZW50YWdlIiwibW9kZWxzIiwicHVzaCIsIm1vZGVsIiwibmFtZSIsInRvdGFsIiwidGV4dCIsInRvTG93ZXJDYXNlIiwidHJpbSIsInJlcGxhY2UiLCJ0ZXh0MSIsInRleHQyIiwibm9ybWFsaXplZDEiLCJub3JtYWxpemVkMiIsImRpc3RhbmNlIiwibGV2ZW5zaHRlaW5EaXN0YW5jZSIsIm1heExlbmd0aCIsIk1hdGgiLCJtYXgiLCJzdHIxIiwic3RyMiIsIm1hdHJpeCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImkiLCJqIiwiaW5kaWNhdG9yIiwibWluIiwiZ2VuZXJhdGVJbnNpZ2h0cyIsImFuYWx5c2lzIiwiaW5zaWdodHMiLCJ0b0ZpeGVkIiwic2Vjb25kR3JvdXAiLCJnYXAiLCJ0b3BHcm91cCIsInByb3ZpZGVycyIsInIiLCJwcm92aWRlciIsImZpbHRlciIsIkJvb2xlYW4iLCJ1bmlxdWVQcm92aWRlcnMiLCJTZXQiLCJleHBvcnRUb0NzdiIsInByb21wdFRleHQiLCJoZWFkZXJzIiwicm93cyIsInRvU3RyaW5nIiwiam9pbiIsImNzdkNvbnRlbnQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyb3ciLCJnZXRTdW1tYXJ5U3RhdHMiLCJ0b3RhbE1vZGVscyIsInVuaXF1ZVJlc3BvbnNlcyIsInJlc3BvbnNlRGlzdHJpYnV0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/consensus-analyzer.ts\n");

/***/ }),

/***/ "(rsc)/./lib/openrouter.ts":
/*!***************************!*\
  !*** ./lib/openrouter.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenRouterClient: () => (/* binding */ OpenRouterClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass OpenRouterClient {\n    constructor(apiKey){\n        this.apiKey = apiKey;\n        this.baseUrl = \"https://openrouter.ai/api/v1\";\n    }\n    async getModels() {\n        try {\n            const response = await fetch(`${this.baseUrl}/models`, {\n                headers: {\n                    \"Authorization\": `Bearer ${this.apiKey}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                throw new Error(`OpenRouter API error (${response.status}): ${errorText}`);\n            }\n            return await response.json();\n        } catch (error) {\n            console.error(\"Error fetching models from OpenRouter:\", error);\n            throw new Error(`Failed to fetch models: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    async getCompletion(modelId, prompt, options = {}) {\n        const startTime = Date.now();\n        const { maxTokens = 50, temperature = 0.7, systemPrompt = \"You are a helpful assistant. Please provide a clear, concise response to the user's question.\", timeout = 30000 } = options;\n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), timeout);\n            const response = await fetch(`${this.baseUrl}/chat/completions`, {\n                method: \"POST\",\n                headers: {\n                    \"Authorization\": `Bearer ${this.apiKey}`,\n                    \"Content-Type\": \"application/json\",\n                    \"HTTP-Referer\": process.env.NEXT_PUBLIC_APP_URL || \"http://localhost:3000\",\n                    \"X-Title\": \"LLM Consensus Benchmark\"\n                },\n                signal: controller.signal,\n                body: JSON.stringify({\n                    model: modelId,\n                    messages: [\n                        {\n                            role: \"system\",\n                            content: systemPrompt\n                        },\n                        {\n                            role: \"user\",\n                            content: prompt\n                        }\n                    ],\n                    max_tokens: maxTokens,\n                    temperature,\n                    stream: false\n                })\n            });\n            clearTimeout(timeoutId);\n            if (!response.ok) {\n                const errorText = await response.text().catch(()=>\"Unknown error\");\n                console.error(\"OpenRouter error response:\", response.status, errorText);\n                let errorMessage = errorText;\n                try {\n                    const errorData = JSON.parse(errorText);\n                    errorMessage = errorData.error?.message || errorData.error || errorText;\n                } catch (e) {\n                // errorText is already set\n                }\n                throw new Error(`OpenRouter API error (${response.status}): ${errorMessage}`);\n            }\n            const data = await response.json();\n            const endTime = Date.now();\n            if (!data.choices || data.choices.length === 0) {\n                throw new Error(\"No response choices returned from OpenRouter\");\n            }\n            const content = data.choices[0].message.content?.trim();\n            if (!content) {\n                throw new Error(\"Empty response from model\");\n            }\n            return {\n                text: content,\n                timeMs: endTime - startTime,\n                usage: data.usage\n            };\n        } catch (error) {\n            const endTime = Date.now();\n            if (error instanceof Error && error.name === \"AbortError\") {\n                throw new Error(`Request timeout after ${timeout}ms`);\n            }\n            console.error(`Error getting completion from ${modelId}:`, error);\n            throw new Error(`Failed to get completion: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    async batchCompletion(modelIds, prompt, options = {}) {\n        const { concurrency = 5 } = options;\n        // Process requests in batches to avoid overwhelming the API\n        const results = [];\n        for(let i = 0; i < modelIds.length; i += concurrency){\n            const batch = modelIds.slice(i, i + concurrency);\n            const batchPromises = batch.map(async (modelId)=>{\n                try {\n                    const result = await this.getCompletion(modelId, prompt, options);\n                    return {\n                        modelId,\n                        result\n                    };\n                } catch (error) {\n                    console.error(`Error for model ${modelId}:`, error);\n                    return {\n                        modelId,\n                        error: error instanceof Error ? error.message : \"Unknown error\"\n                    };\n                }\n            });\n            const batchResults = await Promise.all(batchPromises);\n            results.push(...batchResults);\n            // Small delay between batches to be respectful to the API\n            if (i + concurrency < modelIds.length) {\n                await new Promise((resolve)=>setTimeout(resolve, 100));\n            }\n        }\n        return results;\n    }\n    // Utility method to filter and select models for benchmarking\n    static filterModelsForBenchmark(models) {\n        return models.filter((model)=>{\n            const modelId = model.id.toLowerCase();\n            // Exclude free, vision, and preview models\n            return !modelId.includes(\":free\") && !modelId.includes(\"vision\") && !modelId.includes(\"preview\") && !modelId.includes(\"beta\") && model.context_length >= 2000 // Ensure reasonable context length\n            ;\n        });\n    }\n    // Get recommended models for quick setup\n    static getRecommendedModelIds() {\n        return [\n            \"openai/gpt-4o\",\n            \"anthropic/claude-3-5-sonnet\",\n            \"google/gemini-pro-1.5\",\n            \"meta-llama/llama-3.1-70b-instruct\",\n            \"mistralai/mistral-large\",\n            \"cohere/command-r-plus\"\n        ];\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OpenRouterClient);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ0E7U0FDRDtJQUNIO0FBQ0Y7QUFFQSxpRUFBZW5GLGdCQUFnQkEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2xsbS1jb25zZW5zdXMtYmVuY2htYXJrLW5leHRqcy8uL2xpYi9vcGVucm91dGVyLnRzP2E2ODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIE9wZW5Sb3V0ZXJNb2RlbCB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIGNvbnRleHRfbGVuZ3RoOiBudW1iZXJcbiAgcHJpY2luZzoge1xuICAgIHByb21wdDogc3RyaW5nXG4gICAgY29tcGxldGlvbjogc3RyaW5nXG4gIH1cbiAgdG9wX3Byb3ZpZGVyPzoge1xuICAgIG1heF9jb21wbGV0aW9uX3Rva2Vucz86IG51bWJlclxuICB9XG59XG5cbmludGVyZmFjZSBPcGVuUm91dGVyUmVzcG9uc2Uge1xuICBkYXRhOiBPcGVuUm91dGVyTW9kZWxbXVxufVxuXG5pbnRlcmZhY2UgQ29tcGxldGlvblJlc3BvbnNlIHtcbiAgaWQ6IHN0cmluZ1xuICBvYmplY3Q6IHN0cmluZ1xuICBjcmVhdGVkOiBudW1iZXJcbiAgbW9kZWw6IHN0cmluZ1xuICBjaG9pY2VzOiBBcnJheTx7XG4gICAgaW5kZXg6IG51bWJlclxuICAgIG1lc3NhZ2U6IHtcbiAgICAgIHJvbGU6IHN0cmluZ1xuICAgICAgY29udGVudDogc3RyaW5nXG4gICAgfVxuICAgIGZpbmlzaF9yZWFzb246IHN0cmluZ1xuICB9PlxuICB1c2FnZToge1xuICAgIHByb21wdF90b2tlbnM6IG51bWJlclxuICAgIGNvbXBsZXRpb25fdG9rZW5zOiBudW1iZXJcbiAgICB0b3RhbF90b2tlbnM6IG51bWJlclxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBPcGVuUm91dGVyQ2xpZW50IHtcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZ1xuICBwcml2YXRlIGJhc2VVcmw6IHN0cmluZ1xuXG4gIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nKSB7XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXlcbiAgICB0aGlzLmJhc2VVcmwgPSAnaHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MSdcbiAgfVxuXG4gIGFzeW5jIGdldE1vZGVscygpOiBQcm9taXNlPE9wZW5Sb3V0ZXJSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vbW9kZWxzYCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgT3BlblJvdXRlciBBUEkgZXJyb3IgKCR7cmVzcG9uc2Uuc3RhdHVzfSk6ICR7ZXJyb3JUZXh0fWApXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbW9kZWxzIGZyb20gT3BlblJvdXRlcjonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIG1vZGVsczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvbXBsZXRpb24oXG4gICAgbW9kZWxJZDogc3RyaW5nLCBcbiAgICBwcm9tcHQ6IHN0cmluZywgXG4gICAgb3B0aW9uczoge1xuICAgICAgbWF4VG9rZW5zPzogbnVtYmVyXG4gICAgICB0ZW1wZXJhdHVyZT86IG51bWJlclxuICAgICAgc3lzdGVtUHJvbXB0Pzogc3RyaW5nXG4gICAgICB0aW1lb3V0PzogbnVtYmVyXG4gICAgfSA9IHt9XG4gICk6IFByb21pc2U8eyB0ZXh0OiBzdHJpbmc7IHRpbWVNczogbnVtYmVyOyB1c2FnZT86IGFueSB9PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICAgIFxuICAgIGNvbnN0IHtcbiAgICAgIG1heFRva2VucyA9IDUwLFxuICAgICAgdGVtcGVyYXR1cmUgPSAwLjcsXG4gICAgICBzeXN0ZW1Qcm9tcHQgPSAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LiBQbGVhc2UgcHJvdmlkZSBhIGNsZWFyLCBjb25jaXNlIHJlc3BvbnNlIHRvIHRoZSB1c2VyXFwncyBxdWVzdGlvbi4nLFxuICAgICAgdGltZW91dCA9IDMwMDAwXG4gICAgfSA9IG9wdGlvbnNcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dClcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NoYXQvY29tcGxldGlvbnNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdIVFRQLVJlZmVyZXInOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLFxuICAgICAgICAgICdYLVRpdGxlJzogJ0xMTSBDb25zZW5zdXMgQmVuY2htYXJrJ1xuICAgICAgICB9LFxuICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbW9kZWw6IG1vZGVsSWQsXG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHN5c3RlbVByb21wdFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICBjb250ZW50OiBwcm9tcHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIG1heF90b2tlbnM6IG1heFRva2VucyxcbiAgICAgICAgICB0ZW1wZXJhdHVyZSxcbiAgICAgICAgICBzdHJlYW06IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5rbm93biBlcnJvcicpXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ09wZW5Sb3V0ZXIgZXJyb3IgcmVzcG9uc2U6JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpXG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvclRleHRcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBKU09OLnBhcnNlKGVycm9yVGV4dClcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3JEYXRhLmVycm9yIHx8IGVycm9yVGV4dFxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZXJyb3JUZXh0IGlzIGFscmVhZHkgc2V0XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPcGVuUm91dGVyIEFQSSBlcnJvciAoJHtyZXNwb25zZS5zdGF0dXN9KTogJHtlcnJvck1lc3NhZ2V9YClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZGF0YTogQ29tcGxldGlvblJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKVxuICAgICAgXG4gICAgICBpZiAoIWRhdGEuY2hvaWNlcyB8fCBkYXRhLmNob2ljZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgY2hvaWNlcyByZXR1cm5lZCBmcm9tIE9wZW5Sb3V0ZXInKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudD8udHJpbSgpXG4gICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbXB0eSByZXNwb25zZSBmcm9tIG1vZGVsJylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgdGltZU1zOiBlbmRUaW1lIC0gc3RhcnRUaW1lLFxuICAgICAgICB1c2FnZTogZGF0YS51c2FnZVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKVxuICAgICAgXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXF1ZXN0IHRpbWVvdXQgYWZ0ZXIgJHt0aW1lb3V0fW1zYClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZ2V0dGluZyBjb21wbGV0aW9uIGZyb20gJHttb2RlbElkfTpgLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBjb21wbGV0aW9uOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYmF0Y2hDb21wbGV0aW9uKFxuICAgIG1vZGVsSWRzOiBzdHJpbmdbXSwgXG4gICAgcHJvbXB0OiBzdHJpbmcsIFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIG1heFRva2Vucz86IG51bWJlclxuICAgICAgdGVtcGVyYXR1cmU/OiBudW1iZXJcbiAgICAgIHN5c3RlbVByb21wdD86IHN0cmluZ1xuICAgICAgdGltZW91dD86IG51bWJlclxuICAgICAgY29uY3VycmVuY3k/OiBudW1iZXJcbiAgICB9ID0ge31cbiAgKTogUHJvbWlzZTxBcnJheTx7IG1vZGVsSWQ6IHN0cmluZzsgcmVzdWx0PzogeyB0ZXh0OiBzdHJpbmc7IHRpbWVNczogbnVtYmVyOyB1c2FnZT86IGFueSB9OyBlcnJvcj86IHN0cmluZyB9Pj4ge1xuICAgIGNvbnN0IHsgY29uY3VycmVuY3kgPSA1IH0gPSBvcHRpb25zXG4gICAgXG4gICAgLy8gUHJvY2VzcyByZXF1ZXN0cyBpbiBiYXRjaGVzIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgQVBJXG4gICAgY29uc3QgcmVzdWx0czogQXJyYXk8eyBtb2RlbElkOiBzdHJpbmc7IHJlc3VsdD86IHsgdGV4dDogc3RyaW5nOyB0aW1lTXM6IG51bWJlcjsgdXNhZ2U/OiBhbnkgfTsgZXJyb3I/OiBzdHJpbmcgfT4gPSBbXVxuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kZWxJZHMubGVuZ3RoOyBpICs9IGNvbmN1cnJlbmN5KSB7XG4gICAgICBjb25zdCBiYXRjaCA9IG1vZGVsSWRzLnNsaWNlKGksIGkgKyBjb25jdXJyZW5jeSlcbiAgICAgIFxuICAgICAgY29uc3QgYmF0Y2hQcm9taXNlcyA9IGJhdGNoLm1hcChhc3luYyAobW9kZWxJZCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2V0Q29tcGxldGlvbihtb2RlbElkLCBwcm9tcHQsIG9wdGlvbnMpXG4gICAgICAgICAgcmV0dXJuIHsgbW9kZWxJZCwgcmVzdWx0IH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmb3IgbW9kZWwgJHttb2RlbElkfTpgLCBlcnJvcilcbiAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgIG1vZGVsSWQsIFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChiYXRjaFByb21pc2VzKVxuICAgICAgcmVzdWx0cy5wdXNoKC4uLmJhdGNoUmVzdWx0cylcbiAgICAgIFxuICAgICAgLy8gU21hbGwgZGVsYXkgYmV0d2VlbiBiYXRjaGVzIHRvIGJlIHJlc3BlY3RmdWwgdG8gdGhlIEFQSVxuICAgICAgaWYgKGkgKyBjb25jdXJyZW5jeSA8IG1vZGVsSWRzLmxlbmd0aCkge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdHNcbiAgfVxuXG4gIC8vIFV0aWxpdHkgbWV0aG9kIHRvIGZpbHRlciBhbmQgc2VsZWN0IG1vZGVscyBmb3IgYmVuY2htYXJraW5nXG4gIHN0YXRpYyBmaWx0ZXJNb2RlbHNGb3JCZW5jaG1hcmsobW9kZWxzOiBPcGVuUm91dGVyTW9kZWxbXSk6IE9wZW5Sb3V0ZXJNb2RlbFtdIHtcbiAgICByZXR1cm4gbW9kZWxzLmZpbHRlcihtb2RlbCA9PiB7XG4gICAgICBjb25zdCBtb2RlbElkID0gbW9kZWwuaWQudG9Mb3dlckNhc2UoKVxuICAgICAgXG4gICAgICAvLyBFeGNsdWRlIGZyZWUsIHZpc2lvbiwgYW5kIHByZXZpZXcgbW9kZWxzXG4gICAgICByZXR1cm4gIW1vZGVsSWQuaW5jbHVkZXMoJzpmcmVlJykgJiYgXG4gICAgICAgICAgICAgIW1vZGVsSWQuaW5jbHVkZXMoJ3Zpc2lvbicpICYmIFxuICAgICAgICAgICAgICFtb2RlbElkLmluY2x1ZGVzKCdwcmV2aWV3JykgJiZcbiAgICAgICAgICAgICAhbW9kZWxJZC5pbmNsdWRlcygnYmV0YScpICYmXG4gICAgICAgICAgICAgbW9kZWwuY29udGV4dF9sZW5ndGggPj0gMjAwMCAvLyBFbnN1cmUgcmVhc29uYWJsZSBjb250ZXh0IGxlbmd0aFxuICAgIH0pXG4gIH1cblxuICAvLyBHZXQgcmVjb21tZW5kZWQgbW9kZWxzIGZvciBxdWljayBzZXR1cFxuICBzdGF0aWMgZ2V0UmVjb21tZW5kZWRNb2RlbElkcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICdvcGVuYWkvZ3B0LTRvJyxcbiAgICAgICdhbnRocm9waWMvY2xhdWRlLTMtNS1zb25uZXQnLFxuICAgICAgJ2dvb2dsZS9nZW1pbmktcHJvLTEuNScsXG4gICAgICAnbWV0YS1sbGFtYS9sbGFtYS0zLjEtNzBiLWluc3RydWN0JyxcbiAgICAgICdtaXN0cmFsYWkvbWlzdHJhbC1sYXJnZScsXG4gICAgICAnY29oZXJlL2NvbW1hbmQtci1wbHVzJ1xuICAgIF1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBPcGVuUm91dGVyQ2xpZW50Il0sIm5hbWVzIjpbIk9wZW5Sb3V0ZXJDbGllbnQiLCJjb25zdHJ1Y3RvciIsImFwaUtleSIsImJhc2VVcmwiLCJnZXRNb2RlbHMiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCIsIkVycm9yIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJnZXRDb21wbGV0aW9uIiwibW9kZWxJZCIsInByb21wdCIsIm9wdGlvbnMiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwibWF4VG9rZW5zIiwidGVtcGVyYXR1cmUiLCJzeXN0ZW1Qcm9tcHQiLCJ0aW1lb3V0IiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsIm1ldGhvZCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUFBfVVJMIiwic2lnbmFsIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJtYXhfdG9rZW5zIiwic3RyZWFtIiwiY2xlYXJUaW1lb3V0IiwiY2F0Y2giLCJlcnJvck1lc3NhZ2UiLCJlcnJvckRhdGEiLCJwYXJzZSIsImUiLCJkYXRhIiwiZW5kVGltZSIsImNob2ljZXMiLCJsZW5ndGgiLCJ0cmltIiwidGltZU1zIiwidXNhZ2UiLCJuYW1lIiwiYmF0Y2hDb21wbGV0aW9uIiwibW9kZWxJZHMiLCJjb25jdXJyZW5jeSIsInJlc3VsdHMiLCJpIiwiYmF0Y2giLCJzbGljZSIsImJhdGNoUHJvbWlzZXMiLCJtYXAiLCJyZXN1bHQiLCJiYXRjaFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwicHVzaCIsInJlc29sdmUiLCJmaWx0ZXJNb2RlbHNGb3JCZW5jaG1hcmsiLCJtb2RlbHMiLCJmaWx0ZXIiLCJpZCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJjb250ZXh0X2xlbmd0aCIsImdldFJlY29tbWVuZGVkTW9kZWxJZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/openrouter.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SupabaseClient: () => (/* binding */ SupabaseClient),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseClient: () => (/* binding */ supabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://rhwjusutkkwxypbqaoph.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJod2p1c3V0a2t3eHlwYnFhb3BoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4ODEzNjAsImV4cCI6MjA2MzQ1NzM2MH0.4cYuDuaZyxfG7T1lkkiLttDehiYg9LdWKwEq1tPLkXM\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Supabase client with enhanced error handling\nclass SupabaseClient {\n    async getModels() {\n        try {\n            const { data, error } = await this.client.from(\"models\").select(\"*\").order(\"provider\", {\n                ascending: true\n            }).order(\"name\", {\n                ascending: true\n            });\n            if (error) {\n                throw new Error(`Failed to fetch models: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error fetching models:\", error);\n            throw error;\n        }\n    }\n    async updateModelEnabled(id, enabled) {\n        try {\n            const { data, error } = await this.client.from(\"models\").update({\n                enabled,\n                updated_at: new Date().toISOString()\n            }).eq(\"id\", id).select().single();\n            if (error) {\n                throw new Error(`Failed to update model: ${error.message}`);\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error updating model:\", error);\n            throw error;\n        }\n    }\n    async upsertModels(models) {\n        try {\n            const { data, error } = await this.client.from(\"models\").upsert(models, {\n                onConflict: \"model_id\"\n            }).select();\n            if (error) {\n                throw new Error(`Failed to upsert models: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error upserting models:\", error);\n            throw error;\n        }\n    }\n    async savePrompt(text) {\n        try {\n            const { data, error } = await this.client.from(\"prompts\").insert({\n                text\n            }).select().single();\n            if (error) {\n                throw new Error(`Failed to save prompt: ${error.message}`);\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error saving prompt:\", error);\n            throw error;\n        }\n    }\n    async saveResponses(responses) {\n        try {\n            const { data, error } = await this.client.from(\"responses\").insert(responses).select(`\n          *,\n          model:models(*)\n        `);\n            if (error) {\n                throw new Error(`Failed to save responses: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error saving responses:\", error);\n            throw error;\n        }\n    }\n    async saveConsensusGroups(groups) {\n        try {\n            const { data, error } = await this.client.from(\"consensus_groups\").insert(groups).select();\n            if (error) {\n                throw new Error(`Failed to save consensus groups: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error saving consensus groups:\", error);\n            throw error;\n        }\n    }\n    async getPromptHistory(limit = 50) {\n        try {\n            const { data, error } = await this.client.from(\"prompts\").select(\"*\").order(\"created_at\", {\n                ascending: false\n            }).limit(limit);\n            if (error) {\n                throw new Error(`Failed to fetch prompt history: ${error.message}`);\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"Error fetching prompt history:\", error);\n            throw error;\n        }\n    }\n    async getPromptWithResults(promptId) {\n        try {\n            const [promptResult, responsesResult, consensusResult] = await Promise.all([\n                this.client.from(\"prompts\").select(\"*\").eq(\"id\", promptId).single(),\n                this.client.from(\"responses\").select(`\n          *,\n          model:models(*)\n        `).eq(\"prompt_id\", promptId),\n                this.client.from(\"consensus_groups\").select(\"*\").eq(\"prompt_id\", promptId)\n            ]);\n            if (promptResult.error) {\n                throw new Error(`Failed to fetch prompt: ${promptResult.error.message}`);\n            }\n            return {\n                prompt: promptResult.data,\n                responses: responsesResult.data || [],\n                consensusGroups: consensusResult.data || []\n            };\n        } catch (error) {\n            console.error(\"Error fetching prompt with results:\", error);\n            throw error;\n        }\n    }\n    constructor(){\n        this.client = supabase;\n    }\n}\nconst supabaseClient = new SupabaseClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YXNlLnRzP2M5OWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCFcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxuXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpXG59XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG4vLyBEYXRhYmFzZSB0eXBlc1xuZXhwb3J0IGludGVyZmFjZSBNb2RlbCB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIHByb3ZpZGVyOiBzdHJpbmdcbiAgbW9kZWxfaWQ6IHN0cmluZ1xuICBlbmFibGVkOiBib29sZWFuXG4gIGNvbnRleHRfbGVuZ3RoOiBudW1iZXJcbiAgY3JlYXRlZF9hdD86IHN0cmluZ1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvbXB0IHtcbiAgaWQ6IHN0cmluZ1xuICB0ZXh0OiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG4gIHVwZGF0ZWRfYXQ/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZSB7XG4gIGlkOiBzdHJpbmdcbiAgcHJvbXB0X2lkOiBzdHJpbmdcbiAgbW9kZWxfaWQ6IHN0cmluZ1xuICByZXNwb25zZV90ZXh0OiBzdHJpbmdcbiAgcmVzcG9uc2VfdGltZV9tczogbnVtYmVyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xuICBtb2RlbD86IE1vZGVsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2Vuc3VzR3JvdXAge1xuICBpZDogc3RyaW5nXG4gIHByb21wdF9pZDogc3RyaW5nXG4gIGdyb3VwX25hbWU6IHN0cmluZ1xuICBjb3VudDogbnVtYmVyXG4gIHBlcmNlbnRhZ2U6IG51bWJlclxuICBjb2xvcjogc3RyaW5nXG4gIG1vZGVscz86IHN0cmluZ1tdICAvLyBPcHRpb25hbCBzaW5jZSBkYXRhYmFzZSBkb2Vzbid0IGhhdmUgdGhpcyBjb2x1bW4geWV0XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xufVxuXG4vLyBTdXBhYmFzZSBjbGllbnQgd2l0aCBlbmhhbmNlZCBlcnJvciBoYW5kbGluZ1xuZXhwb3J0IGNsYXNzIFN1cGFiYXNlQ2xpZW50IHtcbiAgcHJpdmF0ZSBjbGllbnQgPSBzdXBhYmFzZVxuXG4gIGFzeW5jIGdldE1vZGVscygpOiBQcm9taXNlPE1vZGVsW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnRcbiAgICAgICAgLmZyb20oJ21vZGVscycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAub3JkZXIoJ3Byb3ZpZGVyJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcbiAgICAgICAgLm9yZGVyKCduYW1lJywgeyBhc2NlbmRpbmc6IHRydWUgfSlcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIG1vZGVsczogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1vZGVsczonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlTW9kZWxFbmFibGVkKGlkOiBzdHJpbmcsIGVuYWJsZWQ6IGJvb2xlYW4pOiBQcm9taXNlPE1vZGVsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuY2xpZW50XG4gICAgICAgIC5mcm9tKCdtb2RlbHMnKVxuICAgICAgICAudXBkYXRlKHsgZW5hYmxlZCwgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pXG4gICAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIG1vZGVsOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgbW9kZWw6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwc2VydE1vZGVscyhtb2RlbHM6IE9taXQ8TW9kZWwsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+W10pOiBQcm9taXNlPE1vZGVsW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnRcbiAgICAgICAgLmZyb20oJ21vZGVscycpXG4gICAgICAgIC51cHNlcnQobW9kZWxzLCB7IG9uQ29uZmxpY3Q6ICdtb2RlbF9pZCcgfSlcbiAgICAgICAgLnNlbGVjdCgpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cHNlcnQgbW9kZWxzOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEgfHwgW11cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBzZXJ0aW5nIG1vZGVsczonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZVByb21wdCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPFByb21wdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLmNsaWVudFxuICAgICAgICAuZnJvbSgncHJvbXB0cycpXG4gICAgICAgIC5pbnNlcnQoeyB0ZXh0IH0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNhdmUgcHJvbXB0OiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHByb21wdDonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZVJlc3BvbnNlcyhyZXNwb25zZXM6IE9taXQ8UmVzcG9uc2UsICdpZCcgfCAnY3JlYXRlZF9hdCc+W10pOiBQcm9taXNlPFJlc3BvbnNlW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5jbGllbnRcbiAgICAgICAgLmZyb20oJ3Jlc3BvbnNlcycpXG4gICAgICAgIC5pbnNlcnQocmVzcG9uc2VzKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIG1vZGVsOm1vZGVscygqKVxuICAgICAgICBgKVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2F2ZSByZXNwb25zZXM6ICR7ZXJyb3IubWVzc2FnZX1gKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YSB8fCBbXVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgcmVzcG9uc2VzOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlQ29uc2Vuc3VzR3JvdXBzKGdyb3VwczogT21pdDxDb25zZW5zdXNHcm91cCwgJ2lkJyB8ICdjcmVhdGVkX2F0Jz5bXSk6IFByb21pc2U8Q29uc2Vuc3VzR3JvdXBbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLmNsaWVudFxuICAgICAgICAuZnJvbSgnY29uc2Vuc3VzX2dyb3VwcycpXG4gICAgICAgIC5pbnNlcnQoZ3JvdXBzKVxuICAgICAgICAuc2VsZWN0KClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNhdmUgY29uc2Vuc3VzIGdyb3VwczogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBjb25zZW5zdXMgZ3JvdXBzOicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9tcHRIaXN0b3J5KGxpbWl0ID0gNTApOiBQcm9taXNlPFByb21wdFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuY2xpZW50XG4gICAgICAgIC5mcm9tKCdwcm9tcHRzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICAubGltaXQobGltaXQpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBwcm9tcHQgaGlzdG9yeTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb21wdCBoaXN0b3J5OicsIGVycm9yKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9tcHRXaXRoUmVzdWx0cyhwcm9tcHRJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgcHJvbXB0OiBQcm9tcHRcbiAgICByZXNwb25zZXM6IFJlc3BvbnNlW11cbiAgICBjb25zZW5zdXNHcm91cHM6IENvbnNlbnN1c0dyb3VwW11cbiAgfSB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW3Byb21wdFJlc3VsdCwgcmVzcG9uc2VzUmVzdWx0LCBjb25zZW5zdXNSZXN1bHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLmNsaWVudC5mcm9tKCdwcm9tcHRzJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgcHJvbXB0SWQpLnNpbmdsZSgpLFxuICAgICAgICB0aGlzLmNsaWVudC5mcm9tKCdyZXNwb25zZXMnKS5zZWxlY3QoYFxuICAgICAgICAgICosXG4gICAgICAgICAgbW9kZWw6bW9kZWxzKCopXG4gICAgICAgIGApLmVxKCdwcm9tcHRfaWQnLCBwcm9tcHRJZCksXG4gICAgICAgIHRoaXMuY2xpZW50LmZyb20oJ2NvbnNlbnN1c19ncm91cHMnKS5zZWxlY3QoJyonKS5lcSgncHJvbXB0X2lkJywgcHJvbXB0SWQpXG4gICAgICBdKVxuXG4gICAgICBpZiAocHJvbXB0UmVzdWx0LmVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHByb21wdDogJHtwcm9tcHRSZXN1bHQuZXJyb3IubWVzc2FnZX1gKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcm9tcHQ6IHByb21wdFJlc3VsdC5kYXRhLFxuICAgICAgICByZXNwb25zZXM6IHJlc3BvbnNlc1Jlc3VsdC5kYXRhIHx8IFtdLFxuICAgICAgICBjb25zZW5zdXNHcm91cHM6IGNvbnNlbnN1c1Jlc3VsdC5kYXRhIHx8IFtdXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb21wdCB3aXRoIHJlc3VsdHM6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VDbGllbnQgPSBuZXcgU3VwYWJhc2VDbGllbnQoKSJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJTdXBhYmFzZUNsaWVudCIsImdldE1vZGVscyIsImRhdGEiLCJlcnJvciIsImNsaWVudCIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImFzY2VuZGluZyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwidXBkYXRlTW9kZWxFbmFibGVkIiwiaWQiLCJlbmFibGVkIiwidXBkYXRlIiwidXBkYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVxIiwic2luZ2xlIiwidXBzZXJ0TW9kZWxzIiwibW9kZWxzIiwidXBzZXJ0Iiwib25Db25mbGljdCIsInNhdmVQcm9tcHQiLCJ0ZXh0IiwiaW5zZXJ0Iiwic2F2ZVJlc3BvbnNlcyIsInJlc3BvbnNlcyIsInNhdmVDb25zZW5zdXNHcm91cHMiLCJncm91cHMiLCJnZXRQcm9tcHRIaXN0b3J5IiwibGltaXQiLCJnZXRQcm9tcHRXaXRoUmVzdWx0cyIsInByb21wdElkIiwicHJvbXB0UmVzdWx0IiwicmVzcG9uc2VzUmVzdWx0IiwiY29uc2Vuc3VzUmVzdWx0IiwiUHJvbWlzZSIsImFsbCIsInByb21wdCIsImNvbnNlbnN1c0dyb3VwcyIsInN1cGFiYXNlQ2xpZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/zod","vendor-chunks/whatwg-url","vendor-chunks/tr46"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprompt%2Froute&page=%2Fapi%2Fprompt%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprompt%2Froute.ts&appDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbanik%2FDesktop%2FProjects2025%2FBMarkApp-NextJS&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();